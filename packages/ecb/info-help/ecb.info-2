This is ecb.info, produced by makeinfo version 4.8 from ecb.texi.

INFO-DIR-SECTION GNU Emacs Lisp
START-INFO-DIR-ENTRY
* ECB: (ecb).           Emacs Code Browser
END-INFO-DIR-ENTRY


File: ecb.info,  Node: ecb-methods,  Next: ecb-history,  Prev: ecb-sources,  Up: Customizable options

7.3.5 Group ecb-methods
-----------------------

This group contains settings for the methods-buffer in the ECB:

 -- User Option: auto-expand-tag-tree
     Expand the methods-tag-tree automatically if node invisible.

     This option has only an effect if option `ecb-highlight-tag-with-point'
     is switched on too. There are three possible choices:
        - `nil': No auto. expanding of the method buffer.

        - `expand-spec': Auto expand the method-buffer nodes if the node
          belonging to current tag under point is invisible because its
          parent-node is collapsed.  But expanding is only done if the type
          of the tag under point in the edit-buffer is contained in
          `ecb-methods-nodes-expand-spec'.

        - `all': Like expand-spec but expands all tags regardless of the
          setting in `ecb-methods-nodes-expand-spec'.

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: auto-expand-tag-tree-collapse-other
     Auto. expanding the tag-tree collapses all not related nodes. There are
     several choices:

        - Only if on tag: This means collapsing all nodes which have no
          relevance for the currently highlighted node will be collapsed,
          because they are not necessary to make the highlighted node
          visible. But do this only if point stays onto a tag in the selected
          edit-window.

        - Always: Same as before but collapse also when point doesn't stays
          on a tag (e.g. between two defuns in elisp) in the selected
          edit-window. This means in such a situation a full collapsing of
          the methods-buffer.

        - Never: Do not automatically collapse the methods-buffer.

 -- User Option: auto-update-methods-after-save
     Automatically updating the ECB method buffer after saving a source.

 -- User Option: default-tag-filter
     Default tag-filters for certain files. This option allow to define
     default tag-filters for certain files which are applied automatically
     after loading such a file into a buffer. The possible filters are the
     same as offered by the command `ecb-methods-filter' and they are applied
     in the same manner - the only difference is they are applied
     automatically. Please be aware that symbol-filters (e.g.
     protection-symbols like public or private) must not be inserted with
     quotes whereas a filter-regexp has to be inserted with surrounding
     double-quotes! In addition backslashes in a regexp have to be doubled!

     For each file-spec (a major-mode plus a file-regexp which both specify a
     file for which filters should be applied) there can be as much filters
     as needed - they are layered like with `ecb-methods-filter' too.

     Tag-classes which are completely hidden or excluded by the option
     `ecb-show-tags' will never being displayed in the Methods-buffer
     regardless of the filters of this option!

 -- User Option: disable-semantic-threshold-alist
     Threshold for disabling semantic-parsing Define a threshold fpr
     buffer-size. Exceeding this threshold disables parsing current buffer by
     semantic.

     This functionality is set on a major-mode base, i.e. for every
     major-mode a different setting can be used. The value of this option is
     a list of cons-cells:

        - The car is either a major-mode symbol or the special symbol
          'default which means if no setting for a certain major-mode is
          defined then the cdr of the 'default cons-cell is used.

        - The cdr is an integer which defines the threshold for the
          buffer-size for this major-mode.

     Example:

          ((default . 1000000)
            (c-mode . 200000))

     This example whould not parse c-mode buffers exceeding a buffer-size of
     200000. And buffers of all other modes would be only parsed if smaller
     than 1000000.

     A setting of `((c-mode . 200000))' would only restrict c-mode buffers to
     a size of 200000 but would parse all other buffer regardless their size.

 -- User Option: display-image-icons-for-semantic-tags
     Display nice and pretty icons for semantic-tags in the Methods-buffer.
     This option takes only effect if Emacs can display images and if
     `ecb-tree-buffer-style' is set to `image'.

 -- User Option: exclude-parents-regexp
     Regexps which parent classes should not be shown in the methods buffer
     (see also `ecb-show-parents'). If nil then all parents will be shown if
     `ecb-show-parents' is not nil.

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: expand-methods-switch-off-auto-expand
     Switch off auto expanding in the ECB-method buffer. If on then auto
     expanding is switched off after explicit expanding or collapsing by
     `ecb-expand-methods-nodes'.

     This is done with `ecb-toggle-auto-expand-tag-tree' so after the switch
     off the auto expanding feature can again switched on quickly.

     But after explicitly expanding/collapsing the methods-buffer to a
     certain level the auto. expanding could undo this when the node
     belonging to current tag under point in the current active edit-window
     is invisible after `ecb-expand-methods-nodes' - then the auto.  expand
     feature would make this node immediately visible and destroys the
     explicitly set expand-level.

 -- User Option: font-lock-tags
     Adds font-locking (means highlighting) to the ECB-method buffer.

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: highlight-tag-with-point
     How to highlight the method or variable under the cursor.

        - `highlight-scroll': Always scroll the method buffer, so the current
          method of the edit-window is highlighted in the method-window.

        - `highlight': Only highlight the current method of the edit window
          in the method window if the method is visible in the method-window.

        - `nil': No highlighting is done.

     See also `ecb-highlight-tag-with-point-delay'.

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: highlight-tag-with-point-delay
     Time Emacs must be idle before current tag is highlighted. If nil then
     there is no delay, means current tag is highlighted immediately. A small
     value of about 0.25 seconds saves CPU resources and you get even though
     almost the same effect as if you set no delay.  But such a delay
     prevents also "jumping backward/forward" during scrolling within
     java-classes if point goes out of method-definition into
     class-definition. Therefore the default value is a delay of 0.25 seconds.

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: methods-buffer-after-create-hook
     Local hook running after the creation of the methods-buffer. Every
     function of this hook is called once without arguments direct after
     creating the methods-buffer of ECB and it's local key-map. So for
     example a function could be added which performs calls of
     `local-set-key' to define new keybindings only for the methods-buffer of
     ECB.

 -- User Option: methods-buffer-name
     Name of the ECB methods buffer. Because it is not a normal buffer for
     editing you should enclose the name with stars, e.g. " *ECB Methods*".

     If it is necessary for you you can get emacs-lisp access to the
     buffer-object of the ECB-methods-buffer by this name, e.g. by a call of
     `set-buffer'.

     Changes for this option at runtime will take affect only after
     deactivating and then activating ECB again!

 -- User Option: methods-filter-replace-existing
     How the methods-filter should be applied to existing filters. There are
     three different choices:

        - `never': This is the default and means that calling
          `ecb-methods-filter' always adds the new filter on top of already
          existing filters. So you can combine several filter to one combined
          like this example: 'Display only all public methods having the
          string "test" in its name.' With this setting the filters can only
          be cleared by calling `ecb-methods-filter' and then choosing
          "nothing".

        - `always': This means that `ecb-methods-filter' always clears a
          previous filter before applying the new one.

        - `ask': ECB asks if the new filter should replace the existing ones.

 -- User Option: methods-menu-sorter
     Function which re-sorts the menu-entries of the directories buffer.

     If a function then this function is called to sort the menu-entries of
     the combined menu-entries of the user-menu-extensions of
     `ecb-methods-menu-user-extension' and the built-in-menu
     `ecb-methods-menu'. If nil then no special sorting will be done and the
     user-extensions are placed in front of the built-in-entries.

     For the guidelines for such a sorter-function see
     `ecb-directories-menu-sorter'.

 -- User Option: methods-menu-user-extension
     Static user extensions for the popup-menu of the methods buffer. For
     further explanations see `ecb-directories-menu-user-extension'.

     The node-argument of a menu-function contains as data the semantic-tag
     of the method/variable/tag for which the popup-menu has been opened.

     Per default the static user-extensions are added at the beginning of the
     built-in menu-entries of `ecb-methods-menu' but the whole menu can be
     re-arranged with `ecb-methods-menu-sorter'.

 -- User Option: methods-menu-user-extension-function
     Dynamic user extensions for the popup-menu of the methods buffer. A
     function which has to return a list in the same format like the option
     `ecb-methods-menu-user-extension'. This function is called when the user
     opens the popup-menu for the methods buffer. For an example how such a
     function can be programmed see `ecb-methods-menu-editwin-entries'.

     If no dynamically evaluated menu-extensions should be added to the
     methods-buffer the function has to return nil. Therefore the
     default-value of this option is `ignore'.

     Per default the dynamic user-extensions are added in front of the static
     extensions of `ecb-methods-menu-user-extension' but the whole menu can
     be re-arranged with `ecb-methods-menu-sorter'.

 -- User Option: methods-nodes-collapse-spec
     Semantic tag-types collapsed by `ecb-expand-methods-nodes'.  For valid
     values of this option see `ecb-methods-nodes-expand-spec'!

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: methods-nodes-expand-spec
     Semantic tag-types expanded by `ecb-expand-methods-nodes'.

     The value of this option is either the symbol `all' (all tags are
     expanded regardless of their type) or a list of symbols where each
     symbol is a valid semantic tag-type. For a description of semantic tag
     types see option `ecb-show-tags'.

     But this option also defines if bucket-nodes in the ECB-method-buffer
     (e.g. "[Variables]") should be expanded. Therefore valid symbols for
     this list are also all cars of the variable returned by
     `ecb--semantic-symbol->name-assoc-list'.

     If there is a bucket-name (the node-name stripped of the settings in
     `ecb-bucket-node-display') which is not contained as cdr in the value
     returned by `ecb--semantic-symbol->name-assoc-list' then the symbol with
     this bucket-name as name is also a valid symbol for this list. Example:
     In ECB there are buckets "[Parents]". The bucket-name is "Parents" and
     the valid symbol-name is then `Parents'.

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: methods-separate-prototypes
     Separate function-prototypes from the real functions. This is for
     example useful for C++ and C because these languages distinct between a
     method-prototype (rsp. function-prototype for C) and the method (rsp.
     function for C) itself. If this option is not nil then ECB separates the
     prototypes from the real function/methods. Then with `ecb-show-tags' the
     user can define different display-settings for each of them. If this
     option is nil then the prototypes and the real functions are filled in
     the same bucket and displayed plain and there is no sorting between
     prototypes and functions possible. If this option is switched on then it
     is senseful that `ecb-show-tags' contains for all modes which distinct
     between prototypes and real functions/methods two entries for the
     tag-type 'function - see the documentation of this option.

 -- User Option: methods-show-node-info
     When to display which node-info in the methods-buffer. Define which node
     info should displayed after moving the mouse over a node (or after a
     shift click onto the node) in the methods-buffer.

     You can define "when" a node-info should be displayed: See
     `ecb-directories-show-node-info' for the possible choices.

     You can define what info should be displayed:
        - name: Only the full node name is displayed.

        - name+type: The full name + the type of the node (function, class,
          variable) is displayed.

     Do NOT set this option directly via setq but use always customize!

 -- User Option: post-process-semantic-taglist
     Define mode-dependent post-processing for the semantic-taglist. This is
     an alist where the car is a major-mode symbol and the cdr is a list of
     function-symbols of functions which should be used for post-processing
     the taglist (returned by `ecb--semantic-bovinate-toplevel') for a buffer
     in this major-mode. The first function in the list is called with current
     semantic taglist of current buffer and must return a valid taglist
     again. All other functions are called with the result-taglist of its
     preceding function and have to return a new taglist again.

     For oo-programming languages where the methods of a class can be defined
     outside the class-definition (e.g. C++, Eieio) the function
     `ecb-group-function-tags-with-parents' can be used to get a much better
     method-display in the methods-window of ECB, because all method
     implementations of a class are grouped together.

     Another senseful usage is to filter out certain tags, e.g. prototype
     tags in `c-mode'. For this you can set `ecb-filter-c-prototyp-tags'.

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: show-only-positioned-tags
     Show only nodes in the method-buffer which are "jump-able". If not nil
     then ECB displays in the method-buffer only nodes which are "jump-able",
     i.e. after selecting it by clicking or with RET then ECB jumps to the
     corresponding location in the edit-window. Example: With CLOS or Eieio
     source-code there can exist some position-less nodes like
     variable-attributes in a `defclass' form which are only displayed if
     this option is nil. Displaying such nodes can be senseful even if they
     can not be jumped.

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: show-tags
     How to show tags in the methods buffer first time after find-file.  This
     functionality is set on a major-mode base, i.e. for every major-mode a
     different setting can be used. The value of this option is a list of
     cons-cells:

     The car is either a major-mode symbol or the special symbol 'default
     which means if no setting for a certain major-mode is defined then the
     cdr of the 'default cons-cell is used. This option should always contain
     a default-setting!

     The cdr is a list where each element represents a type of tags:

        (<tag type> <display type> <sort method>)

     There can be more than 1 element for a certain <tag type>. This is for
     example useful for C++ and C because these languages distinct between a
     method-prototype (rsp. function-prototype for C) and the method (rsp.
     function for C) itself. The default value of these option contains two
     entries for <tag type> is `function' whereas the first one is
     responsible for the "real" methods (rsp. functions) and the second one
     for the prototypes. So if the methods should be flattened and the
     prototypes collapsed the show-tags-list for C++ and C must contain two
     entries for <tag type> `function', the first one defined as `flattened'
     and the second one defined as `collapsed'.

     The tags in the methods buffer are displayed in the order as they appear
     in this list.

    `<tag type>'
          A Semantic tag type symbol (function, variable, rule, include etc.)
          or one of the following:

             - `t': All tag types not specified anywhere else in the list.

             - `parent': The parents of a type.

    `<display type>'
          A symbol which describes how the tags of this type shall be shown:

             - `expanded': The tags are shown in an expanded node.

             - `collapsed': The tags are shown in a collapsed node.

             - `flattened': The tags are added to the parent node.

             - `hidden': The tags are not shown.

    `<sort method>'
          A symbol describing how to sort the tags of this type:

             - `name': Sort by the tag name.

             - `access': Sort by tag access (public, protected, private) and
               then by name.

             - `nil': Don't sort tags. They appear in the same order as in
               the source buffer.

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: tag-display-function
     Function to use for displaying tags in the methods buffer. This
     functionality is set on major-mode base, i.e. for every major-mode a
     different function can be used. The value of this option is a list of
     cons-cells:

        - The car is either a major-mode symbol or the special symbol
          'default which means if no function for a certain major-mode is
          defined then the cdr of the 'default cons-cell is used.

        - The cdr is the function used for displaying a tag in the related
          major-mode.

     Every function is called with 3 arguments:

       1. The tag

       2. The parent-tag of tag (can be nil)

       3. The value of `ecb-font-lock-tags'.

     Every function must return the display of the tag as string, colorized
     if the third argument is not nil.

     The following functions are predefined:

        * For each element E of `ecb--semantic-format-function-alist' exists
          a function with name "ecb-<(cdr E)>". These functions are just
          aliase to the builtin format-functions of semantic. See the
          docstring of these functions to see what they do. Example:
          (semantic-name-nonterminal . semantic-format-tag-name) is an element
          of `ecb--semantic-format-function-alist'. Therefore the
          alias-function for this element is named
          `ecb--semantic-format-tag-name'.

        * For every cdr in `ecb--semantic-format-function-alist' with name
          "semantic-XYZ" a function with name "ecb-XYC" is predefined. The
          differences between the semantic- and the ECB-version are:

             - The ECB-version displays for type tags only the type-name and
               nothing else (exception: In c++-mode a template specifier is
               appended to the type-name if a template instead a normal
               class).

             - The ECB-version displays type-tags according to the setting in
               `ecb-type-tag-display'. This is useful for better recognizing
               different classes, structs etc. in the ECB-method window.

          For all tags which are not types the display of the ECB-version is
          identical to the semantic version. Example: For
          `ecb--semantic-format-tag-name' (one of the builtin semantic
          formatters) the pendant is `ecb-format-tag-name'.

     This functionality also allows the user to display tags as UML. To
     enable this functionality set the function for a major-mode \(e.g.
     `jde-mode') to `ecb--semantic-format-tag-uml-concise-prototype',
     `ecb--semantic-format-tag-uml-prototype', or
     `ecb--semantic-format-tag-uml-abbreviate' the ECB-versions of these
     functions.

     If the value is `nil', i.e. neither a function for a major-mode is
     defined nor the special 'default, then
     `ecb--semantic-format-tag-prototype' is used for displaying the tags.

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: tag-jump-sets-mark
     Set the mark after jumping to a tag from the ECB-method buffer. If set
     the user can easily jump back.

 -- User Option: tag-visit-post-actions
     Actions to perform after visiting a tag from the Method-buffer. With
     this option actions can be added which will be performed after visiting
     the start of the tag in the source-buffer.

     This functionality is set on a `major-mode' base, i.e. for every
     `major-mode' a different setting can be used. The value of this option
     is a list of cons-cells:
        - The car is either a `major-mode' symbol or the special symbol
          'default.

        - The cdr is a list of action-functions or nil.

     ECB first performs all actions defined for the special symbol 'default
     (if any) and then all actions defined for current `major-mode' (if any).

     ECB offers some predefined senseful action-functions. Currently there
     are: `ecb-tag-visit-highlight-tag-header' `ecb-tag-visit-smart-tag-start'
     `ecb-tag-visit-recenter' `ecb-tag-visit-recenter-top'
     `ecb-tag-visit-goto-doc-start' `ecb-tag-visit-narrow-tag' See the
     documentation of these function for details what they do.

     But you can add any arbitrary function if the following conditions are
     fulfilled: The function gets the semantic tag as argument, returns the
     (new) point after finishing its job and the function must not put the
     point outside the tag-boundaries of the tag-argument.

 -- User Option: type-tag-display
     How to display semantic type-tags in the methods buffer. Normally all
     tag displaying, colorizing and facing is done by semantic according to
     the value returned by `ecb--semantic-format-face-alist' and the semantic
     display-function (e.g. one from `ecb--semantic-format-tag-functions').
     But sometimes a finer distinction in displaying the different type
     specifiers of type-tags can be useful. For a description when this
     option is evaluated look at `ecb-tag-display-function'!

     This functionality is set on a major-mode base, i.e. for every
     major-mode a different setting can be used. The value of this option is
     a list of cons-cells:

        * The car is either a major-mode symbol or the special symbol
          'default which means if no setting for a certain major-mode is
          defined then the cdr of the 'default cons-cell is used.

        * The cdr is a list of 3-element-lists:

            1. First entry is a semantic type specifier in string-form.
               Current available type specifiers are for example "class",
               "interface", "struct", "typedef" and "enum". In addition to
               these ones there is also a special ECB type specifier "group"
               which is related to grouping tags (see
               `ecb-post-process-semantic-taglist' and
               `ecb-group-function-tags-with-parents'). Any arbitrary
               specifier can be set here but if it is not "group" or not
               known by semantic it will be useless.

            2. Second entry is a flag which indicates if the type-specifier
               string from (1.) itself should be removed (if there is any)
               from the display.

            3. Third entry is the face which is used in the ECB-method window
               to display type-tags with this specifier. ECB has some
               predefined faces for this (`ecb-type-tag-class-face',
               `ecb-type-tag-interface-face', `ecb-type-tag-struct-face',
               `ecb-type-tag-typedef-face', `ecb-type-tag-union-face',
               `ecb-type-tag-enum-face' and `ecb-type-tag-group-face') but
               any arbitrary face can be set here. This face is merged with
               the faces semantic already uses to display a tag, i.e. the
               result is a display where all face-attributes of the ECB-face
               take effect plus all face-attributes of the semantic-faces
               which are not set in the ECB-face (with XEmacs this merge
               doesn't work so here the ECB-face replaces the semantic-faces;
               this may be fixed in future versions).

     The default value is nil means there is no special ECB-displaying of
     type-tags in addition to the displaying and colorizing semantic does.
     But a value like the following could be a useful setting:

        ((default
           ("class" t ecb-type-tag-class-face)
           ("group" nil ecb-type-tag-group-face))
         (c-mode
          ("struct" nil ecb-type-tag-struct-face)
          ("typedef" nil ecb-type-tag-typedef-face)))

     This means that in `c-mode' only "struct"s and "typedef"s are displayed
     with special faces (the specifiers itself are not removed) and in all
     other modes "class"s and grouping-tags (see `ecb-tag-display-function',
     `ecb-group-function-tags-with-parents') have special faces and the
     "class" specifier-string is removed from the display.

     This options takes only effect for semantic-sources - means sources
     supported by semantic!

 -- User Option: type-tag-expansion
     Default expansion of semantic type-tags. Semantic groups type-tags in
     different type-specifiers. Current available type specifiers are for
     example "class", "interface", "struct", "typedef", "union" and "enum".
     In addition to these ones there is also a special ECB type-specifier
     "group" which is related to grouping tags (see
     `ecb-post-process-semantic-taglist').

     This option defines which type-specifiers should be expanded at
     file-open-time. Any arbitrary specifier can be set here but if it is not
     "group" or not known by semantic it will be useless.

     This functionality is set on a major-mode base, i.e. for every
     major-mode a different setting can be used. The value of this option is
     a list of cons-cells:

        * The car is either a major-mode symbol or the special symbol
          `default' which means if no setting for a certain major-mode is
          defined then the cdr of the `default' cons-cell is used.

        * The cdr is either a list of type-specifiers which should be expanded
          at file-open-time or the symbol `all-specifiers' (then a type-tag
          is always expanded regardless of its type-specifier).

     This options takes only effect for semantic-sources - means sources
     supported by semantic!


File: ecb.info,  Node: ecb-history,  Next: ecb-analyse,  Prev: ecb-methods,  Up: Customizable options

7.3.6 Group ecb-history
-----------------------

This group contains settings for the history-buffer in the ECB:

 -- User Option: history-buffer-after-create-hook
     Local hook running after the creation of the history-buffer. Every
     function of this hook is called once without arguments direct after
     creating the history-buffer of ECB and it's local key-map. So for
     example a function could be added which performs calls of
     `local-set-key' to define new keybindings only for the history-buffer of
     ECB.

 -- User Option: history-buffer-name
     Name of the ECB history buffer. Because it is not a normal buffer for
     editing you should enclose the name with stars, e.g. "*ECB History*".

     If it is necessary for you you can get emacs-lisp access to the
     buffer-object of the ECB-history-buffer by this name, e.g. by a call of
     `set-buffer'.

     Changes for this option at runtime will take affect only after
     deactivating and then activating ECB again!

 -- User Option: history-exclude-file-regexps
     List of regexps which exclude source-files from being historized. Be
     aware that each always full filenames (ie. incl. full path) are matched
     against these regexps! Therefore be carefore with regexps beginning with
     ^!

 -- User Option: history-item-name
     The name to use for items in the history buffer.

 -- User Option: history-menu-sorter
     Function which re-sorts the menu-entries of the directories buffer.

     If a function then this function is called to sort the menu-entries of
     the combined menu-entries of the user-menu-extensions of
     `ecb-history-menu-user-extension' and the built-in-menu
     `ecb-history-menu'. If nil then no special sorting will be done and the
     user-extensions are placed in front of the built-in-entries.

     For the guidelines for such a sorter-function see
     `ecb-directories-menu-sorter'.

 -- User Option: history-menu-user-extension
     Static user extensions for the popup-menu of the history buffer. For
     further explanations see `ecb-directories-menu-user-extension'.

     The node-argument of a menu-function contains as data the filename of
     the source for which the popup-menu has been opened.

     Per default the static user-extensions are added at the beginning of the
     built-in menu-entries of `ecb-history-menu' but the whole menu can be
     re-arranged with `ecb-history-menu-sorter'.

 -- User Option: history-menu-user-extension-function
     Dynamic user extensions for the popup-menu of the history buffer. A
     function which has to return a list in the same format like the option
     `ecb-history-menu-user-extension'. This function is called when the user
     opens the popup-menu for the history buffer.

     If no dynamically evaluated menu-extensions should be added to the
     history-buffer the function has to return nil. Therefore the
     default-value of this option is `ignore'.

     Per default the dynamic user-extensions are added in front of the static
     extensions of `ecb-history-menu-user-extension' but the whole menu can
     be re-arranged with `ecb-history-menu-sorter'.

 -- User Option: history-show-node-info
     When to display which node-info in the history-buffer. Define which node
     info should displayed after moving the mouse over a node (or after a
     shift click onto the node) in the history-buffer.

     You can define "when" a node-info should be displayed: See
     `ecb-directories-show-node-info' for the possible choices.

     You can define what info should be displayed: See
     `ecb-directories-show-node-info' for the possible choices.

     Do NOT set this option directly via setq but use always customize!

 -- User Option: history-sort-ignore-case
     Ignore case for sorting the history-entries. See also
     `ecb-history-sort-method'.

 -- User Option: history-sort-method
     Defines how the entries in the history-buffer are sorted.
        - `name': Sorting by name (default).

        - `extension': Sorting first by extension and then by name.

        - `nil': No sorting, means the most recently used buffers are on the
          top of the history and the seldom used buffers at the bottom.

     See also `ecb-history-sort-ignore-case'.

 -- User Option: kill-buffer-clears-history
     Define if `kill-buffer' should also clear the history. There are three
     options:

        - `auto': Removes automatically the corresponding history-entry after
          the buffer has been killed.

        - `ask': Asks, if the history-entry should be removed after the kill.

        - `nil': `kill-buffer' does not affect the history (this is the
          default).


File: ecb.info,  Node: ecb-analyse,  Next: ecb-layout,  Prev: ecb-history,  Up: Customizable options

7.3.7 Group ecb-analyse
-----------------------

 -- User Option: analyse-bucket-element-face
     Basic face for displaying elements of buckets in the ECB-analyse-buffer.
     This defines the basic face for the elements of category-buckets like
     Context, Prefix, Completions etc. in the ECB-analyse-buffer.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: analyse-bucket-node-face
     Basic face for displaying a bucket-node in the ECB-analyse-buffer.  This
     defines the basic face for the bucket-nodes like Context, Prefix,
     Completions etc. in the ECB-analyse-buffer.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: analyse-buffer-after-create-hook
     Local hook running after the creation of the analyse-buffer. Every
     function of this hook is called once without arguments direct after
     creating the analyse-buffer of ECB and it's local key-map. So for
     example a function could be added which performs calls of
     `local-set-key' to define new key-bindings only for the analyse-buffer
     of ECB.

 -- User Option: analyse-buffer-name
     Name of the ECB analyse buffer. Because it is not a normal buffer for
     editing you should enclose the name with stars, e.g. "*ECB Analyse*".

     If it is necessary for you you can get emacs-lisp access to the
     buffer-object of the ECB-analyse-buffer by this name, e.g. by a call of
     `set-buffer'.

     Changes for this option at runtime will take affect only after
     deactivating and then activating ECB again!

 -- User Option: analyse-collapsed-buckets
     Buckets collapsed when displaying the current semantic analysis. The
     semantic analyse-modul offers several categories of analysis which are
     called buckets here. These are for example:

     Context: The current context, which is the current function/method,
     variable, class etc. (what exactly depends on the programming language)
     point is in. This means not the current
     function/method/variable/class-name point stand on but the current
     surrounding context. Example: If point stays somewhere within a
     defun-definition in emacs-lisp or within a java-method then this defun
     rsp. method is the context. In object oriented languages this can be the
     full hierachy, i.e. not only the current method, but the current method,
     the class of this method, the superclass of this class and so on!

     Arguments: The arguments of the context if the context is a
     function/method.

     Local Variables: All accessible and bound local variables visible at
     current point.

     Prefix: The currently parsed prefix, which is mostly the current
     identifier point stands on.

     Assignee: See the semantic user-manual

     Function: Current function-name point stands on.

     Argument #: When point is located within a function-call then this is
     the number of the argument point stands on.

     Completions: All possible completions for current prefix (see above).
     This is probably the most helpful bucket.

     If one of these categories/buckets are not needed per default then add
     the bucket-name (s.a.) to this option and ECB will per default collapse
     this bucket. So most needed buckets are better visible in the
     analyse-buffer.

 -- User Option: analyse-face
     Face used for highlighting current entry in the analyse buffer. If the
     face `ecb-default-highlight-face' is used then the display of all
     ECB-tree-buffers can be changed by modifying only the face
     `ecb-default-highlight-face'.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: analyse-fontified-buckets
     Buckets whose elements should be fontified as in the methods-buffer.  If
     the name of a category/bucket is contained in this option then all
     elements of this bucket will be displayed as in the methods-buffer - at
     least if an element is a semantic-tag. This means if
     `ecb-font-lock-tags' is not nil these elements will be fontified and
     also displayed with an appropriate icon if possible. The default value
     does this only for the Context-bucket because for most of the other
     buckets this makes not really much sense.

     For available buckets see `ecb-analyse-collapsed-buckets'.

     For the faces used to display a bucket-node itself or bucket-elements
     not fontified see the options `ecb-analyse-bucket-node-face' rsp.
     `ecb-analyse-bucket-element-face'.

 -- User Option: analyse-gen-tag-info-fn
     Which info should be displayed for a tag of the analyse-buffer. If nil
     then the default information about a tag will be displayed. If a
     function then this function gets as argument the tag for which
     tag-information should be displayed. This function has to return a
     string which will be then display as tag-info. This string has to be
     fully formatted (e.g. must already include line-breaks if the tag-info
     should be displayed in several lines).

     See `ecb-analyse-show-tag-info-fn' how the tag-info is displayed.

 -- User Option: analyse-general-face
     Basic face for the ECB analyse buffer. This defines the basic face the
     whole history buffer should displayed with. If the face
     `ecb-default-general-face' is used then the display of all
     ECB-tree-buffers can be changed by modifying only the face
     `ecb-default-general-face'.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: analyse-show-node-info
     When to display which node-info in the history-buffer. Define which node
     info should displayed after moving the mouse over a node (or after a
     shift click onto the node) in the history-buffer.

     You can define "when" a node-info should be displayed: See
     `ecb-directories-show-node-info' for the possible choices.

     You can define what info should be displayed:

        - name: The full name of the node

        - full-info: All infos available to a node.

     Do NOT set this option directly via setq but use always customize!

 -- User Option: analyse-show-tag-info-fn
     How to display the tag-info for a tag of the analyse-buffer. The value
     of this option is a function which will be called with the info-string
     generated for the current tag of the analyse-buffer. This function must
     do all things necessary for displaying this info. When this function is
     called the window stored in `ecb-last-edit-window-with-point' is the
     selected window!

     ECB offers two builtin ways: Display the info in the echo-area (via the
     function `message') or in a temp-buffer in the edit-area (via the
     function `ecb-analyse-show-tag-info-in-temp-buffer'). Default is
     echo-area-display.

     See also `ecb-analyse-gen-tag-info-fn'.


File: ecb.info,  Node: ecb-layout,  Next: ecb-compilation,  Prev: ecb-analyse,  Up: Customizable options

7.3.8 Group ecb-layout
----------------------

This group contains settings for the screen-layout of the ECB:

 -- User Option: activate-before-new-frame-created-hook
     Normal hook run before the new ECB-frame is created if
     `ecb-new-ecb-frame' is not nil (otherwise this hook is not evaluated).

 -- User Option: advice-window-functions-signal-error
     Signal an error if an adviced function can not do its job. If not nil
     then an error is signaled if one of the adviced user-commands can not do
     its job. So for example if the user tries to split the compile-window or
     an ecb-tree-window or if one tries to switch to another buffer in one of
     the ecb-tree-windows. For details see the documentation of each of the
     adviced functions to get info when an error is signaled.

     If this option is nil then no error is signaled but the called adviced
     function does simply nothing.

     Default is nil but it can also be useful to signal errors - so you see
     when call a function in a situation which is not supported by this
     function.

 -- User Option: fix-window-size
     Fix size of the ECB-windows/buffers even after frame-resizing. The fix
     type (valid values are nil, t, width and height) can either be set on a
     layout-basis (means a different value for each layout) or one value can
     be set for all layouts. For the latter case there is an additional value
     `auto' which choose autom. the senseful fix-type depending on the
     current layout-type: For top-layouts the fix-type `height' and for all
     other layout-types the fix-type `width'.

     For a detailed description of the valid values see documentation of
     `window-size-fixed' which is newly introduced in GNU Emacs 21 and is
     only available there. Therefore this option takes only effect with GNU
     Emacs >= 21. This option has no effect with XEmacs because it does not
     support the feature `window-size-fixed'.

     Note1: Manually resizing the ECB-windows via `enlarge-window',
     `shrink-window', `mouse-drag-vertical-line' and `mouse-drag-mode-line'
     is still possible even if the window-sizes are fixed for frame-resizing!

     Note2: The description of `window-size-fixed' in the elisp-info-manual
     is more detailed than the description offered by `C-h v'!

     Note3: With Emacs < 22 there seems to be no distinction between 'width,
     'height and t. Therefore this option takes no effect (means all
     ecb-windows have always unfixed sizes) with Emacs < 22 if
     `ecb-compile-window-height' is not nil.

     Per default no window-size fixing has been done.

 -- User Option: hide-ecb-windows-after-hook
     Hooks run direct after the ECB windows have been hidden. Hiding was done
     either by `ecb-toggle-ecb-windows' or `ecb-hide-ecb-windows'.

     IMPORTANT: Hiding the ECB-windows is internally done by calling
     `ecb-redraw-layout' and therefore also the hooks
     `ecb-redraw-layout-before-hook' and `ecb-redraw-layout-after-hook' are
     evaluated. The hook-sequence is analogous to that described in
     `ecb-show-ecb-windows-after-hook'.

 -- User Option: hide-ecb-windows-before-hook
     Hook run direct before the ECB windows will be hidden. Hiding is done
     either by `ecb-toggle-ecb-windows' or `ecb-hide-ecb-windows'. This means
     that at runtime of this hook all the ECB-tree-windows of current layout
     are visible.

     IMPORTANT: Hiding the ECB-windows is internally done by calling
     `ecb-redraw-layout' and therefore also the hooks
     `ecb-redraw-layout-before-hook' and `ecb-redraw-layout-after-hook' are
     evaluated. The hook-sequence is analogous to that described in
     `ecb-show-ecb-windows-before-hook'.

 -- User Option: ignore-display-buffer-function
     Adviced `display-buffer' ignores `display-buffer-function'.  This means,
     that the adviced version of `display-buffer' ignores the value of
     `display-buffer-function' when called for the `ecb-frame'. If this
     variable should not be ignored then the function of
     `display-buffer-function' is completely responsible which window is used
     for the buffer to display - no smart ECB-logic will help to deal best
     with the ECB-window-layout! You can define if and when
     `display-buffer-function' should be ignored:

        - only when persistent compile window is used - i.e. if
          `ecb-compile-window-height' is not nil

        - always when ECB is active - that means ignore when ECB is active
          otherwise not - this is the default value

        - never, the adviced version of `display-buffer' always uses the
          value of `display-buffer-function' if the value is a function.

 -- User Option: ignore-special-display
     Ignore special-display-handling. This means, that all values of
     `special-display-function', `special-display-buffer-names' and
     `special-display-regexps' are ignored

        * only when persistent compile window is used - i.e. if
          `ecb-compile-window-height' is not nil - this is the default value.

        * always when ECB is active - that means no special-display-handling
          of buffers when ECB is active

        * never, i.e. special-dislay-handling depends on the values of the
          options `special-display-function', `special-display-buffer-names'
          and `special-display-regexps'.


 -- User Option: layout-always-operate-in-edit-window
     Adviced window functions work always in the edit-window. If we are in an
     ECB special buffer (methods, directories, etc), and any of the adviced
     windowing functions is called interactively, we will select first an
     edit-window according to the value of `ecb-mouse-click-destination'.
     This is useful if you have any functions that use such functions and you
     don't want them to fail with an error complaining that the current
     buffer can not be split, or something similar.

     Because this may not be desirable in all situations and for all adviced
     functions this can be enabled separately for function where it is
     senseful. If the symbol of an adviced function is contained in the value
     of this option, then the edit-window is first selected otherwise either
     an error is reported or some other special reaction (depends on
     `ecb-advice-window-functions-signal-error'); see the documentation of
     the adviced functions for this.

     Per default this is only enabled for `switch-to-buffer'.

 -- User Option: layout-debug-mode
     Write debug-information about layout-operations in the Messages-buffer.
     Normally there should be no need to set this option to true but if there
     are problems to display buffers in the compile-window of ECB (e.g.
     buffers which should be displayed there aren't or the temporally
     enlarging-mechanism does not do what you think it should do etc...) then
     please do the following steps:

       1. Set `ecb-layout-debug-mode' to not nil

       2. Reproduce the wrong behavior exactly by repeating all the operations
          which lead to the problem.

       3. Now send immediately a bug report with `ecb-submit-problem-report'.

       4. Set `ecb-layout-debug-mode' back to nil if you do not want further
          debugging output in the *Messages* buffer

 -- User Option: layout-name
     Select a window layout of ECB. Value is any arbitrary string. There are
     four different types of layouts: left, right, top and left-right, which
     means the location of the ECB-tree-windows in the ECB-frame.  Currently
     there are 20 predefined layouts; names see below. You can savely try out
     any of them by changing this value and saving it only for the current
     session. If you are sure which layout you want you can save it for
     future sessions. To get a picture of the layout for name <name> call
     `ecb-show-layout-help'. `ecb-layout-function-9'.

     Currently available layouts:

        * Left layouts: left1 left2 left3 left4 left5 left6 left7 left8 left9
          left10 left11 left12 left13 left14 left15

        * Right layouts: right1

        * Top layouts: top1 top2

        * Left-right layouts: leftright1 leftright2

     Regardless of the settings you define here: If you have destroyed or
     changed the ECB-screen-layout by any action you can always go back to
     this layout with `ecb-redraw-layout'

 -- User Option: layout-window-sizes
     Specifies the sizes of the ECB windows for each layout. The easiest way
     (and also the strongly recommended way) to change this variable is to
     change the window sizes by dragging the window borders using the mouse
     and then store the window sizes by calling the command
     `ecb-store-window-sizes'. Next time the layout is redrawn the values
     stored in this option will be used.

     If `ecb-store-window-sizes' is used then the windows sizes are stored
     per default as fractions of current frame-width and -height of the
     ecb-frame, so the stored values will "work" for other frame sizes too.
     But if you call `ecb-store-window-sizes' with a prefix-argument then the
     fixed values of current width and height are stored!

     If this option is set "by hand" (i.e. not by `ecb-store-window-sizes')
     then the following is important:
        - It is recommended to use fractions of frame-width and -height!.

        - The order of the sequence of the inserted window sizes must be the
          same as `other-window' (the not-adviced version!) would walk!

 -- User Option: maximize-ecb-window-after-selection
     If not nil maximize current tree-window after selection. When selecting
     another not-tree-window after such an automatic maximizing all
     tree-windows of current layout are displayed again. But a tree-window is
     not maximized if either a node has been selected via primary- oder
     secondarc mouse-button or the popup-menu of that tree-buffer has been
     opened.

 -- User Option: maximize-next-after-maximized-select
     Maximizes the next logical tree-window after a maximized node-selection.
     Selecting a node in a maximized tree-window is handled very smart by ECB:

     If a tree-buffer-name is not contained in this option then selecting a
     node in this maximized tree-buffer automatically "minimizes" that
     tree-window (i.e. displays all windows of the current layout) so the
     user can perform the next logical step (e.g. the next logical step after
     selecting a directory in the directories-buffer is to select a
     source-file - therefore the sources-buffer of current layout has to be
     displayed - if the current layout contains one; the next logical step of
     selecting a source-file is probably to jump to a certain tag via the
     methods-buffer).

     If a tree-buffer-name is contained in this option then selecting a node
     in this tree-buffer automatically maximizes the next logical tree-window
     (e.g. directories -> sources, sources/history -> methods). But if the
     current maximized tree-buffer is also contained in the option
     `ecb-tree-do-not-leave-window-after-select' (see also the
     tree-buffer-command `ecb-toggle-do-not-leave-window-after-select' which
     is bound to `C-t' in each tree-buffer) then ECB does *not* maximize the
     next logical tree-window but point stays in the currently maximized
     tree-buffer so for example the user can select more than one node (e.g.
     more than one source-file from the sources-buffer.

     The tree-buffer-name can either be defined as plain string or with a
     symbol which contains the buffer-name as value. The latter one is
     recommended for the builtin ECB-tree-buffers because then simply the
     related option-symbol can be used (e.g.  `ecb-directories-buffer-name',
     `ecb-sources-buffer-name' or `ecb-history-buffer-name').

     In future versions this option will probably also allow to define the
     next logical tree-buffer for a tree-buffer - currently this is
     hard-coded as follows:
        - directories -next-logical-> sources

        - sources     -next-logical-> methods

        - history     -next-logical-> methods.

 -- User Option: maximize-next-after-maximized-select
     Maximizes the next logical tree-window after a maximized node-selection.
     Selecting a node in a maximized tree-window is handled very smart by ECB:

     If this option is nil then selecting a node in a maximized directories-
     sources- or history-tree-buffer automatically "minimizes" that
     tree-window (i.e. displays all windows of the current layout) so the
     user can perform the next logical step (e.g.  the next logical step
     after selecting a directory in the directories-buffer is to select a
     source-file - therefore the sources-buffer of current layout has to be
     displayed - if the current layout contains one; the next logical step of
     selecting a source-file is probably to jump to a certain tag via the
     methods-buffer).

     If this option is not nil then selecting a node in a maximized
     directories- sources- or history-tree-buffer automatically maximizes the
     next logical tree-window (directories -> sources, sources/history ->
     methods). But if the current maximized tree-buffer is contained in the
     option `ecb-tree-do-not-leave-window-after-select' (see also the
     tree-buffer-command `ecb-toggle-do-not-leave-window-after-select' which
     is bound to `C-t' in each tree-buffer) then ECB does *not* maximize the
     next logical tree-window but point stays in the currently maximized
     tree-buffer so for example the user can select more than one source-file
     from the sources-buffer.

 -- User Option: new-ecb-frame
     Create a new frame at activation time of ECB.

 -- User Option: other-window-behavior
     The behavior of ECB concerning getting an "other window". The following
     settings are possible:

     `all':

     ECB will cycle through all windows of the ECB-frame or scroll simply the
     next window in the ECB-frame, means it behaves like the original
     `other-window' rsp. the original `other-window-for-scrolling'.

     `only-edit':

     ECB will only cycle through the edit-windows of ECB or only scroll
     another edit-window. If the selected window is not an edit-window then
     it behaves like with value `all'.

     `edit-and-compile':

     Like `only-edit' plus the compile window if any. If the selected window
     is neither an edit-window nor the compile-window then it behaves like
     with value `all'.

     `smart':

     With this setting ECB tries to choose the `other-window'-destination or
     the "other window" to scroll in a smart and intuitive way: If point is
     in one of the edit-windows and if the edit-area is splitted then always
     the "next" edit-window is choosen (whereas the next edit-window of the
     last edit-window is the first edit-window)- if the edit-area is
     unsplitted then the compile-window is used if there is one. In the
     context of an `other-window'-call the ARG of `other-window' will be
     taken into account.

     If one of the special ecb-windows is selected then always the "next"
     ecb-window is choosen (whereas the next ecb-window of the last
     ecb-window is the first ecb-window). In the context of an
     `other-window'-call the ARG of `other-window' will be taken into
     account. If there is only one ecb-window then ECB considers also the
     edit-windows

     If the compile-window is selected then always the last edit-window which
     had the point will be used unless `other-window' has been called with a
     prefix-argument unequal 1.

     If there is an active minibuffer:

     Regardless of the allowed values above ECB handles the situation of an
     active minibuffer during a call to `other-window' or
     `scroll-other-window' like follows:

     If the minibuffer-window is selected then ECB always chooses the window
     `minibuffer-scroll-window' points to (when this variable is set,
     otherwise the compile-window or the last selected edit-window is
     choosen) when the called command is called to choose the 1. next window
     (always true for scrolling another window or true when `other-window'
     called without prefix-arg or with prefix-arg equal 1). Otherwise the
     window ARG steps away is choosen (in case of `other-window').

     If there is an active minibuffer but the minibuffer-window is not
     selected then `other-window' and `scroll-other-window' behave like the
     original version.

     In addition to the allowed values above the value of this option can
     also be a function:

     A function:

     This function gets seven arguments:
       1. A canonical list of all currently visible windows of the `ecb-frame'

       2. A canonical list of all currently visible edit-windows

       3. A canonical list of all currently visible ecb-windows

       4. The window-object of the compile-window if there is any.

       5. The minibuffer-window of the ECB-frame if there is an active
          minibuffer.

       6. The result of the function `ecb-where-is-point' - see the
          documentation of this function for details.

       7. An integer which indicates how many steps away from the current
          selected window the "other-window" is. Is nil when this function is
          called in another context then for `other-window'.

     The function has to return a window-object which is then used as "other
     window" for the command `other-window' or for scrolling another window
     (e.g. with `scroll-other-window'). Such a function has to handle
     properly all situation for itself.  `ecb-get-other-window-smart' is an
     example for such a function.

 -- User Option: redraw-layout-after-hook
     Hooks run direct before the ECB windows will be shown either by
     `ecb-toggle-ecb-windows' or `ecb-show-ecb-windows'. This means that at
     runtime of this hook the ECB-windows are already visible.

 -- User Option: redraw-layout-before-hook
     Hooks run direct before the ECB-layout will be redrawn by either
     `ecb-redraw-layout'.

 -- User Option: redraw-layout-quickly
     If non-nil, we will attempt to redraw the layout quickly. Please read
     also carefully the documentation of `ecb-redraw-layout'.

 -- User Option: select-edit-window-on-redraw
     Select the first edit window on `ecb-redraw-layout'.

 -- User Option: show-ecb-windows-after-hook
     Hooks run direct before the ECB windows will be shown either by
     `ecb-toggle-ecb-windows' or `ecb-show-ecb-windows'. This means that at
     runtime of this hook the ECB-windows are already visible.

     IMPORTANT: Showing the hidden ECB-windows is internally done by calling
     `ecb-redraw-layout' and therefore also the hooks
     `ecb-redraw-layout-before-hook' and `ecb-redraw-layout-after-hook' are
     evaluated. So there is the following sequence of hooks during the
     process of showing the hidden ECB-windows:
       1. `ecb-show-ecb-windows-before-hook'

       2. `ecb-redraw-layout-before-hook'

       3. <redrawing the layout to show the hidden ECB-windows>

       4. `ecb-redraw-layout-after-hook'

       5. `ecb-show-ecb-windows-after-hook'
          So be aware which code you add to which hook!

 -- User Option: show-ecb-windows-before-hook
     Hooks run direct before the ECB windows will be shown either by
     `ecb-toggle-ecb-windows' or `ecb-show-ecb-windows'. This means that at
     runtime of this hook the ECB-windows are still hidden.

     IMPORTANT: Showing the hidden ECB-windows is internally done by calling
     `ecb-redraw-layout' and therefore also the hooks
     `ecb-redraw-layout-before-hook' and `ecb-redraw-layout-after-hook' are
     evaluated. So there is the following sequence of hooks during the
     process of showing the hidden ECB-windows:
       1. `ecb-show-ecb-windows-before-hook'

       2. `ecb-redraw-layout-before-hook'

       3. <redrawing the layout to show the hidden ECB-windows>

       4. `ecb-redraw-layout-after-hook'

       5. `ecb-show-ecb-windows-after-hook'
          So be aware which code you add to which hook!

 -- User Option: split-edit-window-after-start
     Sets if and how the edit window should be splitted after ECB-start.  But
     be aware: This option determines only if and how the edit-window should
     be splitted at start-time of ECB. There are five different values
     allowed for this option:

        - `nil': Do not split the edit-area of ECB after activation, i.e.
          there will be only one edit-window after starting ECB.

        - `horizontal': Split the edit-area in 2 edit-windows side by side.

        - `vertical': Split the edit-area in 2 edit-windows, one above the
          other.

        - `before-activation': Split the edit-area as before the ECB-start,
          i.e. the edit-area will have after start a window-layout as the
          whole frame had before the start of ECB.

        - `before-deactivation': Split the edit-area into a window-layout ECB
          had in its edit-area direct before the ECB-deactivation. This value
          preserves the full state between activations of ECB, i.e. the
          visibility of the ECB-windows, the visibility of a compile-window
          and also the full split-state of the edit-area. But this can only
          be done if important layout-options have not been changed in the
          meanwhile. These are the options `ecb-layout-name',
          `ecb-compile-window-height', `ecb-compile-window-width',
          `ecb-windows-width' and `ecb-windows-height'.

     Default value is `before-deactivation'.

     Some remarks to the value `before-activation': If this value has been
     set then ECB needs three permanent adivces even when ECB is deactivated:
     `split-window', `delete-window' and `delete-other-windows'. But these
     advices do not change any behavior of these functions but only storing
     in an internal ECB-variable the facts that a window has been splitted or
     deleted. In addition to this these advices are 100% error-save, means the
     functionality of the original functions will be performed in every(!)
     case even if within the advice an error occurs (but normally there can
     no errors occur in these advices because they are very simple).
     Conclusion: If you want really all ECB-advices being disabled after
     deactivating ECB then you have to set this option to other values then
     `before-activation'. But setting this variable to this value is really
     completely save.

 -- User Option: toggle-layout-sequence
     Toggle sequence for layout toggling with `ecb-toggle-layout'.  Every
     element of this list has to be a valid layout-name i.e. either one of
     the predefined layouts or one of the user-defined layouts.

     You can add here as many layouts as you want but to use this option most
     effective you should not add more than 2 or 3 layouts so every layout
     can be accessed very fast by toggling with `ecb-toggle-layout'. It is
     also senseful to add layouts which have the same principal outline, i.e.
     all their tree-buffers are on the same side of the frame and the
     tree-buffer-"column" (or -"row") has identical size for the layouts.

     Recommended values are for example:

        - ("left10" "left15"), toggles between methods and directories/history

        - ("left10" "left13"), toggles between methods and directories

        - ("left10" "left14"), toggles between methods and history

        - ("left10" "left13" "left14"), toggles between methods, history and
          directories

     See also option `ecb-show-sources-in-directories-buffer'.

     This option makes only sense if the value is a list with more than 1
     element!

 -- User Option: windows-height
     The height of the ECB windows in lines for top-layouts. If the number is
     less than 1.0 the width is a fraction of the frame height.

 -- User Option: windows-width
     The width of the ECB windows in columns for left- and right layouts.  If
     the number is less than 1.0 the width is a fraction of the frame width.


File: ecb.info,  Node: ecb-compilation,  Next: ecb-create-layout,  Prev: ecb-layout,  Up: Customizable options

7.3.9 Group ecb-compilation
---------------------------

This group contains settings for the compile window of ECB:

 -- User Option: compilation-buffer-names
     Additional buffer names that should be displayed in the compile-window.
     Buffer names can either be defined as strings or as regexps. If the
     buffer-name of a buffer matches one of the defined string or regexp then
     it will be displayed in the compile-window of ECB even if
     `compilation-buffer-p' says nil for this buffer.

     It is not recommended to add the eshell-buffer-names to this list
     because ECB already handles the eshell-integration as best as possible
     (*note Using eshell::).

     See also the options `ecb-compilation-major-modes' and
     `ecb-compilation-predicates'.

 -- User Option: compilation-major-modes
     Additional major-mode that should be displayed in the compile-window.
     All buffers of a major-mode contained in this list are displayed in the
     compile-window even if `compilation-buffer-p' says nil for such a buffer.

     It is not recommended to add `eshell-mode' to this list because ECB
     already handles the eshell-integration as best as possible (*note Using
     eshell::).

 -- User Option: compilation-predicates
     Predicates when a buffer should be treated as compilation-buffer.  Every
     element of this list has to be a function or lambda-expression which
     gets as argument a buffer-object and which has to return not nil when
     this buffer should be treated as compilation-buffer (even if
     `compilation-buffer-p' says nil) and therefore be displayed in the
     compile-window of ECB (if there is any).

     In combination with the values of `ecb-compilation-buffer-names' and
     `ecb-compilation-major-modes' ECB decides when a buffer is displayed in
     the compile-window.

     Default value is the function `comint-check-proc' which returns not nil
     when the buffer is related to a living process.

 -- User Option: compile-window-height
     Height of the persistent compilation-window of ECB. If you want a
     compilation window shown at the bottom of the ECB-layout then set here
     the height of it (Default is a height of 5). If you redraw the current
     layout with `ecb-redraw-layout' then the compilation window (if any) has
     the height you set here. If the number is less than 1.0 the height is a
     fraction of the frame height.

     If you do not set a persistent compilation window then doing a
     compilation or displaying temp-buffers (e.g. *Help*-buffers) splits
     temporally the edit window vertically if the edit window is not splitted
     already or uses another edit window temporally for compilation output if
     the edit window is already splitted. This is the recommended value for
     this option because this is the standard-behavior of Emacs.

     Beware: If you set a persistent compilation window then ECB displays all
     buffers for which `ecb-compilation-buffer-p' returns not nil in that
     persistent compilation window. If a buffer which should being displayed
     there is not displayed there then try to modify the options
     `ecb-compilation-buffer-names', `ecb-compilation-major-modes' or
     `ecb-compilation-predicates' (in this sequence).

     See also the options `ecb-compile-window-temporally-enlarge' and
     `ecb-enlarged-compilation-window-max-height' and also the command
     `ecb-toggle-compile-window-height'!

     ECB offers the functionality of such a persistent compile-window
     regardless if the special ECB-windows are visible or not (see the
     command `ecb-toggle-ecb-windows').

     Regardless of the settings you define here: If you have destroyed or
     changed the ECB-screen-layout by any action you can always go back to
     this layout with `ecb-redraw-layout'

 -- User Option: compile-window-prevent-shrink-below-height
     Allow the compile-window to be shrunken below its height. A non nil
     value means ECB prevents the compile-window from being shrunken below
     the threshold of `ecb-compile-window-height' by displaying temp-buffers
     (e.g. *Help* etc.) or after running compilations or greps. But
     interactively it is always allowed to shrink it to every height!

     If nil then ECB does nothing to prevent being shrunken below the value
     of `ecb-compile-window-height'.

     Default is t.

 -- User Option: compile-window-temporally-enlarge
     Let Emacs temporally enlarge the compile-window of the ECB-layout.  This
     option has only an effect if `ecb-compile-window-height' is not nil!

     The following values are possible:
        - `after-display': After displaying a "compilation-buffer" (in the
          sense of `ecb-compilation-buffer-p'!) in the compile-window of ECB.
          For the max. height of the enlarged compile-window see the option
          `ecb-enlarged-compilation-window-max-height'.

        - `after-selection': Selecting the `ecb-compile-window' auto.
          enlarges it and de-selecting (means leaving `ecb-compile-window')
          auto. shrinks it. Enlarging and shrinking the `ecb-compile-window'
          is done with `ecb-toggle-compile-window-height'. See also the
          documentation of this function!

        - `both': The combination of 'after-display and 'after-selection.

        - `nil': ECB fixes always the height of the `ecb-compile-window' at
          the value of `ecb-compile-window-height'.

     To restore the ECB-layout after such a buffer-enlarge just call
     `ecb-toggle-compile-window-height' or `ecb-redraw-layout'.

 -- User Option: compile-window-width
     Width of the compile-window.

     Possible values are `frame' and `edit-window'.  With `frame' the
     compile-window looks like:

           -------------------------------------------------------
           |              |                                      |
           |  Directories |                                      |
           |              |                                      |
           |--------------|            edit-window(s)            |
           |              |                                      |
           |  Methods     |                                      |
           |              |                                      |
           -------------------------------------------------------
           |                                                     |
           |                    Compilation                      |
           |                                                     |
           -------------------------------------------------------

     With `edit-window' the compile-window looks like:

           -------------------------------------------------------
           |              |                                      |
           |  Directories |                                      |
           |              |                                      |
           |--------------|            edit-window(s)            |
           |              |                                      |
           |  Methods     |                                      |
           |              |                                      |
           |              |---------------------------------------
           |              |                                      |
           |              |            Compilation               |
           |              |                                      |
           -------------------------------------------------------

     This option takes only effect if `ecb-compile-window-height' is not nil!

 -- User Option: change-layout-preserves-compwin-state
     Changing the layout preserves the state of the compile-window. This is
     for example useful if the user toggles between several layouts (see
     `ecb-toggle-layout') and wants to preserve the hidden-state of the
     compile-window.

 -- User Option: enlarged-compilation-window-max-height
     The max height of the compile-window after enlarging it. The max height
     of the compilation window after enlarged by
     `ecb-toggle-compile-window-height'. The following values are allowed:

     `best':

     ECB fits the height of the compile-window exactly to the size of its
     current contents but never shrinks below the value of
     `ecb-compile-window-height' or enlarges over the half of the
     frame-height of the ECB-frame. The values of the options
     `compilation-window-height' and `temp-buffer-max-height' are taken into
     account dependent of the current `major-mode' of the buffer in the
     compile-window: If `compilation-mode' then `compilation-window-height'
     is used otherwise `temp-buffer-max-height'.

     `half':

     1/2 the frame-height of the ECB-frame

     Any number:

     Max height in lines. If the number is less than 1.0 the height is a
     fraction of the frame height (e.g. 0.33 results in a max-height of 1/3
     the frame-height).

 -- User Option: scroll-other-window-scrolls-compile-window
     `scroll-other-window' scrolls always the compile-window. For all details
     about the scroll-behavior of `scroll-other-window' see the advice
     documentation of `other-window-for-scrolling'.


File: ecb.info,  Node: ecb-create-layout,  Next: ecb-face-options,  Prev: ecb-compilation,  Up: Customizable options

7.3.10 Group ecb-create-layout
------------------------------

This group contains settings for creating new ECB-layouts:

 -- User Option: create-layout-file
     File where all layouts created by `ecb-create-new-layout' are stored.

 -- User Option: ecb-create-layout-frame-height
     Frame height of the layout creation frame.

 -- User Option: ecb-create-layout-frame-width
     Frame width of the layout creation frame.


File: ecb.info,  Node: ecb-face-options,  Next: ecb-faces,  Prev: ecb-create-layout,  Up: Customizable options

7.3.11 Group ecb-face-options
-----------------------------

This group contains settings for all faces used in ECB:

 -- User Option: directories-general-face
     Basic face for the ECB directories buffer. This defines the basic face
     the whole directory buffer should displayed with. If the face
     `ecb-default-general-face' is used then the display of all
     ECB-tree-buffers can be changed by modifying only the face
     `ecb-default-general-face'.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: directory-face
     Face used for highlighting current directory in the directories buffer.
     If the face `ecb-default-highlight-face' is used then the display of all
     ECB-tree-buffers can be changed by modifying only the face
     `ecb-default-highlight-face'.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: directory-not-accessible-face
     Face for not accessible dirs in the directories buffer.

 -- User Option: history-face
     Face used for highlighting current history-entry in the history buffer.
     If the face `ecb-default-highlight-face' is used then the display of all
     ECB-tree-buffers can be changed by modifying only the face
     `ecb-default-highlight-face'.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: history-general-face
     Basic face for the ECB directory buffer. This defines the basic face the
     whole history buffer should displayed with. If the face
     `ecb-default-general-face' is used then the display of all
     ECB-tree-buffers can be changed by modifying only the face
     `ecb-default-general-face'.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: method-face
     Face used for highlighting current method, class or variable in the
     methods buffer. If the face `ecb-default-highlight-face' is used then
     the display of all ECB-tree-buffers can be changed by modifying only the
     face `ecb-default-highlight-face'.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: method-non-semantic-face
     Face used for for displaying tags of sources not supported by semantic.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: methods-general-face
     Basic face for the ECB methods buffer. This defines the basic face the
     whole methods buffer should displayed with. If the face
     `ecb-default-general-face' is used then the display of all
     ECB-tree-buffers can be changed by modifying only the face
     `ecb-default-general-face'.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: source-face
     Face used for highlighting current source in the sources buffer. If the
     face `ecb-default-highlight-face' is used then the display of all
     ECB-tree-buffers can be changed by modifying only the face
     `ecb-default-highlight-face'.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: source-in-directories-buffer-face
     Face for source files in the directories buffer.

 -- User Option: sources-general-face
     Basic face for the ECB sources buffer. This defines the basic face the
     whole sources buffer should displayed with. If the face
     `ecb-default-general-face' is used then the display of all
     ECB-tree-buffers can be changed by modifying only the face
     `ecb-default-general-face'.

     Changes take first effect after finishing and reactivating ECB!

 -- User Option: source-read-only-face
     Face for read-only sources.

 -- User Option: tag-header-face
     Face used for highlighting the tag header after jumping to it by
     clicking onto a node in the methods buffer.


File: ecb.info,  Node: ecb-faces,  Next: ecb-download,  Prev: ecb-face-options,  Up: Customizable options

7.3.12 Group ecb-faces
----------------------

This group contains all faces used in ECB:

`ecb-bucket-node-face:'
     Face which can be used for displaying bucket tags in the methods buffer.
     See also `ecb-bucket-node-display'.

`ecb-default-general-face:'
     Basic face for all ECB tree-buffers.  It's recommended to define here
     the font-family, the font-size, the basic color etc.

     In GNU Emacs 21.X all faces (even the face `ecb-default-highlight-face')
     used in the ECB tree-buffers inherit from this face. Therefore the
     default attributes like font etc. of a face used in a tree-buffer can be
     very easily changed with face `ecb-default-general-face'.

     With XEmacs there is no inheritance-feature but the options
     `ecb-directories-general-face', `ecb-sources-general-face',
     `ecb-methods-general-face' and `ecb-history-general-face' offer the
     choice to use the face `ecb-default-general-face' so also with XEmacs
     the basic face-settings can be easily changed just by customizing the
     face `ecb-default-general-face'!

`ecb-default-highlight-face:'
     Define basic face for highlighting the selected node in an ECB
     tree-buffer.

     In GNU Emacs 21.X all highlighting faces in the ECB tree-buffers inherit
     from this face. Therefore the default attributes like font etc. of a
     face used in a tree-buffer for highlighting the current tag can be very
     easily changed with face `ecb-default-highlight-face'.

     With XEmacs there is no inheritance-feature but the options
     `ecb-directory-face', `ecb-source-face', `ecb-method-face' and
     `ecb-history-face' offer the choice to use the face
     `ecb-default-highlight-face' so also with XEmacs the basic face-settings
     can be easily changed just by customizing the face
     `ecb-default-highlight-face'!

`ecb-directories-general-face:'
     Basic face for the ECB directories buffer. Its recommended to define
     here the font-family, the font-size, the basic color etc.

`ecb-directory-face:'
     Define face used for highlighting current directory in the directories
     buffer.

`ecb-directory-not-accessible-face'
     Define a face for not accessible dirs in the directories buffer.

`ecb-history-face:'
     Define face used for highlighting current history-entry in the history
     buffer.

`ecb-history-general-face:'
     Basic face for the ECB history buffer. Its recommended to define here
     the font-family, the font-size, the basic color etc.

`ecb-method-face:'
     Define face used for highlighting current method, class or variable in
     the methods buffer.

`ecb-methods-general-face:'
     Basic face for the ECB methods buffer. Its recommended to define here
     the font-family, the font-size, the basic color etc.

`ecb-method-non-semantic-face:'
     Define face used for displaying tags of sources not supported by
     semantic.

`ecb-mode-line-data-face'
     Define face for the data in the mode-line. See `ecb-mode-line-data'.

`ecb-mode-line-prefix-face'
     Define face for the prefix in the mode-line. See
     `ecb-mode-line-prefixes'.

`ecb-source-face:'
     Define face used for highlighting current source in the sources buffer.

`ecb-source-in-directories-buffer-face:'
     Define a face for displaying sources in the directories buffer.

`ecb-sources-general-face:'
     Basic face for the ECB sources buffer. Its recommended to define here
     the font-family, the font-size, the basic color etc.

`ecb-source-read-only-face'
     Define a face for read-only sources

`ecb-tag-header-face:'
     Define face used for highlighting the tag header after jumping to it by
     clicking onto a node in the methods buffer.

`ecb-tree-guide-line-face:'
     Define face for the guide-lines in the tree-buffers. See the option
     `ecb-tree-buffer-style' for a explanation of guide-lines.

`ecb-type-tag-class-face:'
     Define face used with option `ecb-type-tag-display'.

`ecb-type-tag-enum-face:'
     Define face used with option `ecb-type-tag-display'.

`ecb-type-tag-group-face:'
     Define face used with option `ecb-type-tag-display'.

`ecb-type-tag-interface-face:'
     Define face used with option `ecb-type-tag-display'.

`ecb-type-tag-struct-face:'
     Define face used with option `ecb-type-tag-display'.

`ecb-type-tag-typedef-face:'
     Define face used with option `ecb-type-tag-display'.

`ecb-type-tag-union-face:'
     Define face used with option `ecb-type-tag-display'.

`ecb-mode-line-win-nr-face'
     Define face for the window-number in the mode-line. See
     `ecb-mode-line-display-window-number'.


Just call `customize-face <face-name>' to customize these faces for your
personal taste. Or customize the related option in the group *Note
ecb-face-options::.


File: ecb.info,  Node: ecb-download,  Next: ecb-help,  Prev: ecb-faces,  Up: Customizable options

7.3.13 Group ecb-download
-------------------------

This group contains settings for downloading and installing a new ECB from
within ECB:

 -- User Option: download-delete-archive
     Should the downloaded archive be deleted after successful installation
     or after failure during the installation-process.  Possible values are:

        - `only-after-success': Archive is only deleted after successful
          installation but not if a failure occurs during the installation
          process.

        - `always': Archive is also deleted if an error occurs.

        - `nil': Archive will never be deleted.

 -- User Option: download-install-parent-dir
     Parent directory where downloaded packages are installed.

     ECB installs a downloaded package in this directory, i.e. the downloaded
     archive X.tar.gz will be extracted in this directory so afterwards this
     directory contains a new subdirectory X which contains the downloaded
     package.

     This directory must be write-able!

 -- User Option: download-package-version-type
     Version type ECB is allowed to download for upgrading.

     If you want to upgrade to a newer ECB-version via `ecb-download-ecb' or
     if you must upgrade to newer semantic- eieio- and/or speedbar-versions
     (because ECB requires these newer versions) then this option specifies
     which version-types are allowed.  ECB checks on the download-sites of
     ECB/semantic/eieio/speedbar which versions are currently available and
     then downloads always the latest version matching the specified type:

        - 2: Get the newest version of all stable versions available.

        - 1: Get the newest version of all stable and beta versions available.

        - 0: Get the newest version of all stable, beta and alpha versions
          available.

        - -1: Ask before downloading in the minibuffer for a version
          (TAB-completion of all available versions is possible).

     So, 2 means stable, 1 means stable and betas, 0 means stable, betas and
     alphas and -1 means ask the user for a version.

     Per default stable and beta-versions are allowed (value 1).

     But all versions must match the restrictions of the specified min- and
     max-versions of the required packages. For this see the file README!

 -- User Option: download-url
     URL where download-able ECB-versions are located. The ECB-archive-file
     (e.g. ecb-1.70.tar.gz) will be appended to this URL and
     `ecb-download-ecb' will try to download this archive.

     Note: Normally this URL should never change but who knows...

 -- User Option: gzip-setup
     Configuration for the gzip-utility. For a description about the possible
     settings see `ecb-wget-setup'.

 -- User Option: tar-setup
     Configuration for the tar-utility. For a description about the possible
     settings see `ecb-wget-setup'.

 -- User Option: wget-setup
     Configuration for the wget-utility. Value is a cons-cell where:

        * car is the name of the wget-executable - if the executable can not
          be found in the PATH then it must be a full path.

        * cdr is the path type of the file-arguments of this binary. Possible
          values are `cygwin', `windows' and `other' whereas the latter one
          is used for all Unix, Linux, Mac OS etc... If `cygwin' is set then
          the cygpath-utility must be in the PATH!


File: ecb.info,  Node: ecb-help,  Next: ecb-eshell,  Prev: ecb-download,  Up: Customizable options

7.3.14 Group ecb-help
---------------------

This group contains settings for the ECB online help:

 -- User Option: help-html-path
     Path where the ECB online help in HTML format resides. This must be the
     location of the `ecb.html' which comes with the ECB distribution. If is
     installed by unpacking the archive available on the ECB website then
     this is the subdir `ecb-help-html-subdir' of the installation directory
     of ECB. If it is installed as XEmacs-package (e.g. via the package
     manager of XEmacs) then this is probably either the directory
     "../../html/" or "../../etc/ecb/html/" (both relative to the Elisp
     directory of ECB).

     The path can either be an absolute path or a path relative to the
     directory where the Elisp files of ECB are.

     Normally there should be no need to change this option!

 -- User Option: help-info-path
     Path where the ECB online help in info format resides. This must be the
     location of the `ecb.info' which comes with the ECB distribution. If is
     installed by unpacking the archive available on the ECB website then
     this is the subdir `ecb-help-info-subdir' of the installation directory
     of ECB. If it is installed as XEmacs-package (e.g. via the package
     manager of XEmacs) then this is probably the directory "../../info/"
     (relative to the Elisp directory of ECB).

     The path can either be an absolute path or a path relative to the
     directory where the Elisp files of ECB are.

     Normally there should be no need to change this option!

 -- User Option: show-help-format
     The format `ecb-show-help' shows its online help. Allowed values are
     'info (for the Info format) and 'html (for HTML format). If the value is
     'html then `browse-url-browser-function' says which browser is used.

     Note: If you got ECB as a standard XEmacs-package maybe the
     HTML-online-documentation is not included.


File: ecb.info,  Node: ecb-eshell,  Next: ecb-speedbar,  Prev: ecb-help,  Up: Customizable options

7.3.15 Group ecb-eshell
-----------------------

This group contains settings for eshell integration within the ECB:

 -- User Option: eshell-auto-activate
     Startup the eshell and display it in the compile-window. If current
     layout does not display a compile-window (see
     `ecb-compile-window-height') then nothing is done.

 -- User Option: eshell-enlarge-when-eshell
     Enlarge the compile-window if it is selected by `eshell'. This takes
     only effect if the command `eshell' is called!

 -- User Option: eshell-fit-window-to-command-output
     Fit the compile-window after an eshell-command to the output. This is
     done by the function `ecb-eshell-fit-window-to-output' which is added to
     `eshell-post-command-hook' ie. which is running autom.  after each
     eshell-command.

 -- User Option: eshell-synchronize
     Synchronize eshell with the default-directory of current source-buffer.
     The synchronization is done by `ecb-eshell-current-buffer-sync' which
     can be called interactively but normally it is called autom. by the
     `ecb-current-buffer-sync-hook-internal'.


File: ecb.info,  Node: ecb-speedbar,  Next: ecb-non-semantic,  Prev: ecb-eshell,  Up: Customizable options

7.3.16 Group ecb-speedbar
-------------------------

 -- User Option: speedbar-before-activate-hook
     Hook running directly before ECB activates the integrated speedbar.

     For example this hook can be used to change the expansion-mode of the
     integrated speedbar via `speedbar-change-initial-expansion-list'.
     Example: (speedbar-change-initial-expansion-list "buffers").


File: ecb.info,  Node: ecb-non-semantic,  Next: ecb-winman,  Prev: ecb-speedbar,  Up: Customizable options

7.3.17 Group ecb-non-semantic
-----------------------------

This group contains settings for parsing and displaying non-semantic files:

 -- User Option: auto-save-before-etags-methods-rebuild
     Automatic saving of current buffer before rebuilding its methods.

     This option is only relevant for sources which are supported and parsed
     by etags (see `ecb-process-non-semantic-files'). Because etags is an
     external tool a source-buffer can only be reparsed if the buffer is
     saved to disk. So the command `ecb-rebuild-methods-buffer' checks for
     sources which are not supported by semantic or imenu if either this
     option is t or if the major-mode of the source-buffer is contained in
     this list: In both cases ECB saves the current source-buffer before it
     re-runs etags for reparsing the source. If nil or if the major-mode is
     not contained then no automatic saving will be done!

     For all source supported by semantic or by imenu this option takes no
     effect.

 -- User Option: non-semantic-exclude-modes
     Exclude modes from parsing with imenu or etags. Per default, ECB tries
     to parse all file-types not supported by semantic with imenu or etags or
     some other method (for details see the option
     `ecb-non-semantic-parsing-function'). If a file-type can not be parsed
     by semantic, imenu or etags than this simply results in an empty
     method-buffer for this file. But nevertheless you will get a message
     "Sorry, no support for a file of that extension" which comes from the
     speedbar-library and can not switched off. Therefore if a `major-mode'
     is known as not parse-able by semantic, imenu or etags it can be added
     to this option and then it will be excluded from being tried to parsed.

 -- User Option: non-semantic-methods-initial-expand
     Initially expand all tags for not by semantic supported sources.  This
     option can be customized on a major-mode basis, i.e. if a `major-mode'
     is contained in this option then all tags for this modes will be
     initially expanded - otherwise not.

 -- User Option: non-semantic-parsing-function
     Define mode-dependent parsing functions for non-semantic files. This is
     an alist where the car is a major-mode symbol and the cdr is a
     function-symbol of a function which should be used for parsing a
     non-semantic buffer, i.h. a buffer for which no semantic grammar exists.
     Such a function gets one argument - the filename of current buffer - and
     has to generate and return a tag/tag list which is understandable by
     `speedbar-insert-generic-list'. speedbar has already included two
     functions `speedbar-fetch-dynamic-imenu' and
     `speedbar-fetch-dynamic-etags' which can be used for parsing buffers
     with imenu rsp. etags.

     This option takes only effect if `ecb-process-non-semantic-files' is not
     nil: Then ECB checks for non-semantic buffers if current `major-mode' is
     contained in this option and if yes, then the specified parsing function
     is called; if not then the cars of the elements of
     `speedbar-dynamic-tags-function-list' are called in that sequence they
     are listed in this variable. See option
     `speedbar-dynamic-tags-function-list' for further details.

     In most cases imenu-parsing is preferable over etags-parsing because
     imenu operates on Emacs-buffers and needs no external tool and therefore
     parsing works also if current contents of a buffer are not saved to
     disk. But maybe sometimes etags may return better parsing results

     IMPORTANT: if imenu-parsing should be used then the option
     `speedbar-use-imenu-flag' must be set to not nil!

 -- User Option: process-non-semantic-files
     Display content of non-semantic-files in the ECB-methods-buffer. See
     also `ecb-non-semantic-parsing-function'.

 -- User Option: rebuild-non-semantic-methods-before-hook
     Hook running at beginning of the function
     `ecb-rebuild-methods-buffer-for-non-semantic'. This function is always
     called by the command `ecb-rebuild-methods-buffer' for not semantic
     supported source-types.

     Every function of this hook gets one argument: The complete filename of
     the current source-buffer in the edit-window. The Method-buffer is only
     rebuild by `ecb-rebuild-methods-buffer-for-non-semantic' if either the
     hook contains no function (the default) or if no function of this hook
     returns nil! See `run-hook-with-args-until-failure' for description how
     these function are processed.


File: ecb.info,  Node: ecb-winman,  Next: ecb-mode-line,  Prev: ecb-non-semantic,  Up: Customizable options

7.3.18 Group ecb-winman
-----------------------

This group contains settings for supporting several window-managers:

 -- User Option: winman-escreen-number
     Number of the escreen which is reserved for ECB. If you go to the
     escreen with this number you go always to the escreen with activated
     ECB. All other escreen-numbers are escreens with deactivated ECB!

 -- User Option: winman-winring-name
     Name of the winring-window-configuration reserved for ECB. If you go to
     the window-configuration with this name you go always to the
     window-configuration with activated ECB. All other window-configuration
     are configurations with deactivated ECB!


File: ecb.info,  Node: ecb-mode-line,  Next: ecb-version-control,  Prev: ecb-winman,  Up: Customizable options

7.3.19 Group ecb-mode-line
--------------------------

This group contains settings for the modelines of the ECB-tree-buffers:

 -- User Option: mode-line-data
     Data shown in the modelines of the special ECB-buffers. Everey element
     of this list is a cons-cell where the car is used to define a
     buffer-name and the cdr to define the modeline-data for that buffer.
     For details about how to defining a buffer-name see
     `ecb-mode-line-prefixes' - its completely the same.

     The cdr is the data for ths modeline and can either be the symbol
     `sel-dir' or `sel-source' whereas the former one displays the current
     selected directory as modeline-data and the latter one the current
     selected source-file (without path).

     In addition to these two predefined values for every special ECB-buffer
     a plain string (which is displayed) or a function can be specified which
     gets three args (name of the buffer, current selected directory and
     current selected source-file) and must return a string which will be
     displayed in the modeline (or nil if no data should be displayed). Such
     a function can add the text-property `help-echo' to the result-string.
     Then this help-string will be displayed when the user moves the mouse
     over this section of the modeline.

     If a special ECB-buffer should not display special data in its modeline
     then this buffer-name should either not being added to this option or
     added with "No data" (= nil as cdr).

     The whole modeline of the special ECB-buffer consists of the prefix of
     `ecb-mode-line-prefixes' and the data of `ecb-mode-line-data' -
     eventually prepended by the window-number, see
     `ecb-mode-line-display-window-number'.

 -- User Option: mode-line-data-face
     Face used for the data in the mode-line. See `ecb-mode-line-data'. For
     XEmacs the face should inherit from the face `modeline' (see
     `set-face-parent')!

 -- User Option: mode-line-display-window-number
     Display in the modeline of every special ECB-window the window-number.
     The left-top-most window in a frame has the window-number 0 and all
     other windows are numbered with increasing numbers in the sequence,
     functions like `other-window' or `next-window' would walk through the
     frame.

     This can be used to jump to windows by number with commands like:

          (defun my-switch-to-window-number (number)
            ``Switch to the nth window''
            (interactive ``P'')
            (if (integerp number)
                (select-window (nth number (window-list)))))

     Currently this feature is only available for GNU Emacs 21.X, because
     neither GNU Emacs < 21 nor XEmacs can evaluate dynamically forms in the
     mode-line.

 -- User Option: mode-line-prefixes
     Prefixes shown in the modelines of the special ECB-buffers. The
     displayed prefix then looks like: "[ <PREFIX>[: ]]", means if a prefix
     is defined for an special ECB-buffer then a single space is prepended
     and if there is additional text to display (e.g. the current directory
     in the sources buffer, see `ecb-mode-line-data') then also the string ":
     " is appended.

     Everey element of this list is a cons-cell where the car is used to
     define a buffer-name and the cdr to define the modeline-prefix for that
     buffer.

     The buffer-name can either be defined as plain string or with a symbol
     which contains the buffer-name as value. The latter one is recommended
     to define a prefix for one of the builtin ECB-tree-buffers because then
     simply the related option-symbol can be used. To add a prefix for the
     builtin directories tree-buffer just set the symbol
     `ecb-directories-buffer-name' as car.

     The cdr is the prefix for a buffer and can either be a string which used
     as it is or a function-symbol which is called with three argument (the
     buffer-name, the current selected directory and the current selected
     source-file) and must return either nil (for no prefix) or a string
     which is then used a prefix. Such a function can add the text-property
     `help-echo' to the result-string. Then this help-string will be
     displayed when the user moves the mouse over this section of the
     modeline.

     If a special ECB-buffer should not have a prefix in its modeline then
     this buffer-name should either not being added to this option or added
     with "No prefix" (= nil as cdr).

 -- User Option: mode-line-prefix-face
     Face used for the prefix in the mode-line. See `ecb-mode-line-prefixes'.
     For XEmacs the face should inherit from the face `modeline' (see
     `set-face-parent')!

 -- User Option: mode-line-win-nr-face
     Face used for the window-number in the mode-line. See
     `ecb-mode-line-display-window-number'. For XEmacs the face should
     inherit from the face `modeline' (see `set-face-parent')!


File: ecb.info,  Node: ecb-version-control,  Prev: ecb-mode-line,  Up: Customizable options

7.3.20 Group ecb-version-control
--------------------------------

This group contains settings for the version-control-support of ECB:

 -- User Option: vc-directory-exclude-regexps
     Which directories should be excluded from VC-state-check. If a directory
     matches any of the regexps of this option the VC-state of its sources
     will not be checked - This option takes only effect if
     `ecb-vc-enable-support' is not nil.

 -- User Option: vc-enable-support
     Enable support for version-control (VC) systems. If on then in the
     directories-buffer (if the value of the option
     `ecb-show-sources-in-directories-buffer' is on for current layout), the
     sources-buffer and the history-buffer all file-items are displayed with
     an appropriate icon in front of the item-name to indicate the VC-state
     of this item. If off then no version-control-state checking is done.

     Because this check can be take some time if files are managed by a not
     local Version-control-server ECB performs this check stealthy (see
     `ecb-stealthy-tasks-delay') so normally there should no
     performance-decrease or additional waiting-time for the user. But to get
     sure this option offers three choices: `t', `unless-remote' and `nil'.
     See the option `ecb-prescan-directories-for-emptyness' for an
     explanation for these three choices.

     The option `ecb-vc-directory-exclude-regexps' offers are more fine
     granularity to exclude the sources of certain directories from the
     VC-state-check.

     See `ecb-vc-supported-backends' and `ecb-vc-state-mapping' how to
     customize the VC-support itself.

 -- User Option: vc-state-mapping
     Mapping between VC-states from the backends and ECB-known VC-states.
     ECB understands the following state-values:

    `up-to-date'
          The working file is unmodified with respect to the latest version on
          the current branch, and not locked.

    `edited'
          The working file has been edited by the user. If locking is used for
          the file, this state means that the current version is locked by the
          calling user.

    `needs-patch'
          The file has not been edited by the user, but there is a more recent
          version on the current branch stored in the master file.

    `needs-merge'
          The file has been edited by the user, and there is also a more
          recent version on the current branch stored in the master file.
          This state can only occur if locking is not used for the file.

    `added'
          The working file has already been added/registered to the VC-system
          but not yet commited.

    `unlocked-changes'
          The current version of the working file is not locked, but the
          working file has been changed with respect to that version. This
          state can only occur for files with locking; it represents an
          erroneous condition that should be resolved by the user.

    `ignored'
          The version-control-system ignores this file (e.g. because included
          in a .cvsignore-file in case of CVS).

    `unknown'
          The state of the file can not be retrieved; probably the file is not
          under a version-control-system.


     All state-values a check-vc-state-function of
     `ecb-vc-supported-backends' can return must have a mapping to one of the
     ECB-state-values listed above. If for a certain backend-VC-state no
     mapping can be found then per default 'edited is assumed!

     The default value of this option maps already the possible returned
     state-values of `vc-state' and `vc-recompute-state' (both GNU Emacs) and
     `vc-cvs-status' (Xemacs) to the ECB-VC-state-values.

 -- User Option: vc-supported-backends
     Define how to to identify the VC-backend and how to check the state.
     The value of this option is a list containing cons-cells where the car
     is a function which is called to identify the VC-backend for a DIRECTORY
     and the cdr is a function which is called to check the VC-state of the
     FILEs contained in DIRECTORY.

     Identify-backend-function: It gets a full directory-name as argument -
     always without ending slash (rsp. backslash for native Windows-XEmacs) -
     and has to return a unique symbol for the VC-backend which manages that
     directory (e.g. 'CVS for the CVS-system or 'RCS for the RCS-system) or
     nil if the file is not managed by a version-control-system.

     Check-vc-state-function: It gets a full filename (ie. incl. the complete
     directory-part) and has to return a symbol which indicates the VC-state
     of that file. The possible returned values of such a
     check-vc-state-function have to be mapped with `ecb-vc-state-mapping' to
     the allowed ECB-VC-state values.

     ECB runs for a certain DIRECTORY all identify-backend-functions in that
     order they are listed in this option. For the first which returns a
     value unequal nil the associated check-state-function is used to
     retrieve the VC-state of all sourcefiles in that DIRECTORY.

     There is no need for the identify-backend-function or the
     check-vc-state-function to cache any state because ECB automatically
     caches internally all necessary informations for directories and files
     for best possible performance.

     To prepend ECB from checking the VC-state for any file set
     `ecb-vc-enable-support' to nil.

     Default value for GNU Emacs: Support for CVS, RCS, SCCS and Subversion
     (for the later one the most recent version of the VC-package incl. the
     vc-svn library is needed) is added per default. To identify the
     VC-backend the functions `ecb-vc-managed-by-CVS',
     `ecb-vc-managed-by-RCS' rsp. `ecb-vc-managed-by-SCCS' rsp.
     `ecb-vc-managed-by-SVN' are used. For all three backends the function
     `ecb-vc-state' of the VC-package is used.

     Default value for XEmacs: XEmacs contains only a quite outdated
     VC-package, especially there is no backend-independent
     check-vc-state-function available (like `vc-state' for GNU Emacs). Only
     for CVS a check-vc-state-function is available: `vc-cvs-status'.
     Therefore ECB adds per default only support for CVS and uses
     `ecb-vc-managed-by-CVS' rsp. `vc-cvs-status'.

     Example for GNU Emacs: If `vc-recompute-state' (to get real state-values
     not only heuristic ones) should be used to check the state for
     CVS-managed files and `vc-state' for all other backends then an element
     (ecb-vc-dir-managed-by-CVS . vc-recompute-state) should be added at the
     beginning of this option.

 -- User Option: vc-xemacs-exclude-remote-cvs-repository
     Exclude directories with a remote cvs-repository from VC-check. This
     option takes only effect for XEmacs and is needed cause of the outdated
     VC-package of XEmacs which offers no heuristic state-checking and also
     no option `vc-cvs-stay-local'. So this option takes only effect if
     `vc-cvs-stay-local' is not avaiable. In this case ECB treats directories
     which are managed by CVS but have a remote repository as if the
     directory would be not managed by CVS (so the files are not checked for
     their VC-state). This si done to avoid blocking XEmacs when running full
     cvs-commands (e.g. "cvs status") over the net.

     Note: When ECB can find the option `vc-cvs-stay-local' then this option
     will automatically take no effect regardless which Emacs-version is used.


File: ecb.info,  Node: Submitting problem report,  Next: Upgrading,  Prev: Customizing,  Up: Top

8 Submitting a problem report
*****************************

If you run into problems with ECB you should first take a look into

   - *Note FAQ:: or

   - *Note Conflicts and bugs:: or

   - *Note Tips and tricks:: or

   - the appropriate section of this online-manual.

If your problem(s) still remain you can/should send a problem report to the
ECB mailing list <ecb-list@lists.sourceforge.net>. ECB offers you a command
which does all necessary for you to send a problem report. Just call
`ecb-submit-problem-report'! Please read the documentation of this command,
see *Note Interactive ECB commands::.

*IMPORTANT*: Cause of extra appearance of SPAM in the mailing-lists,
SourceForge has changed its policy: Now it is only possible to post to the
mailing-list for users who have subscribed this mailing-list. So please be
aware you will not be able to send comments, bug reports and improvement
suggestions before you have subscribed the ECB-mailing-list. See the section
"Mailing-list" at the ECB-website at `http://ecb.sourceforge.net' how to do
this.

If you think there are problems concerning parsing-results for certain
sources supported by semantic then you should call
`ecb-dump-semantic-toplevel' for the problematic source-buffer *BEFORE* you
call `ecb-submit-problem-report' because this "dump"-command generates for
the current-buffer a new buffer with name "*ecb-tag-dump*" which contains all
semantic-tags for this source. The contents of this "*ecb-tag-dump*" will
then autom. be added to the problem-report generated by
`ecb-submit-problem-report'!

This command creates a problem-report buffer for you. After that you get a
menu "Mail" (dependent on the mail-package used, the menu can have a
different name) with commands to send the problem report. But for this the
variable `mail-user-agent' must be configured right for your system. If you
cant get working this mechanism you can simply copy the whole problem-report
buffer after filling it out and sending it with your standard mail-client to
<ecb-list@lists.sourceforge.net>!

Please read also the documentation of the option `ecb-debug-mode' and switch
on the debug mode of ECB (also available in the Help-menu of ECB!) before
submitting a problem-report!


File: ecb.info,  Node: Upgrading,  Next: Tips and tricks,  Prev: Submitting problem report,  Up: Top

9 Upgrading and downloading packages
************************************

This chapter describes all aspects of upgrading to a newer version of ECB.

The first section describes how to download and install a new package from
the web, where "package" means either ECB itself or the required libraries
semantic, eieio and speedbar.

After installing a new ECB-version ECB checks if the values of the customized
ECB-options are still compatible. If not ECB does some smart things. This is
the topic of the second section.

* Menu:

* Downloading new versions::    How to download newer versions of packages
* Auto. option-upgrading::      ECB can auto. upgrade your options


File: ecb.info,  Node: Downloading new versions,  Next: Auto. option-upgrading,  Prev: Upgrading,  Up: Upgrading

9.1 Downloading new versions of ECB and/or required packages
============================================================

ECB offers the possibility to upgrade to newer versions direct from the
ECB-website. This can be done if the following requirements are satisfied:

  1. A connection to the web is available

  2. The tools "wget", "tar" and "gzip" are installed

     With Unix-systems these tools are in the standard-distribution. If you
     are running any Microsoft Windows system then you need cygwin(1) which
     offers these tools too. On every system these tools must reside in the
     `PATH' environment-variable!

     If you are behind a firewall and you have to use a proxy you maybe need
     the following wget-configuration in your file `~/.wgetrc':

        # Define your proxies (where 8080 and 8081 are examples
        # for the port-numbers)
        http_proxy = http://your.proxy.com:8080
        ftp_proxy  = http://your.ftpproxy.com:8081

        # If you do not want to use proxy at all, set this to off.
        use_proxy = on

If these requirements are satisfied you can download and install both ECB
itself and also the required versions of semantic, eieio and speedbar:

   * Download a new ECB-version with `ecb-download-ecb':

     A description for this command you will find in *Note Interactive ECB
     commands::. Check also the options of the customize-group 'ecb-download'
     (*note ecb-download::).

   * Download and install of required packages:

     ECB checks at load-time if the packages semantic, eieio and speedbar are
     at least installed and at start-time if the required versions of
     semantic, eieio and speedbar (see `README') are installed and loaded
     into Emacs. If not you will be asked if you want auto. download and
     install them. If you confirm this then ECB does the following:

       1. Checking which versions are available at the download-site of the
          required packages. With the option
          `ecb-download-package-version-type' you can specify which type of
          versions (only stable, stable and betas or stable, betas and alphas)
          you allow to download and install. This option offers also the
          choice of asking you for a certain version. Depending on this
          setting ECB either ask you which version it should download and
          install or chooses autom. the newest version available which is
          matching both its min-max-requirements and the setting in
          `ecb-download-package-version-type'.

          NOTE: Currently there are only beta-versions of speedbar available
          therefore this option has to be set to 1 (allow stable and beta
          versions). But the speedbar beta-versions are very stable!

       2. Downloading and installing the right version (see 1.) of the
          required packages. ECB downloads and installs the new package
          versions in subdirectories of `ecb-download-install-parent-dir'.

     If both of these actions succeed then you will get a message-buffer
     which tells you something like:

        -----------------------------------------------------------------
        Current state of the required packages semantic, eieio, speedbar:

        - semantic author-version must be [1.4, 1.4.9]:
          Installed in /usr/local/lib/site-lisp/semantic-1.4

        - eieio author-version must be [0.17, 0.17.9]:
          Correct version already loaded!

        - speedbar author-version must be [0.14beta1, 0.15.9]:
          Correct version already loaded!

        After adding the new directory to your `load-path' and then
        restarting Emacs the new package(s) can be activated.
        -----------------------------------------------------------------

     *Remark 1*: "P author-version must be [x y]" means, that ECB requires
     package P in a version-number >= x and <= y.

     *Remark 2*: By setting the option `ecb-version-check' to `nil' you can
     prevent ECB from checking correct versions of semantic, eieio and
     speedbar but it's strongly recommended not to do this!

---------- Footnotes ----------

(1) cygwin is available at `http://cygwin.com/'


File: ecb.info,  Node: Auto. option-upgrading,  Prev: Downloading new versions,  Up: Upgrading

9.2 Automatic upgrading of options
==================================

* Menu:

* User interface::              Options and commands you should know
* Background information::      Maybe some interesting informations


File: ecb.info,  Node: User interface,  Next: Background information,  Prev: Auto. option-upgrading,  Up: Auto. option-upgrading

9.2.1 User interface for option-upgrading
-----------------------------------------

There are two interactive commands (*note Interactive ECB commands::):

   - `ecb-upgrade-options': Does all necessary beginning with a
     incompatibility-check for all options, upgrading/resetting incompatible
     options and ending with the display of all upgraded or reset options.

   - `ecb-display-upgraded-options': Displays an information-buffer which
     options have been upgraded or reset. Offers two buttons where the user
     can decide if the upgraded options should also being saved by ECB for
     future settings or if the buffer should be killed.

If the option `ecb-auto-compatibility-check' has a non-nil value (which is
the default) then ECB does all this stuff automatically at startup. This is
very recommended!

If you are interested in some background information, read *Note Background
information::!


File: ecb.info,  Node: Background information,  Prev: User interface,  Up: Auto. option-upgrading

9.2.2 Background information
----------------------------

Big packages like ECB will be enhanced and developed continuously so
sometimes a new version must be released. Such packages offer in general a
lot of customizable options so probably some of these options change the type
or are renamed because the old type and/or name of the option makes no sense
in the new release.

Especially options which have changed the type of their value are now a
problem for the user which want to upgrade to the latest ECB-version: If the
user has saved a certain value for option X in its file `.emacs' but the type
of this saved value doesn't match the new defined type in the defcustom-form
after an ECB-upgrade then there can occur serious problems like ECB can not
be started anymore or even Emacs can not be started without errors.

Until now there was only one way to fix these problems: The user must
manually edit his file `.emacs' and remove all entries for options which have
now another type. After this and after restarting Emacs the new
default-values of the type-changed options in the new ECB-release are active
and the user can go on using Emacs and ECB. But this approach to fix the
incompatible-option-problem has two serious drawbacks:

  1. The user must manually edit the customize-section in his file `.emacs'.
     This should normally not be done and if then only by old-handed
     Emacs-users.

  2. The customized value of the option X in the old-release (with the old
     type) is lost because after removing the related entry from the file
     `.emacs' the new default-value is active, so the user must re-customize
     the option X.

OK, this is one half of the option-upgrade-problem but a new ECB-release can
also rename a option from name X to name Y because the new name Y makes much
more sense and/or is more mnemonic. If only the name has changed but not the
type this is not a serious problem like above but also annoying because the
customized value of the old-option X takes no effect in the new release but
instead the default-value of the new-option Y is now active.  But
nevertheless this problem has the drawback number 2 (see above).

The last category of upgrade-problems is a renamed option which has also
changed its type.

ECB has a solution for all these problems:

   * It checks all customized values of all ECB-options if they are still
     type-compatible. If not then it tries to upgrade the old-value to the
     new value-type and if this is not possible then it resets the option to
     the new default value and offers then to store it via customize in the
     .emacs-file (or in any file which is used for customized options).  But
     ECB does not touch any customization-file without asking the user!

   * It offers a special constant `ecb-upgradable-option-alist' which allows
     the ECB-maintainers to define special transformings for renamed options
     so even the value of an old-option X can be savely transformed to the
     new-option Y and the old setting is not lost.

All these checks and transformings are done at beginning of activating ECB -
if the option `ecb-auto-compatibility-check' is not nil. If ECB has
recognized incompatible or renamed options it does its upgrading/reseting-job
so all ECB-options have correct types so ECB can start correct. After ECB is
started it displays a list of all upgraded or reseted option with their old
and new values.


File: ecb.info,  Node: Tips and tricks,  Next: Elisp programming,  Prev: Upgrading,  Up: Top

10 Tips and tricks
******************

This chapter contains some tips and tricks how to deal best with some
situations.

* Menu:

* Changing faces::              Changing faces in the ECB tree-buffers
* Small screens::               Working with small screens
* Big screens::                 Working with big screens
* Simulating speedbar::         Simulating speedbar without an extra frame
* Integrating speedbar::        Integrating speedbar in the ECB-frame
* Large directories::           Working with large directories
* Remote directories::          Working with remote directories
* Version-control support::     Supporting Version control systems
* Using eshell::                Optimal using of eshell in ECB
* Grepping directories::        Grepping directories with ECB
* Working with JDEE::           Working best with ECB and JDEE
* Compile-window on demand::    Displaying the compile-window on demand
* Non-semantic sources::        Parsing and displaying non-semantic sources
* Hide-show::                   Using hide-show from the methods-buffer-menu
* Window-managers and ECB::     Support of several Emacs-window-managers
* Using semanticdb::            Using semanticdb for going to external nodes


File: ecb.info,  Node: Changing faces,  Next: Small screens,  Prev: Tips and tricks,  Up: Tips and tricks

10.1 Changing faces in the ECB tree-buffers
===========================================

There are two basic faces:

   * `ecb-default-general-face': Basic face for displaying an ECB-tree-buffer.

     Its recommended to define the font-family, the font-size, the basic
     color etc. with this face.

     In GNU Emacs 21.X all faces (even the face `ecb-default-highlight-face')
     used in the ECB tree-buffers inherit from this face. Therefore the
     default attributes like font etc. of a face used in a tree-buffer can be
     very easily changed with face `ecb-default-general-face'.

     With XEmacs there is no inheritance-feature but the options
     `ecb-directories-general-face', `ecb-sources-general-face',
     `ecb-methods-general-face' and `ecb-history-general-face' offer the
     choice to use the face `ecb-default-general-face' so also with XEmacs
     the basic face-settings can be easily changed just by customizing the
     face `ecb-default-general-face'.

   * `ecb-default-highlight-face': Basic face for highlighting the current
     node in an ECB-tree-buffer.

     In GNU Emacs 21.X all highlighting faces used in the ECB tree-buffers
     inherit from this face. Therefore the default attributes like font etc.
     of a highlighting face used in a tree-buffer can be very easily changed
     with face `ecb-default-highlight-face'.

     With XEmacs there is no inheritance-feature but the options
     `ecb-directory-face', `ecb-source-face', `ecb-method-face' and
     `ecb-history-face' offer the choice to use the face
     `ecb-default-highlight-face' so also with XEmacs the basic face-settings
     can be easily changed just by customizing the face
     `ecb-default-highlight-face'.


With these faces you can change the basic attributes easily and fast for ALL
ECB-tree-buffers. But you are also able to display each ECB-tree-buffer with
different faces, see the different options for every tree-buffer mentioned
above.

*Please note* (only for XEmacs users): Cause of the lack of the
font-inheritance feature using ONE other font for the ECB-methods buffer can
NOT be achieved just by setting `ecb-methods-general-face' to
`ecb-default-general-face' and changing the font of this default face. In
addition you have to set the same font also for the face
`ecb-bucket-node-face' like in the following example:

   (defconst my-ecb-font
             "-outline-Courier-normal-normal-13-97-96-96-c-*-iso8859-1")
   (set-face-font 'ecb-default-general-face my-ecb-font)
   (set-face-font 'ecb-bucket-node-face my-ecb-font)

This code sets the new defined font `my-ecb-font' as font for all(1)
ECB-tree-buffers (incl. the methods buffer).

---------- Footnotes ----------

(1) Of course `ecb-directories-general-face', `ecb-sources-general-face',
`ecb-methods-general-face' and `ecb-history-general-face' must be set to
`ecb-default-general-face'!


File: ecb.info,  Node: Small screens,  Next: Big screens,  Prev: Changing faces,  Up: Tips and tricks

10.2 Working with small screens
===============================

If your screen is very small so you need every square-centimeter for
displaying the buffer which you want to edit, ECB offers you a special
layouts, where only the ECB-methods buffer is displayed on top or on
left-side. Here comes what you should/can do to work best with ECB in such a
situation:

   * First customize your ECB:

       1. Customize `ecb-layout-name' to layout-name "top2" (on top) or
          "left9" (on left-side)

       2. Ensure that `ecb-compile-window-height' is nil.

       3. Optional: Adjust the `ecb-windows-height' rsp. `ecb-windows-width'.

       4. Save your changes.

   * To edit your buffers: Call `ecb-toggle-ecb-windows' (also available via
     the menu "ECB" and by `C-c . lw') or `ecb-hide-ecb-windows' to hide the
     ECB-method buffer so you get all the place of your screen for editing.

   * To browse and select functions: Call `ecb-toggle-ecb-windows' or
     `ecb-show-ecb-windows' to make the ECB-method buffer visible if not
     already. If you want select a method/variable with the keyboard instead
     with the mouse you should read the section *Note Using the keyboard:: in
     this online help!

The possibility of hiding temporally the ECB windows like described above is
also useful for all the other layouts.


File: ecb.info,  Node: Big screens,  Next: Simulating speedbar,  Prev: Small screens,  Up: Tips and tricks

10.3 Working with big screens
=============================

ECB offers a layout type "left-right" with special ECB-tree-windows on the
left and right side of the edit-area. The layouts "leftright1" and
"leftright2"are examples for this layout type.  See *Note Creating a new
ECB-layout:: and *Note The layout-engine:: for details about how to create or
program more layouts of this type.

Such a layout is eventually the best choice for big screens because the
several ECB-tree-windows are bigger and can display more informations without
scrolling.

With such a layout it can could be senseful to reduce the value of the option
`ecb-windows-width' compared to layouts of type left or right. A value of
max. 0.25 should be enough.


File: ecb.info,  Node: Simulating speedbar,  Next: Integrating speedbar,  Prev: Big screens,  Up: Tips and tricks

10.4 Simulating speedbar without an extra frame
===============================================

You can simulate a speedbar-like layout within ONE frame by doing the
following:

  1. Customize `ecb-layout-name' to layout name "left9", "left12", "left13"
     or "left14" dependent to what you like.

  2. Optional: Ensure that `ecb-compile-window-height' is nil.

  3. Optional: Adjust the `ecb-windows-width'.

  4. Optional: Customize `ecb-toggle-layout-sequence' and toggle very fast
     between several layouts by `ecb-toggle-layout'. See the doc-strings!

  5. Optional: Customize `ecb-show-sources-in-directories-buffer' to not nil
     if the chosen layout (see 1. and 4.) contains a directories-tree-buffer.

  6. Save your changes.

But not only simulating speedbar is possible but also full integrating it
into the ECB and the ECB-frame, *Note Integrating speedbar::.


File: ecb.info,  Node: Integrating speedbar,  Next: Large directories,  Prev: Simulating speedbar,  Up: Tips and tricks

10.5 Integrating speedbar in the ECB-frame
==========================================

It is very easy to integrate speedbar into ECB. There are two different ways
to do this:

  1. You can either use speedbar in the directories-, sources- or
     methods-window of ECB instead of the built-in directory-, sources- or
     methods-browser of ECB. This can be done via the option
     `ecb-use-speedbar-instead-native-tree-buffer'.

  2. Or you can integrate an extra speedbar-window into a layout independent
     of the existence of a directory-, sources- or methods-window. For this
     you can either use the built-in layout "left-dir-plus-speedbar" or you
     have to create your own layout interactively with the command
     `ecb-create-new-layout'. This way is not described in more details
     because there is nothing more to describe - just create your layout.

In general integrating speedbar into the ECB-frame makes sense for people...

   * ...who like the speedbar way of handling directories and source-files
     but also like the ECB-way of displaying the buffer-contents (like
     methods and variables in a source-file). This people should use the
     option `ecb-use-speedbar-instead-native-tree-buffer' and set it to `dir'.

   * ...who like the speedbar way of browsing things like directories, files,
     file-contents etc. but who dislike the extra speedbar-frame.

Note: It is not necessary to integrate speedbar if you only want parsing
sources not supported by semantic. From version 1.94 on ECB supports native
parsing and displaying of such sources (*note Non-semantic sources::)!

Regardless the group you belong, with the speedbar-integration feature of ECB
you can combine both worlds, the speedbar- and the ECB-world:

  1. Choose a layout which either contains a directories- or a sources-window
     but not both of them(1).

     Because speedbar has also display-modes for buffers and info-nodes and
     some other useful things (which can be changed by the speedbar-command
     `speedbar-change-initial-expansion-list' we recommend layouts like
     "left15" or "leftright3" for using with speedbar.

  2. Set the option `ecb-use-speedbar-instead-native-tree-buffer' to not nil.
     After this the chosen window of ECB will contain a full featured speedbar
     (the only difference to standard speedbar is not residing in an extra
     frame).

Note: If you belong to the first group of people (s.a.) a similar effect and
usability is available by setting
`ecb-use-speedbar-instead-native-tree-buffer' to nil and setting
`ecb-show-sources-in-directories-buffer' to not nil, because this combination
displays also directories and sources in one window.

So with the option `ecb-use-speedbar-instead-native-tree-buffer' you have the
choice which way of displaying and handling "things" (directories, sources,
methods...) you want (the speedbar- or the ECB-way).

During speedbar is running within ECB (i.e.
`ecb-use-speedbar-instead-native-tree-buffer' is not nil) the
speedbar-command `speedbar' is disabled and the speedbar-command
`speedbar-get-focus' switches between the speedbar-window and the
edit-window(2).

*IMPORTANT*: ECB can only integrate speedbar-versions >= 0.14beta1! If you
use lower versions of speedbar `ecb-use-speedbar-instead-native-tree-buffer'
has no effect.

---------- Footnotes ----------

(1) Only one of them is needed if you use speedbar because speedbar displays
directories and sources in one window. But if you like wasting space then you
can also use a layout with both windows...

(2) The standard behavior is switching between the speedbar-frame and the
attached frame, but this make obviously no sense during running speedbar with
ECB.


File: ecb.info,  Node: Large directories,  Next: Remote directories,  Prev: Integrating speedbar,  Up: Tips and tricks

10.6 Working with large directories
===================================

If `ecb-source-path' contains directories with many files and subdirs,
especially if these directories are mounted net-drives ("many" means here
something > 500, dependent on the speed of the net-connection and the
machine), actualizing the sources- and/or directories- buffer of ECB (if
displayed in current layout!) can slow down dramatically. If this is a
problem the contents of certain directories and also the contents of the
sources-buffer can be cached which increases the speed a lot. See the option
`ecb-cache-directory-contents'.

IMPORTANT: The full speed-advantage of this cache-mechanism is only available
if `ecb-show-sources-in-directories-buffer' is `nil', i.e. sources of a
directory are displayed in the ECB-sources-window. The reason is that only
with a sources window the tree-buffer contents for the sources can be cached
(i.e. the buffer-content of the ECB-sources-window) whereas with sources
displayed in the directories buffer only the disk-contents of a directory are
cached - which increases speed too but not so much as with sources displayed
in the extra window ECB-sources.

The cache of a directory can be only refreshed by a POWER-click (with mouse
or keyboard) onto the related directory-node in the directories-buffer of ECB
(*note Using the mouse::).

See also the option `ecb-cache-directory-contents-not'. Here are some useful
settings for both of these options:

   * Cache all directories with more than 500 entries: Set
     `ecb-cache-directory-contents' to ((".*" . 500)) and set
     `ecb-cache-directory-contents-not' to nil.

   * Cache only all directories > 200 beginning with /usr/ Set
     `ecb-cache-directory-contents' to (("^/usr/.*" . 200)) and set
     `ecb-cache-directory-contents-not' to nil.

   * Cache all directories > 500 but NOT these beginning with /usr/: Set
     `ecb-cache-directory-contents' to ((".*" . 500)) and set
     `ecb-cache-directory-contents-not' to ("^/usr/.*").

Another way for getting a faster overlook for large directories with many
source-entries is to apply an online-filter to the sources-buffer. This can
be done via the command `ecb-sources-filter' or via the popup-menu of the
sources-buffer.


File: ecb.info,  Node: Remote directories,  Next: Version-control support,  Prev: Large directories,  Up: Tips and tricks

10.7 Working with remote directories
====================================

The term "remote" means directories which are remote in the sense of
TRAMP(1), ANGE-FTP(2) or EFS(3). Each of these Emacs-addons is intended to
make editing directories and files on remote machines as transparent as
possible.

10.7.1 General remarks
----------------------

ECB supports such remote directoires out of the box and completely
transparently, i.e. you can add remote directories to the option
`ecb-source-path' without any restriction. ECB will handle these directories
transparently with the appropriate tool - either TRAMP, ANGE-FTP or EFS. So
when  working with such a remote directory is possible without ECB it will be
possible too with active ECB - at least as long you are "connected"!

*Caution*: Suppose you have added a remote dir (e.g.
"user@host.at.a.server:/dir/") to `ecb-source-path' and you start ECB when
you are offline, means there can be no connection established to the remote
computer (e.g. "host.at.a.server"). Each time ECB has to process a remote
path ECB pings via the ping-program the remote host (in the example above it
would ping the host "host.at.a.server") to test if it is accessible. If not
then this path will be ignored by ECB(4). Ensure that ECB calls your
ping-program (see `ecb-ping-program') with the right options (see
`ecb-ping-options'). To avoid to many pings to the same host ECB caches the
ping result so there should be no performance decrease. But to ensure still
correct accessible-results and to avoid using outdated cache-results ECB
discards the cached value of the accessible-state of a certain host after a
customizable time-interval (please read the documentation of
`ecb-host-accessible-check-valid-time'!).

10.7.2 Excluding remote directories from time-consuming tasks
-------------------------------------------------------------

ECB performs some tasks stealthily and interruptable by the user (see the
option `ecb-stealthy-tasks-delay' for additional explanations) because these
tasks are time-consuming and could otherwise ECB block. Especially for remote
directories these special tasks can cause annoying blocks of Emacs (*note
Stealthy background tasks::).

Therefore it is probably the best to switch on each of the stealthy tasks
with the `unless-remote' which is the default activation (*note Stealthy
background tasks::). So a certain stealthy task will be swtiched on for all
local directories (and also for all mounted drives in the LAN) but not for
real remote directories used via TRAMP, ANGE-FTP or EFS.

10.7.3 Caching the contents of remote directories
-------------------------------------------------

ECB caches per default the contents of remote directories to avoid annoying
delays. The cache is done via the option `ecb-cache-directory-contents' which
contains an entry which covers the syntax of remote directories. If you do
not want this caching (which is strongly recommened) you have to remove this
entry from this option.

---------- Footnotes ----------

(1) TRAMP stands for 'Transparent Remote (file) Access, Multiple Protocol'.
This package provides remote file editing, similar to ANGE-FTP.

(2) This package attempts to make accessing files and directories using FTP
from within Emacs as simple and transparent as possible.

(3) A system for transparent file-transfer between remote hosts using the FTP
protocol within Emacs

(4) This avoids long lasting and annoying blocking of ECB when a remote-path
is not accessible: Without a ping ECB would always try to open this directory
through the appropriate library (e.g. TRAMP) and it would depend on the
timeout-mechanism of this library (e.g. TRAMP has 60 seconds) how long ECB
would be blocked. First after this timeout ECB could start working! A fast
"pre"-ping avoids this problem!


File: ecb.info,  Node: Version-control support,  Next: Using eshell,  Prev: Remote directories,  Up: Tips and tricks

10.8 Supporting Version control systems
=======================================

Beginning with version 2.30 ECB supports Version-control systems (in the
following named VC-systems). This means the special tree-buffers of ECB
display files managed by a VC-system with an appropriate image-icon(1) in
front of the filename.

The following four options allow full control over this feature (see also
*Note ecb-version-control:::

`ecb-vc-enable-support'
     Enable or disable this feature.

`ecb-vc-supported-backends'
     The most important option for this feature. Allows to specify how ECB
     should test if a directory is managed by a VC-system (how to identify
     the VC-backend of a directory) and - if yes - how it should check the
     VC-state of a certain file. The former ones are called
     "identify-backend-functions" and the latter ones "check-state-functions".

`ecb-vc-directory-exclude-regexps'
     Allows excluding certain directories (on a regexp-basis) from the
     VC-support even if they are managed by a VC-system.

`ecb-vc-state-mapping'
     Defines the mapping between the state-values returned by a
     check-state-function (a function set in `ecb-vc-supported-backends' and
     used for getting the VC-state of a file, e.g. `vc-state') and the
     allowed state-values ECB can understand.

Probably the default settings will fit your needs but to get sure you should
carefully read the documentation of these options!

The following subsection give you important informations about
identify-backend-functions, check-state-functions, about working with remote
repositories.

* Menu:

* Identifying backends::        How ECB identifies the VC-backend of a dir
* Checking the state::          How ECB checks the VC-state of a file
* Remote repositories::         What you should know about this
* Refreshing the VC-state::     How to refresh when state changed outside
* Adding new backends::         Necessary steps for adding new backends
* Known VC-problems::           Currently known problems of the VC-support

---------- Footnotes ----------

(1) Of course only when Emacs is capable to display images; otherwise a
suitable ascii-icon will be displayed.


File: ecb.info,  Node: Identifying backends,  Next: Checking the state,  Prev: Version-control support,  Up: Version-control support

10.8.1 How ECB identifies the VC-backend of a dir
-------------------------------------------------

ECB tries all functions added as identify-backend-funtions to the option
`ecb-vc-supported-backends' until one of them returns not `nil' but a symbol
which identifies the backend (e.g.  `CVS'). After this check ECB stores the
result of this check (i.e. either the identified backend or the fact that the
directory is not managed by a VC-system) for that directory in a special
cache, so the identify-backend-process will be performed only once per
directory. If for a directory a VC-backend could be identified ECB stores not
only the backend itself for that directory but also the associated
check-state-function defined in `ecb-vc-supported-backends' (*note Checking
the state::).

You can add arbitrary functions to this options as long as they get one
directory-argument and return either nil or a backend-symbol. Per default ECB
offers the following functions to identify the VC-backend CVS, RCS, SCCS or
Subversion(1):

`ecb-vc-dir-managed-by-CVS DIRECTORY'
     Return `CVS' if DIRECTORY is managed by CVS. nil if not.

     This function tries to be as smart as possible: First it checks if
     DIRECTORY is managed by CVS by checking if there is a subdir `CVS'. If
     no then nil is returned. If yes then for GNU Emacs it takes into account
     the value of `vc-cvs-stay-local': If t then just return `CVS'. Otherwise
     ECB checks the root repository if it is a remote repository. If not just
     `CVS' is returned. If a remote repository it checks if the value of
     `vc-cvs-stay-local' is a string and matches the host of that repository.
     If yes then just `CVS' is returned. If not then ECB checks if that host
     is currently accessible by performing a ping. If accessible `CVS' is
     returned otherwise nil. This has the advantage that ECB will not be
     blocked by trying to get the state from a remote repository while the
     host is not accessible (e.g. because the user works offline).

     Special remark for XEmacs: XEmacs has a quite outdated VC-package which
     has no option `vc-cvs-stay-local' so the user can not work with remote
     CVS-repositories if working offline for example. So if there is no
     option `vc-cvs-stay-local' then ECB performs always the repository check
     mentioned above.

`ecb-vc-dir-managed-by-RCS DIRECTORY'
     Return `RCS' if DIRECTORY is managed by RCS. nil if not.

`ecb-vc-dir-managed-by-SCCS DIRECTORY'
     Return `SCCS' if DIRECTORY is managed by SCCS. nil if not.

`ecb-vc-dir-managed-by-SVN DIRECTORY'
     Return `SVN' if DIRECTORY is managed by Subversion. nil if not.  Returns
     always nil if the library vc-svn.el can not be found.


If ECB should support another VC-backend than CVS, RCS, SCCS or Subversion
you have to write your own identify-backend-funtion for the used VC-backend
(e.g. Clearcase)!

10.8.1.1 Special remarks for XEmacs
...................................

XEmacs contains only a quite outdated VC-package, especially there is no
backend-independent check-vc-state-function available (like `vc-state' for
GNU Emacs). Only for CVS a check-vc-state-function is available:
`vc-cvs-status'. Therefore ECB adds per default only support for CVS and uses
`ecb-vc-managed-by-CVS' rsp.  `vc-cvs-status'. See also *Note Known
VC-problems::!

---------- Footnotes ----------

(1) For this the most recent version of the VC-package (incl. the library
vc-svn.el) is needed - as contained in CVS Emacs


File: ecb.info,  Node: Checking the state,  Next: Remote repositories,  Prev: Identifying backends,  Up: Version-control support

10.8.2 How ECB checks the VC-state of a file
--------------------------------------------

After ECB has identified the VC-backend of a directory it will display the
VC-state (e.g. up-to-date, edited, needs-mergs etc...) with a suitable
image-icon in the tree-windows of the ECB-file-browser. To get this state for
a certain file ECB uses that check-state-function stored in the cache for the
directory of that file (*note Identifying backends::).

You can add any arbitrary functions as check-state-function to
`ecb-vc-supported-backends' as long as they get one filename-argument and
return a state-symbol (e.g. `up-to-date'.  ECB can understand a certain set
of state-values which are then mapped to suitable image-icons which will in
turn be displayed in front of the filename in the file-browser. Because the
values a check-state-function return can differ from that state-values ECB
understands, ECB offers an option to define a appropriate state-mapping. The
name of this option is `ecb-vc-state-mapping'.  See the documentation of this
option to get a list of all state-value ECB understands.

Per default ECB uses - when running under GNU Emacs - the function `vc-state'
of the VC-package(1) to check the state for the backends CVS, RCS, SCCS and
Subversion. So the default-value of `ecb-vc-state-mapping' contains a mapping
between these values `ecb-vc-state' can return and that state-values ECB
understands.

If ECB should support other VC-backends than CVS, RCS, SCCS and Subversion
(e.g. Clearcase) you should add that new backend to the VC-package (see the
initial comments of vc.el how to do this) then ECB will automatically support
that new backend. Alternatively it may be sufficient if you write your own
check-state-function for this backend and add the needed mapping to
`ecb-vc-state-mapping' if necessary.

10.8.2.1 Getting heuristic state-values or real ones for CVS
............................................................

The interface of GNU Emacs' VC-package offers two different ways to get the
VC-state of a file:

   * The real, fresh and expensive approach VC has a function
     `vc-recompute-state' which always performs a command "cvs status" to get
     a fresh and real state for a file. As you can imagine this operation can
     be very expensive and long lasting depending on the location of the
     repository. But the CVS-backend of VC offers with the option
     `vc-cvs-stay-local' a way to tell Emacs to stay local even for the sake
     of getting a real state.

   * The heuristic approach: The function `vc-state' always returns a
     "heuristic" state which should be used when a fresh and real state is
     not necessary.  With `vc-state' the option `vc-cvs-stay-local' will never
     take effect.

VC/CVS actually does it this way (regardless if ECB is active or not): When
you visit a file, it always uses just the heuristic to get the state
(comparing file times), regardless of the setting of `vc-cvs-stay-local'.
This is because the "fresh-but-slow" state is determined by calling "cvs
status" on the file, and this was deemed unacceptably slow if done at
visiting time under any conditions.

The state is updated by calling `vc-recompute-state' prior to
`vc-next-action' (C-x v v) which either checks a file in or out.  IF
`vc-cvs-stay-local' is nil, then this does in fact call "cvs status" to get
the "fresh-but-slow-state", but if `vc-cvs-stay-local' is t, then it just
compares the file times again.

But under certain conditions (e.g. if called for files not already visited or
for files their VC-state has been changed from outside Emacs, e.g. by
checking in the file via command line) `vc-state' does not compute a new
heuristic state but returns a cached one (cached by the VC-package itself not
by ECB) which does not reflect the current VC-state. Example: if you have
edited a file within Emacs and then checked in from outside Emacs `vc-state'
returns a wrong state until you call `revert-buffer' for this file. Therefore
ECB offers the check-state-function `ecb-vc-state' which does the same as
`vc-state' but it clears the internal caches of the VC-package for that file
before calling `vc-state'.

The bottom line for you is this: If you use `ecb-vc-state' in
`ecb-vc-supported-backends' to get the version control state, then you get
the same policy that VC uses and you get always a "correct" heuristic state
(as correct as possible a heuristic state can be). There should no harm if
you use `vc-recompute-state' as a replacement function if you want to get
fresh and real state-values, but then (a) you must make sure to set
`vc-cvs-stay-local' to nil, and (b) fetching the state over the network under
all conditions was deemed unacceptably slow in VC.

---------- Footnotes ----------

(1) The VC-package of Emacs offers a standardised and uniform interface for
several backends; per default CVS, RCS, SCCS and Subversion are supported by
the VC-package.


File: ecb.info,  Node: Remote repositories,  Next: Refreshing the VC-state,  Prev: Checking the state,  Up: Version-control support

10.8.3 Important informations about remote repositories
-------------------------------------------------------

At least CVS can be used in a mode called "Client/Server" which means the
root repository is located on a remote machine. We call a repository which
can not being mounted by the client-machine (which contains the working
directory) a "remote repository". In most cases getting the fresh and real
VC-state for such repositories will be unacceptable slow or often users will
work offline means with no connection available to the remote host. To avoid
problems like these ECB offers first an option
`ecb-vc-directory-exclude-regexps' to exclude such directories with a remote
repository from the VC-support of ECB and secondary the
identify-backend-funtion `ecb-vc-dir-managed-by-CVS' behaves smart with that
respect (*note Identifying backends::). See also
`ecb-vc-xemacs-exclude-remote-cvs-repository'!

10.8.3.1 Remote paths and the VC-support of ECB
...............................................

ECB supports working with remote directories like TRAMP- or EFS-directories
(*note Remote directories::). Do not confuse remote directories with remote
repositories. A local directory located on your disk and set in
`ecb-source-path' can have a remote repository if managed by a VC-system. A
remote directory means a path in the format of TRAMP, ANGE-FTP or EFS set in
`ecb-source-path'.  Its very likely that getting the VC-state of files
contained in such a remote directory would be extremly expensive and
therefore ECB would be blocked quite long even if the VC-check is performed
stealthy (*note Stealthy background tasks::).

To avoid problems with such remote directories ECB prevents per default such
directories from being processed by the VC-support of ECB. But if a user is
dying to having the VC-state being displayed in the tree-buffers ECB offers
two ways to switch on the VC-support - see the option
`ecb-vc-enable-support': This option is set per default to the value
`unless-remote' which means remote paths will not be processed but it can be
set to `t' which means process all directories regardless if remote or not.
It's strongly recommended to use `unless-remote'!


File: ecb.info,  Node: Refreshing the VC-state,  Next: Adding new backends,  Prev: Remote repositories,  Up: Version-control support

10.8.4 How to refresh ECB-state-display when changed outside
------------------------------------------------------------

If all actions concerning version controlling of a file are performed within
Emacs with commands offeres by VC then the displayed state for such a file in
the tree-buffers of ECB will be always correct - in that sense that ECB will
always display that state which the check-state-function for the file will
return. At least with GNU Emacs for the backends CVS, RCS, SCCS and
Subversion this will be true. With XEmacs only for CVS. For other backends
see *Note Adding new backends::.

But if the VC-state of a file will be changed outside of Emacs (unfortunately
PCL-CVS must be called "outside" too because PCL-CVS doesn't use the
functions of the VC-package of Emacs for checking-in or -out) then ECB can
not automatically recognize this and therefore it can not aurtomatically
update the displayed state-image-icon. You have to tell ECB for which files
in the tree-buffers the VC-state should be recomputed. This can be done via
the popup-menus of the ECB-tree-buffers - The following popup-commands are
offered in the submenu "Version Control":

ECB-directories-buffer (if sources are displayed within):
     "Recompute state for file" and "Recompute state for dir" whereas the
     latter one recomputes the VC-state for all files of that directory the
     file belongs.

ECB-sources-buffer
     "Recompute state for file" and "Recompute state for dir" whereas the
     latter one recomputes the VC-state for all files currently displayed in
     the sources-buffer.

ECB-history-buffer
     "Recompute state for file" and "Recompute state for whole history"
     whereas the latter one recomputes the VC-state for all file-entries
     currently displayed in the history-buffer.

*Caution*: The state will only recomputed right under all situations if you
use either `ecb-vc-state' or `vc-recompute-state' as check-state-function in
`ecb-vc-supported-backends' (*note Checking the state::).

Of course all these commands update the VC-state in all visible tree-buffers
the file is currently displayed (e.g. often a file is displayed in the
sources- and the history-buffer)!

For general informations about the usage of popup-menus in ECB see *Note
Using the mouse:: (subsection "The right mouse button").

In addition to these popup-commands using the POWER- rsp. Shift-click (*note
Using the mouse::) onto a directory in the directory-window of ECB refreshes
the VC-state-values of all files contained in this directory too.


File: ecb.info,  Node: Adding new backends,  Next: Known VC-problems,  Prev: Refreshing the VC-state,  Up: Version-control support

10.8.5 Necessary steps and informations for adding new backends
---------------------------------------------------------------

There are mainly three necessary steps for adding a new(1) backend BE which
should be supported by ECB:

  1. Adding an identify-backend-function to `ecb-vc-supported-backends' ECB
     needs a function how to identify the new backend BE for a certain
     directory. If there exists already a library (other then VC) supporting
     this backend then this library propably contains already such a function
     which can be used or can be used at least with a small elisp-wrapper. If
     no elisp-library for backend BE exists then you have probably write the
     full identify-backend-function for your self. This function has to be
     added to `ecb-vc-supported-backends'.

  2. Adding an check-state-function to `ecb-vc-supported-backends' Associated
     to the new identify-backend-function mentioned in step 1 a new
     check-state-function is needed which can be used by ECB to get the
     VC-state for a file. See *Note Checking the state:: for a description
     about the needed interface of such a function. In combinatio with the
     identify-backend-function from step 1 this function has to be added to
     `ecb-vc-supported-backends'.

  3. Enabling automatic state-update after checkin/out

     This step is not essential if you do not need the displayed VC-state
     automatically updated after a checkin/out of a file via the commands
     available for backend BE (e.g. clearcase.el offers for the backend
     Clearcase elisp-commands to checkin and checkout a file which then
     should also update the displayed state in the ECB-tree-buffers. All you
     need is a way to tell these commands that they should clear the
     ECB-VC-cache for the file and then restart the ECB-VC-check-mechanism.
     This should be done after these commands have finished their original
     job.

     ECB enables this per default for all backends supported by the
     VC-package with the following code. Maybe this is a good starting point.

        (defvar ecb-checkedin-file nil
          "Stored the filename of the most recent checked-in file. Is only set by the
        after-advice of `vc-checkin' and `ecb-vc-checkin-hook' \(resets it to nil).
        Evaluated only by `ecb-vc-checkin-hook'.

        This is the communication-channel between `vc-checkin' and
        `ecb-vc-checkin-hook' so this hook-function gets the filename of the
        checked-in file.")

        (defadvice vc-checkin (after ecb)
          "Simply stores the filename of the checked-in file in `ecb-checkedin-file'
        so it is available in the `vc-checkin-hook'."
          (setq ecb-checkedin-file (ecb-fix-filename (ad-get-arg 0))))

        (defun ecb-vc-checkin-hook ()
          "Ensures that the ECB-cache is reset and the entry for the most recent
        checkedin file is cleared. Uses `ecb-checkedin-file' as last checked-in file."
          (when ecb-checkedin-file
            (ecb-vc-cache-remove ecb-checkedin-file)
            (ecb-vc-reset-vc-stealthy-checks)
            (setq ecb-checkedin-file nil)))


---------- Footnotes ----------

(1) i.e.  not already supported by the VC-package because all these backends
are automatically supported by ECB too!


File: ecb.info,  Node: Known VC-problems,  Prev: Adding new backends,  Up: Version-control support

10.8.6 Currently know problems with the VC-support
--------------------------------------------------

10.8.6.1 Remote repositories and XEmacs
.......................................

Currently there are mostly problems related to XEmacs - cause of its outdated
VC-package which allows no heuristic state-computation but always runs "cvs
status" to get the VC-state for a file (done by `vc-cvs-status'). This can be
horrible slow for remote CVS-root-repositories. Now ECB performs the VC-check
stealthy and only in idle-time of Emacs but even so XEmacs can be blocked
espcially if the cygwin-build of XEmacs is used: This XEmacs-version is
substantially slower concering file-operations and has sometimes a very slow
and delayed response-behavior for mouse- and keyboard interrupts - so even
ECB let the user interrupt by using `input-pending-p' before getting the
VC-state of a file XEmacs sometimes does not react to such user-interrupts
and seems to be blocked.

Current solution: ECB offers the option
`ecb-vc-xemacs-exclude-remote-cvs-repository' which excludes remote
repositories from being checked. This option is per default t for XEmacs.
Whenever XEmacs syncs up its VC-package with the Emacs one this option will
automatically take no effect.


File: ecb.info,  Node: Using eshell,  Next: Grepping directories,  Prev: Version-control support,  Up: Tips and tricks

10.9 Optimal using of eshell in ECB
===================================

ECB offers a very smart integration of the "eshell" if you are using a
compile window (*note Temp- and compile-buffers::)(1)

Here is a short summary of provided features:

   * Ability to jump to the eshell buffer within the compilation window by
     simply call `eshell' (bound to `C-c . e'). If the eshell isn't running
     it will be started.

   * Expands the compilation window when you run commands. So for example it
     allows you to view the eshell in minimized mode and then when you run
     "ls" the window automatically expands (but always depending on the
     output of the command you run).

   * Synchronizes the current directory of the eshell with the current buffer
     in the current active edit-window of ECB.

   * Provides smart window layout of the eshell buffer. This makes sure that
     the eshell is taking up the exact amount of space and that nothing is
     hidden.

Here comes a detailed explanation of these features and how to use it (all
these features are only available if you use a persistent compile-window,
i.e. if `ecb-compile-window-height' is not nil):

You do not have to learn a new command for the eshell-start - just call
`eshell' (for convenience also bound to `C-c . e') and the eshell will
displayed in the compile-window of ECB (if eshell is not already alive then
it will be started automatically).

ECB tries to display the contents of the eshell-buffer as best as possible,
means ECB can autom. enlarge and shrink the compile-window so the contents of
the eshell are fitting the window. See option
`ecb-eshell-enlarge-when-eshell' and
`ecb-eshell-fit-window-to-command-output'. Normally this is done autom. but
you can also you the standard compile-window enlarging-command of ECB:
`ecb-toggle-compile-window-height'.

ECB tries also to recenter the eshell-buffer as best as possible.  Normally
this is done autom. but you can do it on demand with the command
`ecb-eshell-recenter'.

If option `ecb-eshell-synchronize' is true then ECB always synchronizes the
command prompt of eshell with the directory of current source-buffer of the
current active edit-window.

With the option `ecb-eshell-auto-activate' you can start eshell autom. in the
compile-window when ECB is started but of course if a compile-window exists.

---------- Footnotes ----------

(1) Of course you can use eshell also if there is no compile-window. Then it
is just displayed in the edit-area and there is no special integration.


File: ecb.info,  Node: Grepping directories,  Next: Working with JDEE,  Prev: Using eshell,  Up: Tips and tricks

10.10 Grepping directories with ECB
===================================

ECB offers in the popup-menus in the directories- and sources-tree-buffer
commands for easy (recursive) grepping the current directory under point
(directory-buffer) rsp. the current-directory (sources-buffer). In every case
just the function of the options `ecb-grep-function' rsp.
`ecb-grep-find-function' is called and the `default-directory' is tempor. set
to the chosen directory so the grep will performed in this directory
regardless of the `default-directory' of current buffer in the edit-window.

Other smart things beyond that are not done by ECB, see also
`ecb-grep-function'!

So, how to exclude some subdirectories or files from the grep?

Basically this has to be done with the "-prune" option of the find-utility:
If the standard-grep facility of Emacs is used then this is not easy but with
the library `igrep.el' there is a convenient way to exclude things like CVS-
or RCS-directories from the find-call: See the variable
`igrep-find-prune-clause' of the library `igrep.el'.


File: ecb.info,  Node: Working with JDEE,  Next: Compile-window on demand,  Prev: Grepping directories,  Up: Tips and tricks

10.11 Working best with ECB and JDEE
====================================

ECB is completely language independent, i.e. it works with any language
supported by semantic (e.g. C, C++, Java, Elisp etc.).

But there are some special integrations for the great
Java-Development-Environment JDEE:

   * Displaying contents of class under point

     With the command `ecb-jde-display-class-at-point' you can display the
     contents of the class which contains the definition of the "thing" at
     point (which can be a method, variable etc.).

   * Creating new source-files

     The popup-menus in the directories- and the sources-buffer offer a
     command "Create Source" which allows easy creating new java-sources by
     calling the command `jde-gen-class-buffer'.

   * Adding user-extensions to the popup-menus

     The options `ecb-directories-menu-user-extension' and
     `ecb-sources-menu-user-extension'(1) allow adding often used
     JDEE-commands to the popup-menus of the directories- or sources-buffer.
     One example is to add building the project of current directory. Here is
     a function which could be added to `ecb-directories-menu-user-extension':

        (defun ecb-dir-popup-jde-build (node)
          "Build project in directory."
          (let ((project-file
        	 (expand-file-name jde-ant-buildfile (tree-node-get-data node))))
            (jde-ant-build project-file "build")))

     Of course you can add entries to the option
     `ecb-methods-menu-user-extension' and `ecb-methods-menu-user-extension'
     too.


---------- Footnotes ----------

(1) If you need a dynamic way of menu-extension then you should have a look
at the options `ecb-directories-menu-user-extension-function' and
`ecb-sources-menu-user-extension-function'.


File: ecb.info,  Node: Compile-window on demand,  Next: Non-semantic sources,  Prev: Working with JDEE,  Up: Tips and tricks

10.12 Displaying the compile-window on demand
=============================================

If you like displaying all output of compile/grep/etc. an all temp-buffers
like *Help*-buffers in an extra compile-window (*note Temp- and
compile-buffers::) but you dislike wasting the space of this compile-window
if you are just editing then you can get a compile-window "on demand". Just
do the following:

  1. Customize `ecb-compile-window-height' to not nil and save it for future
     sessions. This gives you an extra compile-window at the bottom.

  2. Add the following to your .emacs:

        (add-hook 'ecb-activate-hook
                  (lambda ()
                    (let ((compwin-buffer (ecb-get-compile-window-buffer)))
                    (if (not (and compwin-buffer
                                  (ecb-compilation-buffer-p compwin-buffer)))
                        (ecb-toggle-compile-window -1)))))

     This hides the extra compile-window directly after the start of ECB
     because there is no need for a compile-window at this moment. But the
     hiding will not be done if there is a compile-window and if a
     "compile-buffer" in the sense of `ecb-compilation-buffer-p' is displayed
     in this compile-window. Without this additional check the compile-window
     would always be hidden after the ECB-start even when ECB is reactivated
     after a deactivation by the window-manager-support of ECB (*note
     Window-managers and ECB::); but in these cases we want to preserve the
     state before deactivation as good as possible (see also option
     `ecb-split-edit-window-after-start').


This is all you have to do. Now if you run `compile' (or `grep' or other
compile-modes) or display temp-buffers like *Help*-buffers then ECB autom.
displays the compile-window at the bottom and display the output there.

If you have finished with using the compile- or temp-output (e.g.  fixing
errors) then you can throw away the compile-window just by
`ecb-toggle-compile-window' - ECB will reactivate it autom.  before next
compilation or help-buffer-display.!


File: ecb.info,  Node: Non-semantic sources,  Next: Hide-show,  Prev: Compile-window on demand,  Up: Tips and tricks

10.13 Parsing and displaying non-semantic sources
=================================================

ECB is mostly designed to display parsing information for files supported by
semantic. But beginning with version 1.94 it also supports other parsing
engines like imenu and etags, so also files not supported by semantic but by
imenu/etags can be displayed in the Method-buffer of ECB. See *Note
Definition of semantic- and non-semantic-sources:: for a description of
"semantic-sources" and "non-semantic-sources".

If support of non-semantic-sources is enabled then ECB will display the
contents of all sources which can be displayed by speedbar too.  This comes
from the fact that ECB uses speedbar-logic to parse sources with imenu or
etags.

In most cases imenu-parsing is preferable over etags-parsing because imenu
operates on Emacs-buffers and needs no external tool and therefore parsing
works also if current contents of a buffer are not saved to disk.

This section describes all important aspects about parsing and displaying
file-contents of file-types not supported by semantic but by imenu and/or
etags.

10.13.1 Enabling parsing and displaying of non-semantic-sources
---------------------------------------------------------------

Enabling is simply done with the option `ecb-process-non-semantic-files'.

ECB offers an option `ecb-non-semantic-parsing-function' to specify on a
major-mode basis which parsing-method should be used: imenu or etags.
Normally there should be no need to change this option but read the
documentation of this option (*note ecb-non-semantic::) for further details.

IMPORTANT:

   * If imenu-parsing should be used then the option
     `speedbar-use-imenu-flag' must be set to not `nil'!

   * If some non-semantic-sources are not parsed (i.e. there is an empty
     Methods-buffer) and you think that they should then maybe they are
     neither supported by imenu nor by etags or you have to check the options
     `ecb-non-semantic-parsing-function' and
     `speedbar-dynamic-tags-function-list' and - especially for etags -
     `speedbar-fetch-etags-parse-list', `speedbar-fetch-etags-arguments' and
     `speedbar-fetch-etags-command'.

   * Even with support for semantic-, imenu- and etags-parsing there will
     remain some file-types rsp. `major-modes' which are not parse-able,
     neither by semantic, imenu nor etags. This is no problem because these
     files simply have an empty Methods-buffer. But nevertheless you will get
     a message "Sorry, no support for a file of that extension" which comes
     from the speedbar-library and can not switched off. Therefore if a
     `major-mode' is known as not parse-able by semantic, imenu or etags it
     can be added to the option `ecb-non-semantic-exclude-modes' and then it
     will be excluded from being tried to parsed and this (annoying) message
     will not occur.

10.13.2 Automatic rescanning/reparsing of non-semantic-sources
--------------------------------------------------------------

In contrast to semantic (see `global-semantic-auto-parse-mode') there is no
built-in mechanism for autom. reparsing non-semantic-sources and then
updating the contents of the Methods-buffer.

For non-semantic-sources you have always at least to call
`ecb-rebuild-methods-buffer' (bound to `C-c . r') or saving the source-file
(if `ecb-auto-update-methods-after-save' is true) to update the
Method-buffer(1).

Depending on the parsing-mechanism the following options have to be switched
on so ECB can rebuild the methods-buffer for non-semantic-sources:

   * imenu:

     The imenu-option `imenu-auto-rescan' must be enabled and
     `imenu-auto-rescan-maxout' has to be set big enough to auto-parse big
     files too! But this results not directly in an autom. updated
     Method-buffer. This is first done after calling the command
     `ecb-rebuild-methods-buffer' or saving the source-file (if
     `ecb-auto-update-methods-after-save' is true).

   * etags:

     Only if `ecb-auto-save-before-etags-methods-rebuild' is switched on the
     command `ecb-rebuild-methods-buffer' rebuilds the method-buffer with
     current source-contents. See description of this option for an
     explanation.

Tip: If you want to program your own real. automatic rescan/reparse/rebuild
mechanism for non-semantic-sources you can do:

Adding to `after-change-functions' a function F which either runs itself
`ecb-rebuild-methods-buffer-for-non-semantic' or which adds only another
function FF to an idle-timer and the function FF runs
`ecb-rebuild-methods-buffer-for-non-semantic'. The latter approach has the
advantage that the reparse/rebuild is not performed immediately after every
change but first after Emacs is idle for a senseful interval (e.g. 4 seconds)
after last change. Of course the function FF has to cancel its own idle-timer
at the end, so the next idle-timer is first started again after the next
change (i.e. by function F which is still contained in
`after-change-functions'.

10.13.3 Customizing the display of the tags
-------------------------------------------

For non-semantic-sources ECB uses does no special organizing of tags in
groups and sub-tags but it completely uses the tag-hierarchy the imenu- and
etags-parsers of speedbar return. So the displayed tag hierarchy can only be
customized with some options speedbar offers for this:

`speedbar-tag-hierarchy-method', `speedbar-tag-group-name-minimum-length',
`speedbar-tag-split-minimum-length' and
`speedbar-tag-regroup-maximum-length'. See the speedbar documentation for
details about these options.

With the option `ecb-method-non-semantic-face' you can define the face used
for displaying the tags in the Method-buffer for non-semantic-sources.

`ecb-non-semantic-methods-initial-expand' can be useful too.

---------- Footnotes ----------

(1) Maybe future versions of ECB (> 1.94) will offer an autom. mechanism for
this.


File: ecb.info,  Node: Hide-show,  Next: Window-managers and ECB,  Prev: Non-semantic sources,  Up: Tips and tricks

10.14 Using hide-show from the methods-buffer-menu
==================================================

The popup-menu of the Methods-buffer offer two entries for either hiding or
showing the block which is related to the selected tag (that tag for which
the popup-menu was opened):

   * "Jump to tag and hide block": Jumps to the tag and calls `hs-hide-block'
     from the hideshow-library which is shipped with (X)Emacs. After that the
     block is hidden, i.e. only the header-line of that tag (method, variable
     etc.) is visible, the rest is hidden behind the "...".

   * "Jump to tag and show block": Jumps to the tag and calls
     `hs-show-block'. This shows the related hidden block if the block was
     hidden via `hs-hide-block' or the menu-entry "Jump to tag and hide
     block" (s.a.).

For this feature the library `hideshow.el' is used which should normally
being included in the (X)Emacs-distribution. If this library is not loaded
into Emacs, ECB does this automatically before the first call to one of these
menu-entries.

IMPORTANT: If in some `major-mode' hiding and showing does not work as you
expect it to work then you must probably add an entry for this `major-mode'
to the hideshow-variable `hs-special-modes-alist'. See the documentation of
this variable for further details. One example of such a `major-mode' is
`jde-mode' of the Java Development Environment JDEE; just add an entry for it
like the already contained entries for `c++-mode' or `java-mode' and hiding
and showing will work for you with JDEE too.


File: ecb.info,  Node: Window-managers and ECB,  Next: Using semanticdb,  Prev: Hide-show,  Up: Tips and tricks

10.15 Support of several Emacs-window-managers
==============================================

There are several window-managers available which offer an easy interface to
jump between different window-configurations within the same frame. A window
configuration is the layout of windows and associated buffers within a frame.
There is always at least one configuration, the current configuration. You
can create new configurations and cycle through the layouts in either
direction.  Window configurations are often named or numbered, and you can
jump to and delete named rsp. numbered configurations.

Without special support by ECB these window-managers would not work in
combination with ECB!

ECB currently supports the following managers:

   * winring.el: Written by Barry A. Warsaw <bwarsaw@python.org>, available at
     `http://www.python.org/emacs/'

   * escreen.el: Written by Noah Friedman <friedman@splode.com>, available at
     `http://www.splode.com/~friedman/software/emacs-lisp/'

*IMPORTANT*: With one of these window-managers installed and active you can
run applications like Gnus, VM or BBDB in the same frame as ECB! Just use
different window-configurations (winring.el) or escreens (escreen.el) for ECB
and the other applications. Especially with winring.el you can give every
configuration a descriptive name like "ECB" or "Gnus"; afterwards you can
jump to a window-configuration by name!

When you go back to the ECB-window-configuration (winring.el) or the
ECB-escreen (escreen.el) with any of the special window-manager-commands then
the state of ECB will be restored exactly as you have left it when going to
another window-configuration rsp.  escreen. This includes the whole splitting
state of the edit-area and the visibilty of the ecb-windows and of the
compile-window!

The rest of this section describes how to enable the special ECB-support for
these window-managers and how to use them.

10.15.1 Enabling of the support
-------------------------------

Every support must be enabled explicitly:
   * winring: Call `ecb-winman-winring-enable-support'. This *MUST* be done
     *BEFORE* the first call to any winring-command, so also before calling
     `winring-initialize'!

   * escreen: Call `ecb-winman-escreen-enable-support'. This *MUST* be done
     *BEFORE* the first call to any escreen-command, so also before calling
     `escreen-install'!

If a window-manager-support should be enabled autom. after Emacs-start just
put the following into your `.emacs':

   (ecb-winman-winring-enable-support)
   (winring-initialize)

   ;; or - if you like escreen more

   (ecb-winman-escreen-enable-support)
   (escreen-install)

10.15.2 Usage of a window-manager in combination with ECB
---------------------------------------------------------

After enabling the support of one of the supported window-managers just go on
as described in the commentary or introduction of the respective
library-file(s) of the window-manager. Here is a short description:

   * winring: First you have to define how to identify the
     ECB-window-configuration, i.e. the configuration with activated ECB.
     This done with the option `ecb-winman-winring-name'. There is always
     only one window-configurations with name `ecb-winman-winring-name'!

     Then run `winring-initialize'. If ECB is active then the resulting
     window-configuration is the ECB-window-configuration.  Otherwise you can
     create the ECB-window-configuration when you first time call
     `winring-new-configuration' with name equal to
     `ecb-winman-winring-name'. In general you can run all commands of the
     winring-library. If you jump to the ECB-window-configuration then ECB
     will be autom. activated and if you leave the ECB-window-configuration
     then ECB will autom. deactivated.

   * escreen: First you have to define how to identify the ECB-escreen i.e.
     that escreen with activated ECB. This done with the option
     `ecb-winman-escreen-number'. There is always only one escreen with
     number `ecb-winman-escreen-number'!

     Then run `escreen-install' (deactivates ECB if currently running). After
     that you can call `escreen-create-screen' and `escreen-goto-screen'(1).
     These commands autom. activate ECB if creating or selecting the escreen
     with number `ecb-escreen-number' (default = 1) and autom. deactivate ECB
     if leaving the ECB-escreen.

10.15.3 Disabling the support
-----------------------------

There is normally no need to do this but nevertheless it can be done by
`ecb-winman-escreen-disable-support' rsp.
`ecb-winman-winring-disable-support'.

---------- Footnotes ----------

(1) And of course all other `escreen-goto-*' commands!


File: ecb.info,  Node: Using semanticdb,  Prev: Window-managers and ECB,  Up: Tips and tricks

10.16 Using semanticdb to jump to type-tags defined in other files
==================================================================

In OO-languages like CLOS, eieio and C++ there can be type-tags in the
method-buffer which are somehow virtual because there is no definition in the
current source-file. But such a virtual type collects all its outside defined
members like methods in C++ which are defined in the `*.cc' file whereas the
class-definition is defined in the associated header-file. ECB uses
semanticdb to open the definition-file of such a tag and to jump to the
definition of this tag. Same for parent-tags in the methods-buffer. This
feature can only work correctly if semanticdb is well configured!

Here is a C++-example:

This class is defined in a file `ParentClass.h':

   class ParentClass
   {
   protected:
     int p;
   };

This class is defined in a file `ClassWithExternals.h'

   #include "ParentClass.h"

   class ClassWithExternals : public ParentClass
   {
   private:
     int i;

   public:
     ClassWithExternals();
     ~ClassWithExternals();
   };

Both the constructor and the destructor of the class "ClassWithExternals" are
defined in a file `ClassWithExternals.cc':

   #include "test.h"

   ClassWithExternals::ClassWithExternals(int i,
                                          boolean b,
                                          char c)
   {
     return;
   }

   void
   ClassWithExternals::~ClassWithExternals()
   {
     return;
   }

ECB displays the contents of `ClassWithExternals.cc' in its methods-buffer
like follows:

   [-] [Includes]
    `- test.h
   [-] ClassWithExternals
    |  +ClassWithExternals (+i:int, +b:class boolean, +c:char):ClassWithExternals
    `- +~ClassWithExternals ():void

Both the constructor and the destructor of the class "ClassWithExternals" are
grouped under their class-type. ECB now uses semanticdb to jump to the
definition of class "ClassWithExternals" when you click onto the type-node
"ClassWithExternals" in the methods-buffer.

The contents of `ClassWithExternals.h' are displayed like follows:

   [-] [Includes]
    `- ParentClass.h
   [-] ClassWithExternals:class
    |  [-] [Parents]
    |   `- ParentClass
    |  [-] [Variables]
    |   `- -i:int
    |  +ClassWithExternals ():ClassWithExternals
    |  +~ClassWithExternals ():void
    `- [+] [Misc]

ECB uses semanticdb to jump to the definition of the class "ParentClass" when
you click onto the node "ParentClass".

To enable this feature `global-semanticdb-minor-mode' must be enabled and
semanticdb must be correctly configured. This means mainly that the option
`semanticdb-project-roots' must be setup well. See the manual of semanticdb
for further informations about this.


File: ecb.info,  Node: Elisp programming,  Next: Conflicts and bugs,  Prev: Tips and tricks,  Up: Top

11 Entry points for Elisp programmers
*************************************

This chapter describes how ECB can be used/programmed/driven by an
Elisp-program. This contains:

* Menu:

* List of variables::           Which variables an Elisp-program can use
* List of hooks::               All available hooks
* tree-buffer::                 Full description of the tree-buffer-library
* Adviced functions::           How to deal with the adviced functions
* The layout-engine::           Programming new layouts and special windows


File: ecb.info,  Node: List of variables,  Next: List of hooks,  Prev: Elisp programming,  Up: Elisp programming

11.1 Variables for Elisp-programs
=================================

Variables an Elisp-program can use beyond those ones mentioned in *Note The
layout-engine:::

   * `ecb-source-path-functions'

Look at the documentation of these variables to get a description.


File: ecb.info,  Node: List of hooks,  Next: tree-buffer,  Prev: List of variables,  Up: Elisp programming

11.2 Available hooks of ECB
===========================

The following hooks are available:

   * `ecb-activate-before-new-frame-created-hook'

   * `ecb-activate-before-layout-draw-hook'

   * `ecb-activate-hook'

   * `ecb-after-directory-change-hook'

   * `ecb-before-activate-hook'

   * `ecb-before-deactivate-hook'

   * `ecb-common-tree-buffer-after-create-hook'

   * `ecb-current-buffer-sync-hook'

   * `ecb-deactivate-hook'

   * `ecb-directories-buffer-after-create-hook'

   * `ecb-hide-ecb-windows-after-hook'

   * `ecb-hide-ecb-windows-before-hook'

   * `ecb-history-buffer-after-create-hook'

   * `ecb-methods-buffer-after-create-hook'

   * `ecb-redraw-layout-after-hook'

   * `ecb-redraw-layout-before-hook'

   * `ecb-show-ecb-windows-after-hook'

   * `ecb-show-ecb-windows-before-hook'

   * `ecb-sources-buffer-after-create-hook'

Look at the documentation of these hooks to get a detailed description.


File: ecb.info,  Node: tree-buffer,  Next: Adviced functions,  Prev: List of hooks,  Up: Elisp programming

11.3 The library tree-buffer.el
===============================

The library tree-buffer.el is an ECB-independent library written completely
in emacs lisp and can be used also by other applications than ECB. But the
main purpose of tree-buffer.el is to offer a small but powerful API to create
new tree-buffers for ECB, add new tree-nodes to a tree-buffer and thus use
such a tree-buffer to display arbitrary information structured by a tree.

This chapter is for emacs-lisp-programmers and describes how to create a new
tree-buffer, how to add new tree-nodes to a tree-buffer (includes removing
and updating already existing tree-nodes) and how to use the offered
tree-buffer- and tree-node-APIs.

* Menu:

* Introduction::                General description of tree-buffers
* A new tree-buffer::           How to create a new tree-buffer
* A new tree-node::             How to add new tree-nodes to a tree-buffer
* Updating a tree-buffer::      How to update a tree-buffer after changes
* Tree-buffer keybindings::     Default and customizable keybindings
* The tree-buffer-API::         All functions for tree-buffers and -nodes
* Do not with tree-buffer::     Things which are strictly forbidden
* Tree-buffer How to::          Dealing with special situations


File: ecb.info,  Node: Introduction,  Next: A new tree-buffer,  Prev: tree-buffer,  Up: tree-buffer

11.3.1 General description of tree-buffers
------------------------------------------

This subchapter is a general introduction in the main concepts of a
tree-buffer.

11.3.1.1 What is a tree-buffer?
...............................

A "tree-buffer" is meant to display certain informations (e.g. a
directory-tree) in a tree-structure consisting of "tree-nodes".  Every line
in a tree-buffer displays exactly one tree-node. Each node has exactly one
parent-node and can have any arbitrary number of "children"-nodes. If a
tree-node has no children then it is called a "leaf". A tree-node contains
several "slots" wheras the most important ones are the "name",
"displayed-name" and "data". See *Note A new tree-node:: for a detailed
explanation.

The difference between a natural tree like a fir and a tree-buffer is that
the root(-node) of a tree-buffer is not visible but only its children. In the
example below the nodes parent-node-1 and parent-node-2 are the children of
the invisible root-node. Each tree-buffer has exactly one root-node which is
created automatically by `tree-buffer-create'.

If a tree-node contains at least one child it is displayed with a special
expand/collapse-symbol (see the example below). This symbol allows expanding
(rsp. collapsing) the tree-node wheras expanding means to display the
children-nodes and collapsing means to hide the childrens of a tree-node.

Here is an example of a tree-buffer:

   <root-node>  ------------------------[root-node (invisible)]
       [+] <parent-node-1>  -------.
       [-] <parent-node-2>  -------|
           [-] <expanded>  --------|
               <leaf-node-1>  -----|
               <leaf-node-2>  -----|-----[tree-nodes]
               <leaf-node-3>  -----|
               <leaf-node-4>  -----|
           [+] <collapsed>  -------
            |
            `-----------------[expand/collapse-symbol]

In most cases an action is triggered when clicking with the mouse onto a
tree-node(1) (e.g. clicking onto "leaf-node-1" or "parent-node-1" in the
example above). Which action is triggered by which key depends on what you
specify at creation-time of the tree-buffer - see *Note A new tree-buffer::
for details.

The creation-interface of a tree-buffer allows defining special popup-menus
when clicking with the right mouse-button (of course also possible via
keyboard, see *Note Tree-buffer keybindings::) onto a tree-node (e.g. some
senseful actions possible for directory-nodes like grepping this directory or
performing version-control actions for this directory or something else).

11.3.1.2 General recipe for a tree-buffer
.........................................

The following sequence of tasks is the general recipe for a tree-buffer
beginning from creation and ending with the display.

  1. Create the tree-buffer Creating a new tree-buffer has to be done with
     `tree-buffer-create' for non ECB-tree-buffers and with the macro
     `defecb-tree-buffer-creator' when the tree-buffer should be used as an
     ECB-tree-buffer, so it is an ECB-interactor. See *Note A new
     tree-buffer:: for all details.

  2. Add tree-nodes to the tree-buffer Adding nodes to the new tree-buffer
     (means make the new tree-buffer the current buffer and call
     `tree-node-new' for a new tree-node (note that a root-node for this
     tree-buffer has been autom. created by `tree-buffer-create'!). The first
     tree-node you add to a tree-buffer must have always the root-node
     (avaliable via `tree-buffer-get-root') as parent-node. The next nodes
     can have either one of the fromerly added nodes or the root-node too. All
     tree-nodes haveing the root-node as parent will be displayed at the
     toplevel of the tree-buffer. See *Note A new tree-node:: for all details.

  3. Display the tree-buffer with current nodes and state When you are
     finished building up the tree-node-structure call `tree-buffer-update'
     to display the current tree-structure (again after making the
     tree-buffer the current-buffer). See *Note Updating a tree-buffer:: for
     all details.

*IMPORTANT*: First a call of `tree-buffer-update' updates the *display* of a
tree-buffer, means shows all the tree-nodes in an emacs-buffer! Neither
creating a tree-buffer nor adding tree-nodes display anything; this just
builds the internal tree-structure.

*IMPORTANT*: See *Note Programming special windows:: for details about
programming interactors (special windows) regardless if they were build as
tree or not. There you can find a.o. how to automatically synchronizing a
special window with the current edit-buffer.

---------- Footnotes ----------

(1) Of course using the keyboard is also possible, see *Note Tree-buffer
keybindings::.


File: ecb.info,  Node: A new tree-buffer,  Next: A new tree-node,  Prev: Introduction,  Up: tree-buffer

11.3.2 How to create a new tree-buffer
--------------------------------------

The creator-function for a new tree-buffer depends on the fact if the new
tree-buffer should be used as an ECB-interactor or not. For a new
ECB-interactor the macro `defecb-tree-buffer-creator' has to be used,
otherwise the function `tree-buffer-create'. In the end both methods use
`tree-buffer-create' because the BODY-argument of
`defecb-tree-buffer-creator' must contain a call to this function!.

This section describes all arguments of `tree-buffer-create'.

Except the first argument NAME all arguments are key-arguments of the form
:arg-name arg-value, so for example a call looks like

   (tree-buffer-create <buffer-name> :frame <frame-object> ...).

These key-arguments (all except the first argument `NAME') can be arranged in
any arbitrary order but all of them are not-optional! The key-arg-name is
always a : followed by the lowercase version of the mentioned argument below
(e.g. `FRAME' -> :frame, `MOUSE-ACTION-TRIGGER' -> :mouse-action-trigger).

Here is a description of the arguments of `tree-buffer-create' - also
available as docstring for this function (via `C-h f'). The description below
contains also some examples for complex-arguments!

``NAME''
     Buffername of the new tree-buffer.

`FRAME'
     Frame in which the tree-buffer is displayed and valid. All key-bindings
     and interactive functions of the tree-buffer work only if called in
     FRAME otherwise nothing is done!

`MOUSE-ACTION-TRIGGER'
     When a mouse-action is triggered. Allowed values: `button-release' and
     `button-press'.

`IS-CLICK-VALID-FN'
     `tree-buffer-create' rebinds `mouse-1', `mouse-2', `RET' (and `TAB') and
     also in combination with shift and control (not with `TAB').
     IS-CLICK-VALID-FN is called first if a node or an expand-symbol is
     clicked. This function is called with five arguments:

        - mouse-button: The clicked mouse-button or RET or TAB (0 = RET or
          TAB, 1 = mouse-1, 2 = mouse 2)

        - shift-pressed: Non nil if the SHIFT-key was pressed during
          mouse-click or RET.

        - control-pressed: Non nil if the CONTROL-key was pressed during
          mouse-click or RET.

        - meta-pressed: Non nil if the META-key was pressed during
          mouse-click or RET.

        - tree-buffer-name: The buffer-name of the tree-buffer where the node
          has been clicked.

     The function must return not nil iff exactly this click/hit is accepted.
     If the function returns nil then really nothing is done by the
     tree-buffer after this click/hit!

     Here is an example (call `C-h f' to see what it does) for this
     callback-function:

        (defun ecb-interpret-mouse-click (mouse-button
                                          shift-pressed
                                          control-pressed
                                          meta-pressed
                                          tree-buffer-name)
          (if (eq mouse-button 0)
              (list (if control-pressed 2 1) shift-pressed meta-pressed
                    'keyboard)
            (if (and (not (eq mouse-button 1)) (not (eq mouse-button 2)))
        	nil
              (case ecb-primary-secondary-mouse-buttons
                (mouse-1--mouse-2
                 (if control-pressed
                     nil
                   (list mouse-button shift-pressed meta-pressed 'mouse)))
                (mouse-1--C-mouse-1
                 (if (not (eq mouse-button 1))
                     nil
                   (list (if control-pressed 2 1) shift-pressed meta-pressed
                         'mouse)))
                (mouse-2--C-mouse-2
                 (if (not (eq mouse-button 2))
                     nil
                   (list (if control-pressed 2 1) shift-pressed meta-pressed
                         'mouse)))
                (otherwise nil)))))

     This example would be passed as parameter as follows:

        (tree-buffer-create "myname"
                            :is-click-valid-fn 'ecb-interpret-mouse-click
                            ...)

`NODE-SELECTED-FN'
     Function to call if a node has been selected. This function is called
     with the following parameters:

        - node: The selected node

        - mouse-button (0 = RET, 1 = mouse-1, 2 = mouse 2)

        - shift-pressed

        - control-pressed

        - meta-pressed

        - tree-buffer-name

     For the last four arguments see the description above. This function has
     to ensure that the expandable- and expanded-state of the selected node
     is correct after returning.

     Here is an example (call `C-h f' to see what it does) for this
     callback-function:

        (defun ecb-tree-buffer-node-select-callback (node
        					     mouse-button
        					     shift-pressed
        					     control-pressed
                                                     meta-pressed
        					     tree-buffer-name)
          (let* ((ecb-button-list (ecb-interpret-mouse-click mouse-button
        						     shift-pressed
        						     control-pressed
                                                             meta-pressed
        						     tree-buffer-name))
        	 (ecb-button (nth 0 ecb-button-list))
        	 (shift-mode (nth 1 ecb-button-list))
                 (meta-mode (nth 2 ecb-button-list))
                 (keyboard-p (equal (nth 3 ecb-button-list) 'keyboard))
                 (maximized-p (ecb-buffer-is-maximized-p tree-buffer-name)))
            ;; now we dispatch to the right action
            (when ecb-button-list
              (cond ((ecb-string= tree-buffer-name ecb-directories-buffer-name)
        	     (ecb-directory-clicked node ecb-button nil shift-mode
                                            meta-mode))
        	    ((ecb-string= tree-buffer-name ecb-sources-buffer-name)
        	     (ecb-source-clicked node ecb-button nil shift-mode
                                         meta-mode))
        	    ((ecb-string= tree-buffer-name ecb-history-buffer-name)
        	     (ecb-history-clicked node ecb-button nil shift-mode
                                          meta-mode))
        	    ((ecb-string= tree-buffer-name ecb-methods-buffer-name)
        	     (ecb-method-clicked node ecb-button nil shift-mode
                                         meta-mode))
        	    ((ecb-string= tree-buffer-name ecb-analyse-buffer-name)
        	     (ecb-analyse-node-clicked node ecb-button nil shift-mode
                                               meta-mode))
        	    (t nil)))))

     This example would be passed as parameter as follows:

        (tree-buffer-create "myname"
                            :node-selected-fn 'ecb-tree-buffer-node-select-callback
                            ...)

     *IMPORTANT*: This callback must not modify the slot EXPANDED of the
     passed node because this is done automatically by the
     tree-buffer-library!

`NODE-EXPANDED-FN'
     Function to call if a node is expandable, point stays onto the
     expand-symbol and node is not already expanded. This function is called
     with the following parameters:

        - node: The selected node

        - mouse-button (0 = TAB, 1 = mouse-1, 2 = mouse 2)

        - shift-pressed

        - control-pressed

        - meta-pressed

        - tree-buffer-name

     This function should add all children nodes to this node if not already
     done (if possible). This function has to ensure that the expandable- and
     expanded state of the selected node is correct after returning!

     *IMPORTANT*: This callback must not modify the slot EXPANDED of the
     passed node because this is done automatically by the
     tree-buffer-library!

`NODE-COLLAPSED-FN'
     Function to call if a node is expandable, point stays onto the
     expand-symbol and node is already expanded. This function is called with
     the following parameters:

        - node: The selected node

        - mouse-button (0 = TAB, 1 = mouse-1, 2 = mouse 2)

        - shift-pressed

        - control-pressed

        - meta-pressed

        - tree-buffer-name

     This function is only a callback to inform the owner/user of this
     tree-buffer that this node has been collapsed. This function must not
     modify the expandable- or expanded state of the selected node!

     Often a sensefull value for this parameter is the function `ignore'.

     *IMPORTANT*: This callback must not modify the slot EXPANDED of the
     passed node because this is done automatically by the
     tree-buffer-library!

`NODE-MOUSE-OVER-FN'
     Function to call when the mouse is moved over a node. This function is
     called with three arguments: NODE, WINDOW, NO-PRINT, each of them
     related to the current tree-buffer. If NO-PRINT is nil then the function
     must print the text itself in any manner. This function must always
     return the text which either is printed by the function itself or by the
     caller (if NO-PRINT is not nil). The current buffer for this function is
     the tree-buffer itself. With XEmacs this function is only called if the
     tree-buffer track-mouse mechanism is activated (see the function
     `tree-buffer-activate-follow-mouse'). With GNU Emacs >= 21 this function
     is called by the `help-echo' property added to each node.

     Here is an example (call `C-h f' to see what it does) for this
     callback-function:

        (defun ecb-mouse-over-analyse-node (node &optional window no-message
                                                 click-force)
          (let ((str (when (or click-force
                               (ecb-show-minibuffer-info
                                node window
                                (car ecb-analyse-show-node-info)))
                       (if (equal (cdr ecb-analyse-show-node-info)
                                  'full-info)
                           (ecb-analyse-gen-tag-info
                            (car (tree-node->data node)))
                         (tree-node->name node)))))
            (prog1 str
              (unless no-message
                (ecb-nolog-message str)))))

`MOUSE-HIGHLIGHT-FN'
     If nil then in this tree-buffer no node is highlighted when the mouse
     moves over it. If t then each node is highlighted when the mouse moves
     over it. If a function then it is called with the node as argument and
     if it returns not nil then the node will be highlighted when the mouse
     moves over it - otherwise no highlighting takes place.

`NODE-DATA-EQUAL-FN'
     Function used by the tree-buffer to test if the data of two tree-nodes
     are equal. The function is called with two args: The DATA-slots of the
     two tree-nodes (see *Note A new tree-node:: for details about the
     data-slots).

     Here is an example (call `C-h f' to see what it does) for this
     callback-function:

        (defun ecb-analyse-compare-node-data (left right)
          "Return not nil when LEFT and RIGHT are identical node-datas."
          (and (equal (nth 2 left) (nth 2 right))
               (ecb-compare-methods-buffer-node-data (car left)
                                                     (car right))))

     Often a suitable value for this parameter is `equal'.

`MAYBE-EMPTY-NODE-TYPES'
     Nil or a list of node-types (a node-type is an integer which must be set
     with `tree-node-new'). Nodes with one of these types are treated as
     empty if they are not expandable (i.e. they have no children) and will
     be displayed with the empty-symbol ([x]); for other nodes see next
     argument.

`LEAF-NODE-TYPES'
     Nil or a list of node-types (see above). Nodes with one of these types
     are treated as leafs and will be displayed with the leaf-symbol (*).

     Summary for MAYBE-EMPTY-NODE-TYPES and LEAF-NODE-TYPES:

        * Expandable nodes will always be displayed either with the open- or
          with the close-symbol.

        * Not-expandable nodes with a node-type contained in
          MAYBE-EMPTY-NODE-TYPES will be displayed with the empty-symbol.

        * Not-expandable nodes with a node-type contained in LEAF-NODE-TYPES
          will be displayed with the leaf-symbol.

        * All other nodes will be displayed with no symbol just with correct
          indentation.

`MENU-CREATOR'
     Nil or function which has to return nil or a list of conses, each cons
     for a known node-type of this tree-buffer (the node-type of a node is an
     integer). Example: ((0 . menu-for-type-0) (1 . menu-for-type-1)).  The
     cdr of a cons must be a menu in the same format
     `tree-buffer-create-menu' expects as argument - see the documentation of
     this function for details. This function gets two arguments: The name of
     the tree-buffer and the node for which a popup-menu should be opened.

     Here is an example for such a menu-creator-callback:

        (defconst ecb-analyse-nodedata-tag-with-pos 0)
        (defconst ecb-analyse-nodedata-tag-without-pos 1)
        (defconst ecb-analyse-nodedata-no-tag 2)

        (defconst ecb-analyse-nodetype-bucket 0)
        (defconst ecb-analyse-nodetype-context 1)
        (defconst ecb-analyse-nodetype-arguments 2)
        (defconst ecb-analyse-nodetype-completions 3)
        (defconst ecb-analyse-nodetype-localvars 4)
        (defconst ecb-analyse-nodetype-prefix 5)
        (defconst ecb-analyse-nodetype-assignee 6)
        (defconst ecb-analyse-nodetype-function 7)
        (defconst ecb-analyse-nodetype-function-arg 8)

        (defun ecb-analyse-create-menu (node)
          "Return a popup-menu suitable for NODE."
          (let* ((data (tree-node->data node))
                 (tag-p (not (equal (nth 1 data) ecb-analyse-nodedata-no-tag)))
                 (tag-with-pos-p (equal (nth 1 data)
                                        ecb-analyse-nodedata-tag-with-pos))
                 (nodetype (nth 2 data)))
            (delq nil (list (if (equal nodetype ecb-analyse-nodetype-completions)
                                '(ecb-analyse-complete "Complete"))
                            (if tag-p
                                '(ecb-analyse-show-tag-info "Show tag info"))
                            (if tag-with-pos-p
                                '(ecb-analyse-jump-to-tag "Jump to tag"))))))

        (defun ecb-analyse-menu-creator (tree-buffer-name node)
          "Creates the popup-menus for the analyse-buffer."
          (let ((nodetype (tree-node->type node)))
            (unless (equal nodetype ecb-analyse-nodetype-bucket)
              (mapcar (function (lambda (type)
                                  (cons type (ecb-analyse-create-menu node))))
                      `(,ecb-analyse-nodetype-context
                        ,ecb-analyse-nodetype-arguments
                        ,ecb-analyse-nodetype-completions
                        ,ecb-analyse-nodetype-localvars
                        ,ecb-analyse-nodetype-prefix
                        ,ecb-analyse-nodetype-assignee
                        ,ecb-analyse-nodetype-function
                        ,ecb-analyse-nodetype-function-arg)))))

     This example would be passed as parameter as follows:

        (tree-buffer-create "myname"
                            :menu-creator 'ecb-analyse-menu-creator
                            ...)

`MENU-TITLES'
     Nil or a list conses, each cons for a node-type. See MENU-CREATOR. The
     cdr of a cons must be either a string or a function which will be called
     with current node under point and must return a string which is
     displayed as the menu-title.

`MODELINE-MENU-CREATOR'
     Nil or a function which has to return nil or a menu in the same format
     `tree-buffer-create-menu' expects as argument - see the documentation of
     this function for details. This function gets one argument: The name of
     the tree-buffer. If the function returns a menu then this menu will be
     displayed when the user clicks with mouse-button 3 at the modeline of
     the tree-buffer. The menu-title will be "Tree-buffer modeline-menu".

`TRUNC-LINES'
     Should lines in this tree buffer be truncated (not nil).

`READ-ONLY'
     Should the treebuffer be read-only (not nil).

`TREE-INDENT'
     Spaces subnodes should be indented. Ignored if TREE-STYLE is `image'
     (see below).

`INCR-SEARCH-P'
     Should the incremental search be enabled in the tree-buffer. Three
     choices: `prefix', `substring', `nil'. See the command
     `tree-buffer-incremental-node-search'.

`INCR-SEARCH-ADDITIONAL-PATTERN'
     Every search-pattern is prefixed with a regexp to jump over not
     important stuff of a displayed node-name at incr. search.. This is per
     default: beginning spaces and guide characters (|`-) and all
     expand/collapse-buttons [+], [x], rsp. [-]!

     If this argument is not nil then it must be a cons-cell where car is a
     string which should be a regexp-pattern which is added to the
     basic-prefix pattern (see above) and both of them prefix the
     incr-search-pattern. The cdr is the number of subexpressions in this
     additoonal pattern.

`ARROW-NAVIGATION'
     If not nil then a smart navigation with arrow keys is offered:

        - Left-arrow: If node is expanded then it will be collapsed otherwise
          point jumps to the next "higher" node in the hierarchical tree
          (higher means the next higher tree-level or - if no higher level
          available - the next higher node on the same level).

        - Right-arrow: If node is not expanded then it will be expanded.

          Onto a not expandable node the horizontal arrow-keys go one
          character in the senseful correct direction.

        - Up- and down-key: Point jumps to the first character of the
          previous (up) rsp. next node (down). "First" character means either
          the first character of the expand-symbol (in case
          EXPAND-SYMBOL-BEFORE-P is not nil) or of the displayed node-name.
          Or with other words: The first non-indentation and non-guide-line
          (see TREE-STYLE) character of a node.

`HOR-SCROLL-STEP'
     Number of columns a hor. scroll in the tree-buffer should scroll. If not
     nil then `M-mouse-1' and `M-mouse-2' scroll left and right and also
     `M-<left-arrow>' and `M-<right-arrow>'. Ignored with XEmacs.

`DEFAULT-IMAGES-DIR'
     Full path where the default images for the tree-buffer can be found.  It
     should contain an image for every name of `tree-buffer-tree-image-names'.

`ADDITIONAL-IMAGES-DIR'
     Additional image-dir which should be searched first for images needed
     for current tree-buffer. If the image can not be found in this directory
     then DEFAULT-IMAGES-DIR is searched. If the image can't even found here
     the related ascii-symbol is used.

`IMAGE-FILE-PREFIX'
     Common prefix for all image-files for this tree-buffer, e.g. "ecb-".

`TREE-STYLE'
     There are three different styles available: Image-style (value `image'):
     Very nice and modern because image-icons are used to display the
     tree-buffer. For this style the arguments TREE-INDENT and
     EXPAND-SYMBOL-BEFORE-P have no effect.

     Ascii-style with guide-lines (value `ascii-guides') and ascii-style
     without guidelines (value `ascii-no-guides'. See *Note Tree-buffer
     styles:: for details about the tree-styles.

     Both ascii-styles are affected by the args TREE-INDENT and
     EXPAND-SYMBOL-BEFORE-P.

`ASCII-GUIDE-FACE'
     If TREE-STYLE is `ascii-guides' then this defines the face the guides
     should be displayed with.

`TYPE-FACER:'
     Nil or a list of one or more conses, each cons for a node-type (a
     node-type is an integer which must be set with `tree-node-new').  The
     cdr of a cons can be:

        - a face-symbol

        - a function-symbol which gets two arguments (see
          `tree-buffer-insert-text'). This function can do anything, but
          normally it should face a tree-node.

        - the symbol t. Then the tree-buffer assumes that the node-text is
          already faced and therefore it does not face the node, means it does
          nothing then inserting the node-text, if the tree-buffer is updated.

`EXPAND-SYMBOL-BEFORE-P'
     If not nil then the expand-symbol is displayed before the node-text.
     Ignored when TREE-STYLE is `image' and Emacs can display images.

`HIGHLIGHT-NODE-FACE'
     Face used for highlighting current selected node in this tree-buffer.

`GENERAL-FACE'
     General face in which the whole tree-buffer should be displayed.

`AFTER-CREATE-HOOK:'
     A function or a list of functions (with no arguments) called directly
     after creating the tree-buffer and defining it's local keymap. For
     example such a function can add additional key-bindings for this
     tree-buffer local keymap (use `local-set-key' for this).

     Here is an example for such a hook:

        (defun ecb-common-after-tree-buffer-create-actions ()
          "Things which should be performed after creating a tree-buffer.
        The tree-buffer is the current buffer."
          (local-set-key (kbd "C-t")
                         'ecb-toggle-do-not-leave-window-after-select)
          (if ecb-running-xemacs
              (define-key modeline-map
                '(button2up)
                'ecb-toggle-maximize-ecb-window-with-mouse)
            (local-set-key [mode-line mouse-2]
                           'ecb-toggle-maximize-ecb-window-with-mouse)))

`AFTER-UPDATE-HOOK:'
     A function or a list of functions (with no arguments) called each time
     after the tree-buffer has been updated via `tree-buffer-update'.


Here is an example how to create a tree-buffer (if you want a tree-buffer not
for ECB then just strip off the `defecb-tree-buffer-creator' and just call
`tree-buffer-create'):

   (defecb-tree-buffer-creator ecb-create-analyse-tree-buffer
       ecb-analyse-buffer-name
     "Create the tree-buffer for analyse-display."
     (tree-buffer-create
      ecb-analyse-buffer-name
      :frame ecb-frame
      :mouse-action-trigger ecb-tree-mouse-action-trigger
      :is-click-valid-fn 'ecb-interpret-mouse-click
      :node-selected-fn 'ecb-tree-buffer-node-select-callback
      :node-expanded-fn 'ecb-tree-buffer-node-expand-callback
      :node-collapsed-fn 'ecb-tree-buffer-node-collapsed-callback
      :node-mouse-over-fn 'ecb-mouse-over-analyse-node
      :mouse-highlight-fn 'ecb-analyse-node-mouse-highlighted-p
      :node-data-equal-fn 'ecb-analyse-compare-node-data
      :maybe-empty-node-types nil
      :leaf-node-types nil
      :menu-creator 'ecb-analyse-menu-creator
      :menu-titles (ecb-analyse-gen-menu-title-creator)
      :modeline-menu-creator 'ecb-common-tree-buffer-modeline-menu-creator
      :trunc-lines (ecb-member-of-symbol/value-list
                    ecb-analyse-buffer-name
                    ecb-tree-truncate-lines)
      :read-only t
      :tree-indent ecb-tree-indent
      :incr-search-p t
      :incr-search-additional-pattern nil
      :arrow-navigation ecb-tree-navigation-by-arrow
      :hor-scroll-step ecb-tree-easy-hor-scroll
      :default-images-dir (car ecb-tree-image-icons-directories)
      :additional-images-dir (ecb-member-of-symbol/value-list
                              ecb-analyse-buffer-name
                              (cdr ecb-tree-image-icons-directories)
                              'car 'cdr)
      :image-file-prefix "ecb-"
      :tree-style ecb-tree-buffer-style
      :ascii-guide-face ecb-tree-guide-line-face
      :type-facer nil
      :expand-symbol-before-p ecb-tree-expand-symbol-before
      :highlight-node-face ecb-analyse-face
      :general-face ecb-analyse-general-face
      :after-create-hook (append
                          (list (lambda ()
                                  (ecb-common-after-create-actions)))
                          ecb-common-tree-buffer-after-create-hook
                          ecb-analyse-buffer-after-create-hook)
      :after-update-hook nil))


File: ecb.info,  Node: A new tree-node,  Next: Updating a tree-buffer,  Prev: A new tree-buffer,  Up: tree-buffer

11.3.3 How to create a new tree-node
------------------------------------

When a new tree-buffer has been created, then the most senseful
programming-task is adding some tree-nodes to it.

11.3.3.1 Content of a tree-node
...............................

A tree-node is an object which stores in special "slots" several data
necessary to link the node with other nodes, to display the node and to hold
some associated node-data (e.g. a tag created by the semantic-library).

A tree-node can have the following slots:

`NAME'
     The name of the node. Regardless how the node is displayed; see
     SHRINK-NAME and DISPLAYED-NAME.

`TYPE'
     The type of the node; must currently be an interger! The type is used to
     classify the nodes, so for example all nodes of a certain type can
     display the same popup-menu - see `tree-buffer-create' or *Note A new
     tree-buffer:: which parts of a tree-buffer are distinguished by
     node-types.

`DATA'
     The data of the node; This can be any arbitrary emacs-lisp-object.  This
     slots holds that data asscociated with the node and represented by the
     node in the tree-buffer. Example: Assume a tree-buffer displaying a
     directory-tree where each node just displays as its name the name of
     (sub)directories, but not the full path. The full path is stored in the
     DATA-slot of a node so when clicking onto this node the asscociated
     directory can be open for example in a dired-buffer.

`EXPANDABLE'
     If not nil then the node is expandable means it has children.

`EXPANDED'
     If not nil then the node is currently expanded, means its children are
     visible in the tree-buffers as subnodes of the node.

`PARENT'
     The parent tree-node. This is the link to the father (rsp. mother ;-) of
     the node. It must be a object of type tree-node!

`CHILDREN'
     List of children tree-nodes. They must be all objects of type tree-node!

`SHRINK-NAME'
     Decides if the NAME can be shortened when displayed in a narrow tree
     buffer window. The following values are valid:

        - `beginning': The NAME is truncated at the beginning so the end is
          always visible.

        - `end': The NAME is truncated at the end. If the tree-node is
          EXPANDABLE the name is truncated so that the expand symbol is
          visible.

        - `nil': The NAME is never truncated. In this case DISPLAYED-NAME is
          equal to NAME.

`INDENTSTR'
     Containes the full indentation-string for the node. So a single node can
     easily be redrawn.

`DISPLAYED-NAME'
     Contains the current displayed name of the node. The displayed name can
     be different from the NAME according to the value of SHRINK-NAME.


11.3.3.2 Creating a new tree-node and adding it to the tree
...........................................................

A new tree-node has to be created with the function `tree-node-new'. This
"constructor" accepts the following parameter: NAME, TYPE, DATA,
NOT-EXPANDABLE, PARENT and SHRINK-NAME.

For all parameters except NOT-EXPANDABLE the description is available in the
slot-description in the section above. If NOT-EXPANDABLE is set to not nil
then the slot EXPANDABLE will be set to `nil'; otherwise to `t'.

`tree-node-new' returns a new tree-node.

The new node can either being added implicitely to the tree via the optional
PARENT-parameter when calling `tree-buffer-new' or explicitely by first
creating the new node without setting the parent-node but later setting the
parent-node via the according accessor (see next section below). Children
should only being added with `tree-node-add-children' - see next section.

11.3.3.3 Accessing the slots of a tree-node
...........................................

The section above shows which slots a tree-node have.

A slot with name XXX is getable with the following piece of code:

   (tree-node->xxx <a tree node>)

Here is an example how to get the value of the slot DATA:

   (tree-node->data <a tree node>)

A slot with name XXX is setable with the following piece of code:

   (setf (tree-node->xxx <a tree node>) <new value>)

Again an example with slot DATA which sets this slot to the string
"~/a_subdir_of_HOME":

   (setf (tree-node->data <a tree node>) "~/a_subdir_of_HOME")

*IMPORTANT*: Adding new children to a node should always being done with the
function `tree-node-add-children' because this functions encapsulates all the
necessary stuff needed to add children to a node (mainly adding the children
itself and setting the node itself as parent for every children).

See *Note The tree-buffer-API:: for the rest of the API available for
tree-nodes.


File: ecb.info,  Node: Updating a tree-buffer,  Next: Tree-buffer keybindings,  Prev: A new tree-node,  Up: tree-buffer

11.3.4 How to update a tree-buffer-display after changes
--------------------------------------------------------

When finished with adding tree-nodes to the tree-structure you mostly want to
display the current tree and its state in the buffer/window so a user can see
the current tree and can use it.

Threre are two ways to update a tree-buffer for display:

  1. Updating the whole tree-buffer:

     This is the most used way to update the tree-buffer display. It's quite
     simple, just call `tree-buffer-update'. In most cases you want to call
     it without arguments.

     If you want to display a certain expanded node and as much as possible
     subnodes of this node then pass this node-object as first argument to
     `tree-buffer-update'.

     If you do not have the need to display a completely new tree-structure
     but you want only to display a previously cached display-state then pass
     this cached-state as second argument to `tree-buffer-update'. See the
     documentation of this function and also *Note Tree-buffer How to:: for a
     detailled description how to do this.

  2. Updating only a single node of the tree-buffer:

     Sometimes it can be useful to update only exactly one special node, e.g.
     when your application codes some node-state in the displayed node-name
     (e.g. ECB displays the version-control state of a file as part of the
     related node-name) then it is necessary to update only this node if the
     state has changed.

     This can be done with the function `tree-buffer-update-node'. For this
     function the mentioning in this section can be misleading because this
     function can not only update the node-display but in general the slots
     NAME, SHRINK-NAME, TYPE, DATA and EXPANDABLE. Do `C-h f' to see the
     documentation of this function for all details!



File: ecb.info,  Node: Tree-buffer keybindings,  Next: The tree-buffer-API,  Prev: Updating a tree-buffer,  Up: tree-buffer

11.3.5 Default and customizable keybindings of a tree-buffer
------------------------------------------------------------

When creating a tree-buffer with `tree-buffer-create' the following keys will
automatically being bound:

`delete'
`backspace'
`home'
`end'
`a' (and each other key bound to `self-insert-command')
     All of these keys are bound to the command
     `tree-buffer-incremental-node-search' if the argument INCR-SEARCH-P of
     `tree-buffer-create' was set to not nil.  See the documentation of
     `tree-buffer-incremental-node-search' for all details.

`RET'
`C-RET'
`S-RET'
`M-RET'
`C-S-RET'
`mouse-1'
`C-mouse-1'
`S-mouse-1'
`M-mouse-1'
`mouse-2'
`C-mouse-2'
`S-mouse-2'
`M-mouse-2'
     All these keys are bound to an action-dispatcher which works as follows:

     If the callback-function in slot IS-CLICK-VALID-FN of the tree-buffer
     (*note A new tree-buffer::) returns nil then nothing is done.

     If either `RET' has been hitted or point is as the node-name (i.e.  the
     user has clicked with the mouse-1/2 at the node-name) then the
     callback-function in slot NODE-SELECTED-FN is called with the needed
     arguments (*note A new tree-buffer::).

     If point is at the expand/collape-button then depending on the
     expansion-state of the node either the callback in slot NODE-EXPANDED-FN
     or NODE-COLLAPSED-FN is called (for parameters see again *Note A new
     tree-buffer::).

     *IMPORTANT*: None of these callbacks must modify the slot EXPANDED of
     the passed node because this is done automatically by the
     action-dispatcher!

     At the end the dispatcher updates the tree-buffer-display with optimized
     display of the clicked/selected node - see *Note Updating a
     tree-buffer::. This means `tree-buffer-update' is called with that node
     as argument.

`TAB'
     Depending on the expansion-state of the node either the callback in slot
     NODE-EXPANDED-FN or NODE-COLLAPSED-FN is called (for parameters see
     again *Note A new tree-buffer::).

     *IMPORTANT*: None of these callbacks must modify the slot EXPANDED of
     the passed node because this is done automatically by the
     action-dispatcher!

     At the end the the tree-buffer-display is updated with optimized display
     of the clicked/selected node - see *Note Updating a tree-buffer::. This
     means `tree-buffer-update' is called with that node as argument.

`mouse-3'
     Activates the popup-menu for the current tree-buffer for current
     node-type (if defined). See *Note A new tree-buffer:: at argument
     MENU-CREATOR and MENU-TITLES. These callbacks are called for getting the
     menu and the menu-title.

`modeline-mouse-3'
     Activates the popup-menu for the modeline of the current tree-buffer (if
     defined). See *Note A new tree-buffer:: at argument
     MODELINE-MENU-CREATOR. This callback is called for getting the
     modeline-menu.

`M-m'
     This key is bound to the command `tree-buffer-show-node-menu-keyboard':
     Activates the popup-menu of current tree-buffer for current node-type
     via keyboard. If called with a prefix-arg then the library `tmm.el' is
     used for displaying the popup-menu - ignored with XEmacs.

`<up>'
`<down>'
`<left>'
`<right>'
     These keys are bound to the command `tree-buffer-arrow-pressed' which
     implements the smart arrow-key-navigation described in *Note A new
     tree-buffer:: at argument ARROW-NAVIGATION.


In addition to these automatically bound keys you can add further keybindings
to the local-keymap of the tree-buffer with the parameter AFTER-CREATE-HOOK
of `tree-buffer-create'. See *Note A new tree-buffer:: for an example which
binds `C-t' in this hook.


File: ecb.info,  Node: The tree-buffer-API,  Next: Do not with tree-buffer,  Prev: Tree-buffer keybindings,  Up: tree-buffer

11.3.6 All functions available for tree-buffers and tree-nodes
--------------------------------------------------------------

This chapter lists the complete AI available for tree-buffers and tree-nodes.

*IMPORTANT*: These are the only functions and macros of tree-buffer.el you
are allowed to use for programming with tree-buffers and tree-nodes. If you
use other - not here listed - functions, macros or variables of
tree-buffer.el then you run the risk of unwanted side-effects or
program-behaviors!

11.3.6.1 The API for a tree-buffer:
...................................

See the documentation of these functions (e.g. via `C-h f') to get the
details how to use it.

   * `tree-buffer-add-image-icon-maybe'

   * `tree-buffer-find-image'

   * `tree-buffer-create'(1)

   * `tree-buffer-defpopup-command'

   * `tree-buffer-destroy'(2)

   * `tree-buffer-empty-p'

   * `tree-buffer-expand-node'

   * `tree-buffer-get-node-at-point'

   * `tree-buffer-node-data-equal-p'

   * `tree-buffer-recenter'

   * `tree-buffer-highlight-node-data'

   * `tree-buffer-remove-highlight'

   * `tree-buffer-remove-node'

   * `tree-buffer-clear-tree'

   * `tree-buffer-displayed-nodes-copy'

   * `tree-buffer-search-displayed-node-list'

   * `tree-buffer-number-of-displayed-nodes'

   * `tree-buffer-get-data-store'

   * `tree-buffer-set-data-store'

   * `tree-buffer-get-root'

   * `tree-buffer-set-root'

   * `tree-buffer-update'

   * `tree-buffer-update-node'

11.3.6.2 The API for a tree-node
................................

See the documentation of these functions (e.g. via `C-h f') to get the
details how to use it.

   * `tree-node-add-children'

   * `tree-node-linelength'

   * `tree-node-new'

   * `tree-node-new-root'

   * `tree-node-remove-child'

   * `tree-node-remove-child-by-data'

   * `tree-node-find-child-by-data'

   * `tree-node-find-child-by-name'

   * `tree-node-search-subtree-by-data'

   * `tree-node-sort-children'

   * `tree-node-toggle-expanded'

In addition to these functions the tree-node API contains all accessors for a
tree-node which are described in *Note A new tree-node::.

---------- Footnotes ----------

(1) If the tree-buffer should be used by ECB then you must use
`defecb-tree-buffer-creator' - see the documentation!

(2) Not needed when `defecb-tree-buffer-creator' has been used for creation.


File: ecb.info,  Node: Do not with tree-buffer,  Next: Tree-buffer How to,  Prev: The tree-buffer-API,  Up: tree-buffer

11.3.7 Things which are strictly forbidden
------------------------------------------

Variable `tree-buffers': Only for internal use! It contains all tree-buffers
of current Emacs-instance, means *all* tree-buffers of *all* applications
which uses currently tree-buffers. Every application must store its own
collection of tree-buffers in an own variable! For example: ECB stores its
tree-buffer set in `ecb-tree-buffers'!

Variable `tree-buffer-displayed-nodes': Only for internal use!  Contains all
the current visible nodes of current tree-buffer in top-to-bottom order. This
variable is buffer-local in each tree-buffer! Do not use it directly! When
you want to cache the current display, then see *Note Tree-buffer How to::
how to do this.

*IMPORTANT*: An application may only use the API tree-buffer.el provides but
no internal variables - see *Note The tree-buffer-API::!


File: ecb.info,  Node: Tree-buffer How to,  Prev: Do not with tree-buffer,  Up: tree-buffer

11.3.8 How to deal with certain programming-requirements
--------------------------------------------------------

This chapter describes in detail how to solve certain programming-challenges
with tree-buffers.

11.3.8.1 Caching the current tree-buffer display
................................................

Sometimes it can be useful or important to cache the current display of a
tree-buffer and display later exactly this cached display-state.  Here is how
to do this:

  1. Caching the display: You have to do two tasks: First store the current
     internal structure of the tree-buffer; you must do this with the function
     `tree-buffer-displayed-nodes-copy'. Then store the buffer-contents of
     that tree-buffer you want to cache; you can do this for example with
     `buffer-substring'. For both tasks you must make the tree-buffer the
     current-buffer.

  2. Displaying a previous tree-buffer-cache: Make the tree-buffer the
     current buffer, call `tree-buffer-update' and pass as second argument
     CONTENT the data you have stored in step 1. See the documentation of
     `tree-buffer-update' for details.

     Here is an example:

        (tree-buffer-update
          nil
          (cons (nth 2 cache-elem) ;; the stored buffer-string
                (nth 1 cache-elem) ;; the stored tree-structure
          )))


File: ecb.info,  Node: Adviced functions,  Next: The layout-engine,  Prev: tree-buffer,  Up: Elisp programming

11.4 How to deal with the adviced functions
===========================================

ECB needs a bunch of advices so ECB can work correctly. ECB has a powerful
advice-backbone which allows defining sets of adviced functions whereas a set
means, that all advices of a certain set are always enabled or disabled
together.

For this ECB contains three macros:

   - `defecb-advice-set'

   - `defecb-advice'

   - `ecb-with-original-adviced-function-set'

For a detailed explanation of each macro read the documentation with
`describe-function'!

An advice in ECB must not being defined by `defadvice' but only with
`defecb-advice' which in turn needs a previously defined advice-set defined
by `defecb-advice-set'.

So ECB has always full control of all advices. For example ECB automatically
disables all advices of all advice-sets at load-time of ECB and also at
deactivation time of ECB. So you can be sure that after deactivating ECB all
ecb-advices are deactivated/disabled too.

In addition to the three macros above ECB offers two further macros for
running code with disabled some ecb-advices:

   - `ecb-with-original-basic-functions'

   - `ecb-with-original-permanent-functions'

The advice set `ecb-basic-adviced-functions' contains most of the
ecb-advices. See the contents of this variable to see which advices are
contained in this set. Use `ecb-with-original-basic-functions' when you want
evaluating elisp-code with disabled basic-advices.
`ecb-with-original-basic-functions' is only a shortcut for
`ecb-with-original-adviced-function-set' called for the
`ecb-basic-adviced-functions'-set.

Same for `ecb-with-original-permanent-functions' which is a shortcut for the
advice-set `ecb-permanent-adviced-functions'.

Last but not least ECB contains an advice-set `ecb-always-disabled-advices'.
These advices are always disabled.  This advice-set can not be enabled by
`ecb-enable-advices' but such an advice has to be activated 'on demand' by
the caller. Such an advice must be used with the macro `ecb-with-ecb-advice'
(see the docstring).

ECB contains some more advice-sets but don't bother about it.


File: ecb.info,  Node: The layout-engine,  Prev: Adviced functions,  Up: Elisp programming

11.5 How to program new layouts and new special windows
=======================================================

There are two aspects concerning this topic:

  1. Programming a new layout which contains several special ECB-windows like
     directories, sources, methods, history or other special windows and
     arranging them in a new outline.

  2. Creating complete new special windows (e.g. a local-variable window for
     a graphical debugger like JDEbug of JDEE), adding them to a layout and
     synchronizing them with the current active edit-window.

The former one covers merely the layout-programming aspect which is explained
in the first subsection of this chapter whereas the latter one covers all
aspects of creating new special windows and what is necessary to synchronize
it with the current active edit-window of ECB. This is explained in the
second subsection which will refers to the first subsection.

* Menu:

* Programming a new layout::    How to program a new layout
* Programming special windows:: Aspects of programming special windows
* Possible layout-outlines::    The wide range of possible layouts
* The layout-engine API::       The complete layout-engine API


File: ecb.info,  Node: Programming a new layout,  Next: Programming special windows,  Prev: The layout-engine,  Up: The layout-engine

11.5.1 How to program a new layout
----------------------------------

If you just want creating a new layout with the standard ECB-windows like
directories, sources, methods, history and speedbar it's is strongly
recommended to define the new layout interactively with the command
`ecb-create-new-layout' (*note Creating a new ECB-layout::).

If you want creating a new layout and if this layout should contain other
special windows than the standard ECB-windows then it's still recommended to
define this layout interactively with `ecb-create-new-layout' and using the
option to give the created windows user-defined types. For every user defined
type you have then just to program the necessary buffer-set function. For all
the details see *Note Creating a new ECB-layout::.

But if you do not like the interactive way (because you are tough and brave)
but you want programming the new layout with Elisp then use the macro
`ecb-layout-define' (the following definition has stripped the prefix "ecb-"
for better indexing this manual):

 -- Macro: layout-define name type doc &rest create-code
     Creates a new ECB-layout with name NAME. TYPE is the type of the new
     layout and is literal, i.e. not evaluated. It can be left, right, top or
     left-right. DOC is the docstring for the new layout-function
     "ecb-layout-function-<name>". CREATE-CODE is all the lisp code which is
     necessary to define the ECB-windows/buffers. This macro adds the layout
     with NAME and TYPEto the internal variable `ecb-available-layouts'.

     Preconditions for CREATE-CODE:
       1. Current frame is splitted at least in one edit-window and the
          "column" (for layout types left, right and left-right) rsp. "row"
          (for a top layout) for the special ECB-windows/buffers. The width of
          the "column" rsp. the height of the "row" is always defined with
          the option `ecb-windows-width' rsp. `ecb-windows-height'.
          Depending on the value of the option `ecb-compile-window-height'
          there is also a compile window at the bottom of the frame which is
          stored in `ecb-compile-window'.

       2. All windows are not dedicated.

       3. Neither the edit-window nor the compile-window (if there is one) are
          selected for types left, right and top. For type left-right the left
          column-window is selected

       4. All ECB-advices of the advice-sets `ecb-basic-adviced-functions'
          and `ecb-permanent-adviced-functions' are disabled.

     Things CREATE-CODE has to do:
       1. Splitting the ECB-tree-windows-column(s)/row (s.a.) in all the
          ECB-windows the layout should contain (directories, sources, methods
          and history). The split must not be done with other functions than
          `ecb-split-hor' and `ecb-split-ver'! It is recommended not to to
          use a "hard" number of split-lines or -rows but using fractions
          between -0.9 and +0.9! Tip: It is recommended to spilt from right to
          left and from bottom to top or with other words: First create the
          right-most and bottom-most special windows!

       2. Making each special ECB-window a dedicated window. This can be done
          with one of the following functions:
             - `ecb-set-directories-buffer'

             - `ecb-set-sources-buffer'

             - `ecb-set-methods-buffer'

             - `ecb-set-history-buffer'

             - `ecb-set-speedbar-buffer'
          Each layout can only contain one of each tree-buffer-type!

          In addition to these functions there is a general macro:
          `defecb-window-dedicator': This macro defines a so called
          "window-dedicator" which is a function registered at ECB and called
          by ECB to perform any arbitrary code in current window and makes the
          window autom. dedicated at the end. This can be used by third party
          packages like JDEE to create arbitrary ECB-windows besides the
          standard tree-windows.

          To make a special ECB-window a dedicated window either one of the
          five functions above must be used or a new
          "window-dedicator"-function has to be defined with
          `defecb-window-dedicator' and must be used within the
          layout-definition.

       3. Every(!) special ECB-window must be dedicated as described in 2.

       4. CREATE-CODE must work correctly regardless if there is already a
          compile-window (stored in `ecb-compile-window') or not
          (`ecb-compile-window' is nil).

     Things CREATE-CODE can do or can use:
       1. The value of `ecb-compile-window' which contains the compile-window
          (if there is one). Using the values of `ecb-compile-window-height',
          `ecb-windows-width', `ecb-windows-height'.

     Things CREATE-CODE must NOT do:
       1. Splitting the edit-window

       2. Creating a compile-window

       3. Deleting the edit-window, the compile-window (if there is any) or
          the ECB-windows-column(s)/row (see Precondition 1.)

       4. Referring to the value of `ecb-edit-window' because this is always
          nil during CREATE-CODE.

     Postconditions for CREATE-CODE:
       1. The edit-window must be the selected window and must not be
          dedicated and not be splitted.

       2. Every window besides the edit-window (and the compile-window) must
          be a dedicated window (e.g. a ECB-tree-window).

Use this macro to program new layouts within your `.emacs' or any other file
which is loaded into your Emacs. After loading the file(s) with all the new
layout-definitions you can use it by customizing the option `ecb-layout-name'
to the appropriate name or with the command `ecb-change-layout'.

With the function `ecb-layout-undefine' you can remove a layout from the list
of available layouts:

 -- Function: layout-undefine name
     Unbind ecb-layout-function-<NAME> and
     ecb-delete-window-ecb-windows-<NAME> and remove `NAME' from
     `ecb-available-layouts'.

Here is an example for a new layout programmed with `ecb-layout-define':

   (ecb-layout-define "my-own-layout" left nil
     ;; The frame is already splitted side-by-side and point stays in the
     ;; left window (= the ECB-tree-window-column)

     ;; Here is the creation code for the new layout

     ;; 1. Defining the current window/buffer as ECB-methods buffer
     (ecb-set-methods-buffer)
     ;; 2. Splitting the ECB-tree-windows-column in two windows
     (ecb-split-ver 0.75 t)
     ;; 3. Go to the second window
     (other-window 1)
     ;; 4. Defining the current window/buffer as ECB-history buffer
     (ecb-set-history-buffer)
     ;; 5. Make the ECB-edit-window current (see Postcondition above)
     (select-window (next-window)))

This layout definition defines a layout with name "my-own-layout" which looks
like:

   -------------------------------------------------------
   |              |                                      |
   |              |                                      |
   |              |                                      |
   |  Methods     |                                      |
   |              |                                      |
   |              |                                      |
   |              |               Edit                   |
   |              |                                      |
   |              |                                      |
   |--------------|                                      |
   |              |                                      |
   |  History     |                                      |
   |              |                                      |
   -------------------------------------------------------
   |                                                     |
   |                    Compilation                      |
   |                                                     |
   -------------------------------------------------------


File: ecb.info,  Node: Programming special windows,  Next: Possible layout-outlines,  Prev: Programming a new layout,  Up: The layout-engine

11.5.2 All aspects of programming special windows
-------------------------------------------------

ECB offers a flexible programmable layout-engine for other packages to
display their own contents and informations in special ECB-windows. An
example could be a graphical debugger which offers a special window for
displaying local variables and another special window for messages from the
debugger-process (like JDEbug of JDEE(1)).

This section explains all aspects of programming new special windows, adding
them to a new layout and synchronizing them with edit-window of ECB. This can
be done best with an easy example which nevertheless covers all necessary
aspects to be a good example and skeleton for complex tools (like a graphical
debugger) which want to use the layout-engine of ECB do display their own
information.

*IMPORTANT*: See *Note tree-buffer:: for a full documentation of the library
tree-buffer.el which can be used for programming a new special window as a
tree!

Here comes the example:

11.5.2.1 The outline of the example layout:
...........................................

   -------------------------------------------------------
   |Bufferinfo for <filename>:            |[prior]       |
   |Type: file                            |[next]        |
   |Size: 23456                           |              |
   |Modes: rw-rw-rw-                      |              |
   |-----------------------------------------------------|
   |                                                     |
   |                                                     |
   |                                                     |
   |                                                     |
   |                 edit-window                         |
   |                                                     |
   |                                                     |
   |                                                     |
   |                                                     |
   -------------------------------------------------------
   |                                                     |
   |                 compilation-window                  |
   |                                                     |
   -------------------------------------------------------

11.5.2.2 The description of the layout-contents
...............................................

The top-left window always displays informations about the current buffer in
the selected edit-window. This window demonstrates how autom. synchronizing a
special window/buffer of a layout with current edit-window.

The top-right window contains an read-only "action-buffer" and offers two
buttons which can be used with the middle mouse-button to scroll the
edit-window. This is not very senseful but it demonstrates how to control the
edit-window with actions performed in a special window/buffer of a layout.

(If you have not set a compilation-window in `ecb-compile-window-height' then
the layout contains no persistent compilation window and the other windows
get a little more place).

11.5.2.3 The example code
.........................

Now let have us a look at the several parts of the Elisp-program needed to
program this new example layout. ECB contains a library `ecb-examples.el'
which contains the full working code of this example. To test this example
and to play with it you can load this library into Emacs (with `load-library'
for example) and then calling `ecb-change-layout' (bound to `C-c . lc') and
inserting "example-layout1" as layout-name. An alternative is calling
`ecb-examples-activate' and `ecb-examples-deactivate'. For details see file
`ecb-examples.el'.

The following steps only contain code-skeletons to demonstrate the principle.
The full working code is available in `ecb-examples.el'.

11.5.2.4 The bufferinfo buffer of the example
.............................................

The name of the bufferinfo buffer:

   (defconst ecb-examples-bufferinfo-buffer-name " *ECB buffer info*")

Two helper functions for displaying infos in a special buffer:

   (defun ecb-examples-print-file-attributes (buffer filename)
     (ecb-with-readonly-buffer buffer
       (erase-buffer)
       (insert (format "Bufferinfo for %s:\n\n" filename))
       ;; insert with the function `file-attributes' some
       ;; informations about FILENAME.
       ))

   (defun ecb-examples-print-non-filebuffer (buffer buffer-name)
     (ecb-with-readonly-buffer buffer
       (erase-buffer)
       ;; analogous to `ecb-examples-print-file-attributes'
       ))

The main synchronizing function added to `ecb-current-buffer-sync-hook' for
autom. evaluation by `ecb-current-buffer-sync' which runs dependent on the
values of `ecb-window-sync' and `ecb-window-sync-delay'. This function
synchronizes the bufferinfo buffer with the current buffer of the edit-window
if that buffer has changed.

   (defun ecb-examples-bufferinfo-sync ()
     (ecb-do-if-buffer-visible-in-ecb-frame
         'ecb-examples-bufferinfo-buffer-name

       ;; here we can be sure that the buffer with name
       ;; `ecb-examples-bufferinfo-buffer-name' is displayed in a
       ;; window of `ecb-frame'

       ;; The macro `ecb-do-if-buffer-visible-in-ecb-frame' locally
       ;; binds the variables visible-buffer and visible-window!! See
       ;; documentation of this macro!

       (let ((filename (buffer-file-name (current-buffer))))

         (if (and filename (file-readable-p filename))

             ;; real filebuffers
             ;; here we could add a smarter mechanism;
             ;; see ecb-examples.el
             (ecb-examples-print-file-attributes visible-buffer
                                                 filename)

           ;; non file buffers like help-buffers etc...
           (setq ecb-examples-bufferinfo-last-file nil)
           (ecb-examples-print-non-filebuffer visible-buffer
                                              (buffer-name
                                                (current-buffer)))
           ))))

Two conveniance commands for the user:

   (defun ecb-maximize-bufferinfo-window ()
     "Maximize the bufferinfo-window.
   I.e. delete all other ECB-windows, so only one ECB-window and the
   edit-window\(s) are visible \(and maybe a compile-window). Works
   also if the ECB-analyse-window is not visible in current layout."
     (interactive)
     (ecb-display-one-ecb-buffer ecb-examples-bufferinfo-buffer-name))

   (defun ecb-goto-bufferinfo-window ()
     "Make the bufferinfo-window the current window."
     (interactive)
     (ecb-goto-ecb-window ecb-examples-bufferinfo-buffer-name))

The function which makes the bufferinfo-buffer dedicated to a window and
registers the new special window/buffer at ECB.

   (defecb-window-dedicator ecb-examples-set-bufferinfo-buffer
       ecb-examples-bufferinfo-buffer-name
     "Set the buffer in the current window to the bufferinfo-buffer
   and make this window dedicated for this buffer."
     (switch-to-buffer (get-buffer-create
                         ecb-examples-bufferinfo-buffer-name))
     (setq buffer-read-only t))

This is all what we need for the special bufferinfo buffer. We have
demonstrated already three of the important functions/macros of the
layout-engine API of ECB: `ecb-with-readonly-buffer',
`ecb-do-if-buffer-visible-in-ecb-frame' and `defecb-window-dedicator' (*note
The layout-engine API::.  Especially the second macro is strongly recommended
for programming good synchronizing functions which do not waste CPU!

11.5.2.5 The action buffer of the example
.........................................

The name of the action-buffer:

   (defconst ecb-examples-action-buffer-name " *ECB action buffer*")

Two helper functions for creating a readonly action-buffer with a special
local key-map for the middle-mouse-button and two buttons [prior] and [next]:

   (defun ecb-examples-insert-text-in-action-buffer (text)
     (let ((p (point)))
       (insert text)
       (put-text-property p (+ p (length text)) 'mouse-face
                                                'highlight)))

   (defun ecb-examples-action-buffer-create ()
     (save-excursion
       (if (get-buffer ecb-examples-action-buffer-name)
           (get-buffer ecb-examples-action-buffer-name)

         (set-buffer (get-buffer-create
                       ecb-examples-action-buffer-name))

         ;; we setup a local key-map and bind middle-mouse-button
         ;; see ecb-examples.el for the full code

         ;; insert the action buttons [prior] and [next] and
         ;; make it read-only

         (ecb-with-readonly-buffer (current-buffer)
           (erase-buffer)
           (ecb-examples-insert-text-in-action-buffer "[prior]")
           ;; analogous for the [next] button
           )

         (current-buffer))))

The function which performs the actions in the action-buffer if clicked with
the middle-mouse button onto a button [next] or [prior].

   (defun ecb-examples-action-buffer-clicked (e)
     (interactive "e")
     (mouse-set-point e)
     (let ((line (buffer-substring (ecb-line-beginning-pos)
                                   (ecb-line-end-pos))))
       (cond ((string-match "prior" line)
              (ecb-select-edit-window)
              (call-interactively 'scroll-down))
             ((string-match "next" line)
              ;; analogous for [next]
              ))))

Two conveniance-commands for the user:

   (defun ecb-maximize-action-window ()
     "Maximize the action-window.
   I.e. delete all other ECB-windows, so only one ECB-window and the
   edit-window\(s) are visible \(and maybe a compile-window). Works
   also if the ECB-analyse-window is not visible in current layout."
     (interactive)
     (ecb-display-one-ecb-buffer ecb-examples-action-buffer-name))

   (defun ecb-goto-action-window ()
     "Make the action-window the current window."
     (interactive)
     (ecb-goto-ecb-window ecb-examples-action-buffer-name))

The function which makes the action-buffer dedicated to a window and
registers it at ECB.

   (defecb-window-dedicator ecb-examples-set-action-buffer
       (buffer-name (ecb-examples-action-buffer-create))
     "Set the buffer in the current window to the action-buffer
   and make this window dedicated for this buffer."
     (switch-to-buffer (buffer-name (ecb-examples-action-buffer-create))))

We do not need more code for the action buffer. All of the code is standard
emacs-lisp which would also needed if used without ECB. You see that you can
use any arbitrary code as second argument for `defecb-window-dedicator' as
long it returns a buffer-name.

11.5.2.6 Adding the bufferinfo- and action-buffer to a new layout
.................................................................

Now we add the bufferinfo- and the action-buffer to a new layout of type top
with name "example-layout1":

   (ecb-layout-define "example-layout1" top

     ;; dedicating the bufferinfo window to the bufferinfo-buffer
     (ecb-examples-set-bufferinfo-buffer)

     ;; creating the action-window
     (ecb-split-hor 0.75)

     ;; dedicate the action window to the action-buffer
     (ecb-examples-set-action-buffer)

     ;; select the edit-window
     (select-window (next-window)))

This all what we need to define the new layout. See *Note Programming a new
layout:: for more details of the pure layout-programming task.

11.5.2.7 Synchronizing the bufferinfo-buffer automatically
..........................................................

The last thing we have to do is to synchronize the bufferinfo-buffer with
current edit-window. We do this by adding `ecb-examples-bufferinfo-sync' to
the hook `ecb-current-buffer-sync-hook'' (The file `ecb-examples.el' shows a
smarter mechanism for (de)activating the new layout and the synchronization
but this works also very well).

   (add-hook 'ecb-current-buffer-sync-hook 'ecb-examples-bufferinfo-sync)

11.5.2.8 Activating and deactivating new layouts
................................................

Because a set of new special windows integrated in a new layout is often just
the GUI of a complete tool (like a graphical debugger) we demonstrate here
the complete activation and deactivation of such a tool or at least of the
tool-GUI. We decide that the GUI of our example "tool" needs a compile-window
with height 5 lines and the height of the special windows "row" on top should
be exactly 6 lines (normally width and height of the special windows should
be a fraction of the frame, but here we use 6 lines(2)

Here comes the (de)activation code.

The code for saving and restoring the state before activation (the full code
is available in `ecb-examples.el':

   (defun ecb-examples-preactivation-state(action)
     (cond ((equal action 'save)
            ;; code for saving the state
            )
           ((equal action 'restore)
           ;; code for restoring the state
           )))

The following function activates the GUI of our example tool:

   (defun ecb-examples-activate ()
     (interactive)

     ;; activating the synchronization of the bufferinfo-window
     (add-hook 'ecb-current-buffer-sync-hook
               'ecb-examples-bufferinfo-sync)

     ;; saving the state
     (ecb-examples-preactivation-state 'save)

     ;; switch to our preferred layout
     (setq ecb-windows-height 6)
     (setq ecb-compile-window-height 5)
     (ecb-layout-switch "example-layout1"))

This function deactivates the GUI of our example-tool and restores the state
as before activation:

   (defun ecb-examples-deactivate ()
     (interactive)

     (remove-hook 'ecb-current-buffer-sync-hook
                  'ecb-examples-bufferinfo-sync)
     (ecb-examples-preactivation-state 'restore)
     (ecb-layout-switch ecb-layout-name))

Now we have all code for the new layout and the new layout-buffers.  The
example is ready for use; just load `ecb-examples.el' (s.a.).

---------- Footnotes ----------

(1) JDEE is available at `http://jdee.sunsite.dk/'

(2) You can change the code in the file `ecb-examples.el' to use a
frame-fraction of 0.2 instead of 6 hard lines, just try it!


File: ecb.info,  Node: Possible layout-outlines,  Next: The layout-engine API,  Prev: Programming special windows,  Up: The layout-engine

11.5.3 The wide range of possible layout-outlines
-------------------------------------------------

In the two previous sections *Note Programming a new layout:: and *Note
Programming special windows:: we have explained in detail how to program new
layouts and how to program new special windows/buffers and adding them to a
new layout.

The intention of this section is to be a summary what are the real
restrictions for a new layout-outline programmed with `ecb-layout-define'.
This is necessary because until now we just programmed "obvious" layouts,
means layout which are in principle very similar to the standard ones which
means one big edit-window and some special windows "around" this edit-window.
This section will show you that a layout can have also very different
outlines.

OK, here are the real restrictions and conditions for a layout programmed
with `ecb-layout-define':
  1. It must have exactly one edit-window regardless of its size. The user of
     this layout can later split this edit-window in as many edit-windows as
     he like.

  2. All other windows created within the CREATE-CODE body of
     `ecb-layout-define' (*note Programming a new layout::) must be dedicated
     to their buffers.

  3. All the dedicated windows must (exclusive!) either reside on the left,
     right, top or left-and-right side of the edit-window. This will be
     defined with the TYPE-argument of `ecb-layout-define' (*note Programming
     a new layout::).

You see, there are only three restrictions/conditions. These and only these
must be fulfilled at layout-programming.

Demonstrating what this really means and how flexible the layout-engine of
ECB really is, can be done best with some "pathological" layout-outlines. All
the following are correct layouts (working code is added below each layout):

The following is a top layout with three vertical layered special windows.

   ------------------------------------------------------------------
   |                                                                |
   |                 Upper special window                           |
   |                                                                |
   |----------------------------------------------------------------|
   |                                                                |
   |                 Middle special window                          |
   |                                                                |
   |----------------------------------------------------------------|
   |                                                                |
   |                 Lower special window                           |
   |                                                                |
   |================================================================|
   |                                                                |
   |                         Edit-area                              |
   |      (can be splitted by the user in several edit-windows)     |
   ------------------------------------------------------------------
   |                                                                |
   |                 Compilation-window (optional)                  |
   |                                                                |
   ------------------------------------------------------------------

Here is the code for that top layout (all buffers are dummy-buffers):


   ;; The "window dedicator" functions:

   (defecb-window-dedicator ecb-set-usw-buffer "Upper special window"
     (switch-to-buffer (get-buffer-create "Upper special window")))

   (defecb-window-dedicator ecb-set-msw-buffer "Middle special window"
     (switch-to-buffer (get-buffer-create "Middle special window")))

   (defecb-window-dedicator ecb-set-lsw-buffer "Lower special window"
     (switch-to-buffer (get-buffer-create "Lower special window")))

   ;; The layout itself:

   (ecb-layout-define "example-layout3" top
     nil

     ;; here we have an edit-window and above one top window which we can
     ;; now split in several other windows. Dependent on the value of
     ;; `ecb-compile-window-height' we have also a compile-window at the
     ;; bottom.

     (ecb-set-usw-buffer)
     (ecb-split-ver 0.33)
     (ecb-set-msw-buffer)
     (ecb-split-ver 0.5)
     (ecb-set-lsw-buffer)

     ;; select the edit-window.
     (select-window (next-window)))

The following is a left-right layout which has six special windows in the
left-"column" and one big special window in the right-"column". For
left-right layouts the left-"column" and the right-"column" have always the
same width.

   ------------------------------------------------------------------
   |             |       |                   |                      |
   | Left1       | Left5 |                   |                      |
   |             |       |                   |                      |
   |-------------|       |                   |                      |
   |      |      |       |                   |                      |
   |      |      |       |                   |                      |
   |      |      |       |                   |                      |
   | Left2| Left3|-------|     Edit-area     |   Right1             |
   |      |      |       | (can be splitted  |                      |
   |      |      |       |  in several edit- |                      |
   |      |      |       |      windows)     |                      |
   |-------------|       |                   |                      |
   |             |       |                   |                      |
   | Left4       | Left6 |                   |                      |
   |             |       |                   |                      |
   ------------------------------------------------------------------
   |                                                                |
   |                 Compilation-window (optional)                  |
   |                                                                |
   ------------------------------------------------------------------

Here is the code for that left-right layout, again with dummy-buffers
(depending to your screen-resolution you will need a quite big value for
`ecb-windows-width', e.g. 0.4):

Here is one of the "window dedicator"-functions(1):

   (defecb-window-dedicator ecb-set-left1-buffer "Left1"
     (switch-to-buffer (get-buffer-create "Left1")))

Here is the layout-definition itself:

   (ecb-layout-define "example-layout2" left-right
     nil

     ;; here we have an edit-window and left and right two windows each
     ;; with width `ecb-windows-width'. Dependent to the value of
     ;; `ecb-compile-window-height' we have also a compile-window at the
     ;; bottom.

     (ecb-set-left1-buffer)
     (ecb-split-hor 0.66 t)
     (ecb-split-ver 0.75)
     (ecb-set-left4-buffer)
     (select-window (previous-window (selected-window) 0))
     (ecb-split-ver 0.25 nil t)
     (ecb-set-left2-buffer)
     (ecb-split-hor 0.5)
     (ecb-set-left3-buffer)
     (select-window (next-window (next-window)))
     (ecb-set-left5-buffer)
     (ecb-split-ver 0.5)
     (ecb-set-left6-buffer)
     (select-window (next-window (next-window)))
     (ecb-set-right1-buffer))

     ;; select the edit-window
     (select-window (previous-window (selected-window) 0)))

Especially the last example should demonstrate that even very complicated
layouts are easy to program with `ecb-layout-define'.  If such layouts are
senseful is another topic ;-)

---------- Footnotes ----------

(1) The "window dedicators" for all these ecb-windows/buffers are not
explicitly described - they look all like `ecb-set-left1-buffer' - of course
with different buffer-names!


File: ecb.info,  Node: The layout-engine API,  Prev: Possible layout-outlines,  Up: The layout-engine

11.5.4 The complete layout-engine API of ECB
--------------------------------------------

This section lists all functions, macros, variables and user-options the
layout-engine API of ECB offers foreign packages. Call `describe-function'
rsp. `describe-variable' to get a detailed description.

Functions and macros for programming with layouts and special ecb-windows:
   - `defecb-window-dedicator'

   - `ecb-available-layouts-member-p'

   - `ecb-canonical-ecb-windows-list'

   - `ecb-canonical-edit-windows-list'

   - `ecb-compile-window-live-p'

   - `ecb-compile-window-state'

   - `ecb-do-if-buffer-visible-in-ecb-frame'

   - `ecb-exec-in-window'

   - `ecb-get-current-visible-ecb-buffers'

   - `ecb-layout-define'

   - `ecb-layout-switch'

   - `ecb-layout-undefine'

   - `ecb-point-in-compile-window'

   - `ecb-point-in-ecb-window'

   - `ecb-point-in-edit-window'

   - `ecb-select-edit-window'

   - `ecb-split-hor'

   - `ecb-split-ver'

   - `ecb-where-is-point'

   - `ecb-with-dedicated-window'(1)

Utility functions/macros:
   - `ecb-display-one-ecb-buffer'

   - `ecb-enlarge-window'

   - `ecb-fix-filename'

   - `ecb-goto-ecb-window'

   - `ecb-window-live-p'

   - `ecb-with-readonly-buffer'

Some other maybe useful functions/macros:
   - `ecb-with-adviced-functions'

   - `ecb-with-original-functions'

   - `ecb-with-some-adviced-functions'

Some useful *READONLY* variables:
   - `ecb-compile-window'

   - `ecb-last-edit-window-with-point'

   - `ecb-last-source-buffer'

*Caution*: DO NOT USE THE VARIABLE `ecb-edit-window' IN YOUR PROGRAMS!

User-options and hooks related to the layout-engine API:
   - `ecb-current-buffer-sync-hook'

   - `ecb-hide-ecb-windows-after-hook'

   - `ecb-hide-ecb-windows-before-hook'

   - `ecb-redraw-layout-after-hook'

   - `ecb-redraw-layout-before-hook'

   - `ecb-show-ecb-windows-after-hook'

   - `ecb-show-ecb-windows-before-hook'

   - `ecb-windows-height'

   - `ecb-windows-width'

   - `ecb-compile-window-height'

---------- Footnotes ----------

(1) Normally not needed because `defecb-window-dedicator' does all necessary.


File: ecb.info,  Node: Conflicts and bugs,  Next: FAQ,  Prev: Elisp programming,  Up: Top

12 Conflicts and bugs of ECB
****************************

This chapter describes what to do when there are conflicts with other
packages and also the known (and currently unfixed) bugs of ECB. If possible
(and in most cases it is possible ;-) then a practicable solution or
workaround is described.

* Menu:

* Conflicts::                   Conflicts with other packages
* Bugs::                        Known bugs


File: ecb.info,  Node: Conflicts,  Next: Bugs,  Prev: Conflicts and bugs,  Up: Conflicts and bugs

12.1 Conflicts with other packages
==================================

This chapter contains a list of already known conflict between ECB and other
packages and how to solve them - in most cases ECB already contains a
suitable workaround.

That is followed by a general recipe what you can do when you have detected a
conflict between ECB and a package is not listed in the
know-conflicts-section.

12.1.1 Proved workarounds or recommendations for other packages
---------------------------------------------------------------

Here is a list of packages which are proved to work properly with ECB and if
not (i.e. there are conflicts) then helpful solutions/hints/workarounds are
offered:

12.1.1.1 Package bs.el
......................

The package bs.el offers a nifty buffer-selection buffer. The main command of
this package is `bs-show'. With ECB < 2.20 this command does not really
working well within activated ECB. But as of version 2.20 of ECB there should
be no problems using this package.

If you add "*buffer-selection*" as buffer-name to the option
`ecb-compilation-buffer-names' then ECB will always display the
buffer-selection buffer of bs in the compile-window (if there is one).
Otherwise bs will use the edit-area to do its job.

12.1.1.2 Package BBDB
.....................

As of ECB 2.21 there should be no conflicts between BBDB and ECB, so BBDB can
be used even when the ECB-windows are visible.

But if you encounter problems then it is recommened to use one of the
window-managers escreen.el or winring.el (*note Window-managers and ECB::).
With such a window-manager ECB and BBDB should work together very well under
all circumstances!

12.1.1.3 Package calendar.el
............................

With activated ECB `calendar' does not shrink its window to the small size
but splits the window equally. But if you add this to your `.emacs' it works:

   (add-hook 'initial-calendar-window-hook
             (function (lambda ()
                         (when (and ecb-minor-mode
                                    (ecb-point-in-edit-window))
                           ;; if no horizontal split then nothing
                           ;; special to do
                           (or (= (frame-width) (window-width))
                               (shrink-window (- (window-height) 9))))
                        )))

12.1.1.4 Package cygwin-mount.el
................................

There can be a conflict between ECB and cygwin-mount.el if the following
conditions are true:

   - You are working with cygwin-mount.el (sounds clear :-)

   - You have set `cygwin-mount-build-mount-table-asynch' to not nil

   - ECB is automatically started after starting Emacs (e.g. with
     `ecb-auto-activate' or calling `ecb-activate' in `window-setup-hook')

   - Your Emacs-setup contains a call of `cygwin-mount-activate'.

Under these circumstances Emacs 21.X sometimes eats up the whole CPU (at
least with Windows XP) and the cygwin-mount-table is never build.

But there is an easy work-around: Call `cygwin-mount-activate' first *AFTER*
ECB is activated. This can be done with the hook `ecb-activate-hook':

   (add-hook 'ecb-activate-hook
             (function (lambda ()
                         (require 'cygwin-mount)
                         (setq cygwin-mount-build-mount-table-asynch t)
                         (cygwin-mount-activate))))

12.1.1.5 Package desktop.el
...........................

ECB works perfectly with the desktop-saver desktop.el. But to ensure this the
option `desktop-minor-mode-table' *MUST* contain the following entry:

   (ecb-minor-mode nil)

Without this entry desktop.el tries for each buffer it loads after
Emacs-start to enable `ecb-minor-mode' and therefore to start ECB. This
conflicts with ECB! Therefore you must add the entry above to
`desktop-minor-mode-table'!

Further it is strongly recommended to add entries for all the minor-mode of
the semantic-package to `desktop-minor-mode-table', so for example add also:

   (semantic-show-unmatched-syntax-mode nil)
   (semantic-stickyfunc-mode nil)
   (senator-minor-mode nil)
   (semantic-idle-scheduler-mode nil)

Which modes you have to add depends on which modes of semantic you use. But
to get sure you should add all minor-modes of the semantic-package because
these modes are normally activated by the related "global" command (e.g.
`global-semantic-show-unmatched-syntax-mode') or by adding the minor-mode to
the related major-mode-hook.

It has also been reported that just disabling the Tip-Of-The-Day (option:
`ecb-tip-of-the-day') fixes the compatibility-problems with desktop.el. Just
try it out!

12.1.1.6 Package edebug (Lisp Debugger)
.......................................

It is strongly recommended to run edebug only when the ECB-windows are
hidden. With visible ECB-windows there will probably serious conflicts
between the ECB-layout and the edebug-window-manager.

12.1.1.7 Package ediff.el
.........................

In most cases ECB works very well with ediff (see option
`ecb-run-ediff-in-ecb-frame'). But currently suspending ediff with
`ediff-suspend' and restoring the ediff-session (e.g. with command
`eregistry') does confuse the window-management of ECB.

If you often use ediff in a scenario where you suspend ediff and reactivate
it later then it is recommended to exit ECB first (`ecb-deactivate' or
`ecb-minor-mode')!

12.1.1.8 Package func-menu.el
.............................

This package has been reported to produce some conflicts under some
circumstances when ECB is activated. Some of them could be reproduced by the
ECB-maintainer. So the recommendation is to disable func-menu-support when
using ECB. Normally using func-menu makes no sense in combination with ECB
because ECB provides the same and even more informations as func-menu - so
func-menu is redundant ;-)

12.1.1.9 Package Gnus (Newsreader)
..................................

As of ECB 2.21 there should be no conflicts between Gnus and ECB, so Gnus can
be used even when the ECB-windows are visible.

But if you encounter problems then it is recommened to use one of the
window-managers escreen.el or winring.el (*note Window-managers and ECB::).
With such a window-manager ECB and Gnus should work together very well under
all circumstances!

12.1.1.10 Package JDEE (Java Development Environment)
.....................................................

JDEE has a lot of "dialogs" where the user can select among several choices.
An example is importing classes via the command `jde-import-find-and-import'.
These dialogs are strongly designed to work in an environment where a new
temporary window is created, the contents of the dialog are displayed in the
new window, the user select his choice and hits [OK]. After that the new
window is deleted and the selection is performed (for example the chosen
import statement are inserted in the source-buffer.

*Caution*: ECB can work very well with this dialogs but only if the
buffer-name of these dialog-buffers (normally "Dialog") is not contained in
the option `ecb-compilation-buffer-names'. So do not add the string "Dialog"
to this option!

*Please Note*: Regardless if a persistent compile-window is used (i.e.
`ecb-compile-window-height' is not nil) or not, these JDEE-dialogs will
always being displayed by splitting the edit-window of ECB and not within the
compile-window.

12.1.1.11 Package scroll-all.el (scroll-all-mode)
.................................................

ECB advices `scroll-all-mode' so it is working correct during running ECB.
This means if point stays in an edit-window and the edit-window is splitted
then all edit-windows are scrolled by `scroll-all-mode' and no other window!
If point stays in any other window just this selected window is scrolled.
This is the only senseful behavior of `scroll-all-mode' with ECB.

12.1.1.12 Package VC (Version Control)
......................................

The variable `vc-delete-logbuf-window' must be set to nil during active ECB.
This can be done with the hooks mentioned in *Note Elisp programming::.

12.1.1.13 Package VM (Emacs Mail-Client)
........................................

As of ECB 2.21 there should be no conflicts between VM and ECB, so VM can be
used even when the ECB-windows are visible.

But if you encounter problems then it is recommened to use one of the
window-managers escreen.el or winring.el (*note Window-managers and ECB::).
With such a window-manager ECB and VM should work together very well under
all circumstances!

12.1.1.14 Package winner.el (winner-mode)
.........................................

`winner-mode' is autom. disabled as long as ECB is running. ECB has its own
window-management which is completely incompatible with `winner-mode'! But
`winner-mode' makes also not really sense with ECB.

12.1.1.15 Package wb-line-number.el
...................................

Do not use the package wb-line-number.el in combination with ECB - it will
not work and it will not work under any circumstances and there is no way to
make it work together and there will be no way in the future!

The reason behind that is: wb-line-number.el uses additional dedicated
windows to display the line-numbers. And ECB can not work if there there are
additional dedicated windows - additional to that ones created by ECB.

12.1.1.16 Application xrefactory
................................

Xrefactory (also known as Xref, X-ref and Xref-Speller), the refactoring
browser for (X)Emacs(1), can be used during running ECB regardless if the
ECB-windows are visible or not. There should be no conflicts as of ECB
versions >= 2.21.

If there are conflicts with the Xref-browser then the most recommended way is
to use one of the window-manager escreen.el or winring.el (and then use
different escreens or window-configurations for ECB and Xrefactory-browsing -
*Note Window-managers and ECB::).

12.1.2 What to do for unknown conflicts with other packages
-----------------------------------------------------------

As of version 2.20 the layout-engine of ECB is so flexible that normally
there should be no conflicts with other packages unless these packages have
their own complete window-layout-management (e.g. Gnus, BBDB, Xrefactory).
But these packages can and should be handled very well with the
window-manager-support of ECB (*note Window-managers and ECB::).

So if you detect an unknown (i.e. not listed in the conflicts-list in the
next subsection) conflict with a small package and some of its commands and
you have installed an ECB-version < 2.20 the first task you have to do is to
upgrade to a version >= 2.20!

If this doesn't solve the problem a very probable reason for the conflict is
that the command fails if called from another window than an edit-window of
the ecb-frame. So please check if the problem disappears if you call the
failing command from an edit-window of ECB.  If this is true then you you can
add the following code to your .emacs (and of course replace the XXX with the
failing command):

   (defadvice XXX (before ecb activate)
     "Ensures `XXX' works well when called from another window
   as an edit-window. Does nothing if called in another frame
   as the `ecb-frame'."
     (when (equal (selected-frame) ecb-frame)
       (unless (ecb-point-in-edit-window)
         (ecb-select-edit-window))))

This before-advice runs before the command XXX and ensures that the XXX is
called from within an edit-window if the current selected window is not an
edit-window. It does nothing if called for another frame as the ecb-frame.

If such an advice solves the problem then please send a note with the
solution to the ECB-mailing-list or direct to the ECB-maintainer so the
solution can be integrated in the next ECB-release

If calling from an edit-window fails too then please file a complete
bug-report to the ECB-mailing-list (*note Submitting problem report::). This
report should contain a detailed description which command of which package
fails under which circumstances!

---------- Footnotes ----------

(1) Xrefactory is available at `http://www.xref-tech.com'


File: ecb.info,  Node: Bugs,  Prev: Conflicts,  Up: Conflicts and bugs

12.2 Known bugs
===============

This section describes all currently known bugs of ECB. The maintainers of
ECB try to fix these bugs as soon as possible.

12.2.1 Following the source-file link in a help-buffer
------------------------------------------------------

The following bug occurs only in ECB-versions < 1.96 and is fixed since ECB
1.96!!

This bug only occurs if a compile-window is used and visible!

If you call functions like `describe-function' which displays a help-buffer
in the compile-window, then you will often get an output like this in the
compile-window:

   ecb-activate is an interactive compiled Lisp function in `ecb'.
   (ecb-activate)

   Activates the ECB...

The link to `ecb' is normally a click-able link, means if you click with the
middle-mouse button onto it the file is opened (in our example `ecb.el' would
be opened.

If you click onto it when the help-buffer is already the current buffer (i.e.
the compile-window is already selected before the click!)  then all is
working fine (i.e. the file is opened in the edit-window), but if you click
onto the link without selecting the compile-window before (i.e. the
edit-window is the current selected window) then the file is opened in the
compile-window which is probably not what you want. Not a big problem but
annoying.

The only available workaround is, first selecting the compile-window and then
clicking onto the link!

12.2.2 Extra history-entries for JDEE source-buffers
----------------------------------------------------

ECB on occasions creates an extra edit buffer for entries in the history
window. For example, let say there are three entries in the history window:

   Test1
   Test2
   Test3

In the edit window Test1 file is edited. When clicked on Test2 entry in
history, on occasion instead of switching to the existing buffer for Test2, a
new edit buffer is opened for Test2 file. At this point, there are four
entries in the history as follows:

   Test2
   Test2<2>
   Test1
   Test3


File: ecb.info,  Node: FAQ,  Next: Command Index,  Prev: Conflicts and bugs,  Up: Top

13 Frequently asked questions
*****************************

This is the Emacs Code Browser FAQ.

QUESTION                          ANSWER

What is the first step i          Read carefully the related sections of the
should do if i have problems      online-help of ECB.
with ECB?                         

What should i do, if a have a     Send a problem-report to the ECB-mailing-list
problem which can not be          with the command `ecb-submit-problem-report'.
solved even after reading the     See *Note Submitting problem report::.
online-help?                      

What should i do, if another      Take a look into *Note Conflicts::. If your
package seems not to work         package is not listed there then submit a
correct with ECB?                 problem-report.

Can ECB parse and display         Yes, in all version >= 1.94. ECB can now
source-contents not supported     parse and display all source-contents
by semantic?                      supported by semantic, imenu or etags - same
                                  as speedbar. See *Note Non-semantic sources::.

Why are the lines in the ECB-,    Check the variable
temp- and compilation-buffers     `truncate-partial-width-windows' and set it to
not wrapped but truncated?        nil.

Why doesn't ECB work correct      The variable `vc-delete-logbuf-window' must
with VC?                          be set to nil during active ECB. This can be
                                  done with the hooks of ECB.

Does ECB support C++ as well      This depends strongly on the used
as Java?                          semantic-version, but all semantic-versions
                                  >= semantic-1.4.3 support C++ really well.

Does ECB support Perl?            If perl can be parsed either by imenu, etags
                                  or semantic then ECB supports perl. Of course
                                  ECB would support perl best if perl is
                                  supported by semantic.

Does ECB support language XYZ?    See question "Does ECB support Perl?" and
                                  replace "Perl" with "XYZ" in the answer.

How to add new languages to       Add the language XYZ to semantic (perform all
ECB?                              necessary steps described in the
                                  semantic-manual) and ECB will automatically
                                  support language XYZ!  There is nothing to do
                                  in ECB itself! Same when you write an imenu-
                                  or etags-support for language XYZ.

Why does ECB not recognize my     Your C++-files have probably an extension
source-files for C++?             which is not mapped to c++-mode in
                                  `auto-mode-alist' and/or your own Emacs-setup
                                  has "destroyed" the correct value of the
                                  hook-variable `c++-mode-hook'.
                                  See *Note Setting up Emacs::.

Why doesn't ECB display the       There can be several reasons: First the value
node name in the echo area if     of the option
mouse moves over it?              `ecb-show-node-name-in-minibuffer' must be
                                  either `always' or `if-too-long'. If this is
                                  OK, then maybe you have turned on
                                  follow-mouse AFTER activating ECB;
                                  follow-mouse must be turned on BEFORE ECB is
                                  activated, e.g. in the `ecb-activate-hook'!
                                  But with Emacs 21.X and XEmacs there are no
                                  problems with this feature, just activate it.

Is it possible to make the        You can use the library "desktop.el" which
history of ECB persistent?        works very well with ECB.  Then all files of
                                  your recent Emacs-session will be opened
                                  automatically after next Emacs-start and will
                                  be added automatically to the ECB-history
                                  after ECB-start.

Is there an                       For Java the JDEE(1) has this feature and for
"Intellisense"-mechanism like     all other languages semantic offer something
with other IDEs?                  similar, see
                                  `http://cedet.sourceforge.net/intellisense.shtml'

Can i use ECB in combination      You can, but for ECB-versions < 1.96 it is
with Gnus within one frame?       not recommended because each of them has it's
                                  own window-management and probably there will
                                  be conflicts, so use different frames for ECB
                                  and Gnus! But beginning with ECB 1.96 you can
                                  use either escreen.el or winring.el as
                                  "window-manager" which allows you in
                                  consequence to use ECB and applications like
                                  Gnus in one frame!
                                  *Note Window-managers and ECB::.

Can i speed up displaying the     Yes, see the option
contents of big-size              `ecb-cache-directory-contents'. Read the
directories?                      section
                                  *Note Large directories::.

Is it possible to create/use      Yes. *Note Creating a new ECB-layout:: and
other layouts than the            *Note The layout-engine:: are the relevant
built-in ones?                    sections. The former one describes how to
                                  create interactively new layouts where the
                                  latter one is for Elisp-programmers.

Can i use speedbar as             Yes, see *Note Integrating speedbar::.
directory-browser within ECB?     

Can i exclude subdirectories      Yes, see *Note Grepping directories::.
from the recursive grep in the    
directories buffer?               

How can i prevent                 Set `semanticdb-default-save-directory' to a
contaminating each directory      directory.
with a file `semantic-cache'?     

Why ECB displays large            This comes from semantic;
portions of current               see *Note Setting up Emacs::.
source-file with dark             
background?                       

Why ECB underlines some parts     This comes from semantic;
of current source-file?           see *Note Setting up Emacs::.

Can i add my own commands to      Yes, see *Note Using the mouse::.
the popup-menus of                
tree-buffers?                     

Can ECB display the               Yes, see *Note Tips and tricks::.
compile-window "on demand"?       

Which buffers are treated as      See the docstring of the function
compilation-buffers by ECB?       `ecb-compilation-buffer-p'.

How can i change the modeline     You can change it with the options
of an ECB-tree-buffer?            `ecb-mode-line-prefixes',
                                  `ecb-mode-line-data' and
                                  `ecb-mode-line-display-window-number'.

Can the tree-buffers being        Yes, see option
selected faster than with the     `ecb-mode-line-display-window-number'.
standard-keybindings of ECB?      

Can ECB display the               Yes, see option
window-number in the modeline     `ecb-mode-line-display-window-number'.
of the special windows?           

How can i change the              You can do this with option `ecb-key-map'
keybindings of ECB?               (*note ecb-general::).

What can i do if                  Either the current `major-modes' is not
hiding/showing from the           supported by hideshow or you have to add an
methods-buffer does not work?     entry to `hs-special-modes-alist'
                                  (*note Hide-show::).

Can i maximize one of the         Yes, see *Note Maximizing the ECB windows::.
ECB-windows for better            
overlook?                         

Can i hide the ECB-windows for    Yes, see *Note Hiding the ECB windows::.
getting more editing-space?       

Can i define the actions ECB      Yes, see *Note Visiting tags::.
performs after visiting a tag?    

Buffers are not displayed         See *Note Problems with the compile window::.
correctly in the                  
compile-window?                   

Can ECB work together with        Yes, see *Note Window-managers and ECB::.
window-managers like              
escreen.el?                       

Can i remove these "ugly"         Yes, see option `ecb-tree-buffer-style'.
vertical lines from a             
tree-buffer?                      

ECB does not display images in    Customize `ecb-tree-buffer-style' and restart
the tree-buffers - what can i     ECB. But note: GNU Emacs <= 21.3.X for
do?                               Windows does not support image-display so ECB
                                  uses always ascii-guide-lines even when here
                                  the image-style is set in
                                  `ecb-tree-buffer-style'.

Do `special-display-function'     Yes, see
et. al. work with ECB.            *Note Using special-display with ECB::.

Can i activate the popup-menu     Yes, see *Note Using popup-menus::.
of a tree-buffer from keyboard?   

Can i display the popup-menu      Yes, see *Note Using popup-menus::.
of a tree-buffer with tmm?        

Does ECB disable all advices      "Nes"(2), see remarks in the documentation of
after deactivation?               the option
                                  `ecb-split-edit-window-after-start'.

Can ECB preserve the full         Yes, see the option
state of ECB between              `ecb-split-edit-window-after-start'.
deactivation and next             
activation?                       

Can i change the behavior how     Yes, see *Note The other window::.
ECB chooses another window for    
selecting it or scrolling it.     

Can i increase the allowed        Yes, see the docstring of the option
depth of nested submenus.         `ecb-directories-menu-user-extension'.

Can i apply some filters to       Yes, see *Note Filtering the tree-buffers::
the Tree-buffers.                 

With XEmacs i get sometimes an    Disable the func-menu support in your
error "Wrong number of            XEmacs-setup. See *Note Conflicts::.
arguments: widen (1)". What       
can i do?                         

Can i use desktop.el in           Yes, see *Note Conflicts::.
combination with ECB?             

Opening directories takes a       Read *Note Large directories::.
long time - what can i do?        

ECB seems to be blocked           ECB performs some stealthy tasks when idle -
sometimes - what is the reason?   this can cause sometimes a blocked Emacs but
                                  this tasks will be immetiatelly interrupted
                                  by any user-event so there should be normally
                                  no problems. But especially for mounted
                                  net-drives some of the stealthy tasks can
                                  take time up to some seconds for each file -
                                  and during one file-operation it can not be
                                  interrupted. See also
                                  `ecb-stealthy-tasks-delay'.

Can i exclude certain             Yes, see option
directories from being checked    `ecb-prescan-directories-exclude-regexps'.
for emptyness?                    

Can i exclude certain             Yes, see option
directories from checking the     `ecb-vc-directory-exclude-regexps'.
VC-state of the contained         
sources?                          

Can i exclude certain             Yes, see option
directories from checking the     `ecb-read-only-check-exclude-regexps'.
read-only-state of the            
contained sources?                

ECB ignores the remote-paths i    Maybe you have to check the option
have added to                     `ecb-ping-options'. Ensure that this option
`ecb-source-path'.                contains a value suitable for your
                                  ping-program (see `ecb-ping-program').
                                  See also *Note Remote directories::.

ECB seems to be blocked a long    Maybe you use cygwin-XEmacs. Then either the
time.                             empty-dir-check (see option
                                  `ecb-prescan-directories-for-emptyness') or
                                  the VC-support (see `ecb-vc-enable-support')
                                  can block ECB.
                                  For the latter one see *Note Known
                                  VC-problems::.

ECB seems to be blocked during    Maybe the root repository for the current
the VC-state update in the        directory is a remote-repository. This can
tree-windows.                     result in a long lasting check-time per file.
                                  See also *Note Version-control support:: for
                                  hints what you can do.

I have encountered some           See also *Note Version-control support:: for
problems with the display of      hints what you can do.
the VC-state in the               
tree-buffers.                     

I get errors when trying to       Ensure that the ECB-configuration of these
download new ECB with             tools is correct for your system (see
`ecb-download-ecb'.               `ecb-wget-setup', `ecb-gzip-setup' and
                                  `ecb-tar-setup').

---------- Footnotes ----------

(1) `http://jdee.sunsite.dk/'

(2) Nes is a combination of No and Yes :-)

